<!DOCTYPE html>
<html lang="zh-cn">
  <head>

    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="hbb&#39;s blog">
    <title>Qt Creator | hbb&#39;s blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/theme-override.css">
    <header>

  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="/">~/hbb&#39;s blog</a>
      </li>
      
      
      <li class="pull-left current">
        <a href="/tags/">~/tags</a>
      </li>
      

      
      
      <li class="pull-right">
        <a href="/index.xml">~/rss</a>
      </li>
      
      
      <li class="pull-right">
        <a href="/about">~/about me</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>
  <body>
    <ul>
<form id="search" class="pull-right"
    action='/search/' method="get">
    <label hidden for="search-input">Search site</label>
    <input type="text" id="search-input" name="query"
    placeholder="Type here to search">
    <input type="submit" value="search">
</form>

    </ul>
    <br/>


<div class="content-wrapper">

  <h1>Qt Creator</h1>
  

  

  <ul>
     
     
     
     <li>
       <span class="date">2023/11/30</span>
       <a href="/post/ubuntu16.04%E7%BC%96%E8%AF%91qt5.15%E7%9A%84qt-creator/">ubuntu16.04ç¼–è¯‘qt5.15çš„qt creator</a>
     </li>
     
   </ul>
</div>
    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();



function createCopyButton(highlightDiv) {
  const button = document.createElement("button");
  button.className = "copy-code-button";
  button.type = "button";
  button.innerText = "Copy";
  button.addEventListener("click", () => copyCodeToClipboard(button, highlightDiv));
  highlightDiv.insertBefore(button, highlightDiv.firstChild);

  const wrapper = document.createElement("div");
  wrapper.className = "highlight-wrapper";
  highlightDiv.parentNode.insertBefore(wrapper, highlightDiv);
  wrapper.appendChild(highlightDiv);
}

document.querySelectorAll(".highlight").forEach((highlightDiv) => createCopyButton(highlightDiv));


async function copyCodeToClipboard(button, highlightDiv) {
  const codeToCopy = highlightDiv.querySelector(":last-child > .chroma > code").innerText;
  try {
    var result = await navigator.permissions.query({ name: "clipboard-write" });
    if (result.state == "granted" || result.state == "prompt") {
      await navigator.clipboard.writeText(codeToCopy);
    } else {
      copyCodeBlockExecCommand(codeToCopy, highlightDiv);
    }
  } catch (_) {
    copyCodeBlockExecCommand(codeToCopy, highlightDiv);
  } finally {
 button.blur();
  button.innerText = "Copied!";
  setTimeout(function () {
    button.innerText = "Copy";
  }, 2000);  }
}

function copyCodeBlockExecCommand(codeToCopy, highlightDiv) {
  const textArea = document.createElement("textArea");
  textArea.contentEditable = "true";
  textArea.readOnly = "false";
  textArea.className = "copyable-text-area";
  textArea.value = codeToCopy;
  highlightDiv.insertBefore(textArea, highlightDiv.firstChild);
  const range = document.createRange();
  range.selectNodeContents(textArea);
  const sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);
  textArea.setSelectionRange(0, 999999);
  document.execCommand("copy");
  highlightDiv.removeChild(textArea);
}



</script>

      
      <hr/>
      èš“æ— çˆªç‰™ä¹‹åˆ©ï¼Œç­‹éª¨ä¹‹å¼ºï¼Œä¸Šé£ŸåŸƒåœŸï¼Œä¸‹é¥®é»„æ³‰ï¼Œç”¨å¿ƒä¸€ä¹Ÿ
      
    </footer>
  </body>
</html>

<script>
window.store = {
    
    "\/post\/claude_code%E7%AC%94%E8%AE%B0\/": {
        "title": "claude_codeç¬”è®°",
        "tags": ["ClaudeCode",],
        "content": "claude code ç¬”è®° 2016/2/19 æ›´æ–°æœ¬åœ°åœ¨claude codeä¸­ä½¿ç”¨è‡ªå·±éƒ¨ç½²çš„ code tool llm ä»¥ä¸‹è®°å½•ä¸€äº›æœ¬äººä½¿ç”¨æŠ€å·§,ä¸å®šæ—¶æ›´æ–°\nå…¥é—¨ /terminal-setup æ–¹ä¾¿shift + åŠ å›åœ¨ç»ˆç«¯ä¸­æ¢è¡Œ\n/init åˆå§‹åŒ–claude.md ,åˆæ­¥åˆ†æé¡¹ç›®ç»“æ„\n#ç©ºæ ¼xxx å›è½¦, xxxå°†è¢«è®°å½•åˆ°claude.md ,\n./claude.local.md ä¼˜å…ˆçº§æœ€é«˜, æ…¢æ…¢ä¼šè¢«å¼ƒç”¨\n./claude.md\n~/.claude.md ä¼˜å…ˆçº§æœ€ä½\n/memory å¯ä»¥ç›´æ¥ç¼–è¾‘claude.mdæ·»åŠ æ¡ç›®\n/modelé€‰æ‹©æ¨¡å‹ , opus å¾ˆæ¶ˆè€—token, æ™®é€šä»»åŠ¡ä¸ç”¨ä½œç”¨opus\n@æ–‡ä»¶åé€‰æ‹©, æ–¹å‘é”®é€‰æ‹©,æŒ‰ä¸‹shiftç¡®å®šå€™é€‰æ¡ç›®, è®©claudeçŸ¥é“ä¸Šä¸‹æ–‡ä½ç½®\nå¦‚æœåœ¨vscodeä¸­ç”¨claudeæ‰©å±•, å¯ä»¥æ‰“å¼€æ–‡ä»¶é€‰ä¸­, ä¼šè‡ªåŠ¨æ·»åŠ ä¸Šä¸‹æ–‡ä»¶\nä¸Šä¸‹æ–‡ä»¶å¯ä»¥é€šè¿‡@xx:è¡Œå·-ç­‰å· æˆ–åœ¨vs codeä¸­é€‰ä¸­å¤šè¡Œæ¥æŒ‡å®šæ›´å…·ä½“çš„ä½ç½®\n@ç¬¦å·ä¹Ÿåœ¨claude.mdä¸­,è®©memory çŸ¥é“ä¸Šä¸‹æ–‡\nåšuiæ—¶,å¯ä»¥æ‹–æ‹½ä¸€ä¸ªæ•ˆæœå›¾ç‰‡åˆ°ç»ˆç«¯, ç„¶å@å‡ºæŸä¸ªä»£ç ä¸­å·²å­˜åœ¨çš„æŒ‰é’®,è®©ä¿®æ”¹\nä¸€æ¬¡å¯¹è¯ä¸­ä¸Šä¸‹æ–‡å¤ªå¤šå¯èƒ½åœ¨æ— æ„ä¸­å¼•ç”¨ä»–ä»¬,å¯¼è‡´è¾“å‡ºæ•ˆæœä¸å¥½\n/exit é€€å‡ºå¯¹è¯,å†ç”¨claudeå‘½ä»¤é‡æ–°æ‰“å¼€å‘½ä»¤ å¦‚æœä¸é€€å‡ºå¯¹è¯ /clear æ¸…é™¤å¯¹è¯å†å²,å’Œä¸Šä¸‹æ–‡,åŸºæœ¬ä¸Šå’Œ /exit é‡å¼€å¯¹è¯æ•ˆæœä¸€æ · /compact å‹ç¼©å¯¹è¯å†å²å’Œä¸Šä¸‹æ–‡, å¯¹è¯å¾ˆé•¿æ—¶ä»ç„¶æœ‰é£é™© æŒ‰ä¸¤æ¬¡esc ,å›æº¯åˆ°æŸä¸ªå¯¹è¯å†å²,åˆ é™¤åé¢çš„å¯¹è¯å’Œä¸Šä¸‹æ–‡ /resume å¦‚æœåœ¨æ–°ä¼šè¯ä¸­æƒ³æ¢å¤ä¹‹å‰å…³é—­çš„å¯¹è¯çš„ä¸Šä¸‹æ–‡, /permissions æƒé™ç›¸å…³:å¦‚æœåœ¨äº¤äº’ä¸­é€‰æ‹©äº†,æ˜¯çš„å¹¶ä¸å†æé—®, ä¼šä¿å­˜é…ç½®åˆ°./.claude/setting.local.json\nè®¡åˆ’æ¨¡å¼, /plan æˆ– ctrl+ tab åˆ‡æ¢æ¨¡å¼\nè®¡åˆ’æ¨¡å¼é€‚åˆä¿®æ”¹æ¶‰åŠèŒƒå›´å¹¿çš„ä»»åŠ¡ æ€è€ƒæ¨¡å¼, é€šè¿‡think/æ€è€ƒå•è¯è§¦å‘,å¯ä»¥å’Œè®¡åˆ’æ¨¡å¼ä¸€èµ·ä½¿ç”¨, ä¹Ÿå¯ä»¥åŠ ä¸€äº›å½¢å®¹è¯,å¦‚ è¯·æ›´æ·±å…¥çš„æ€è€ƒ\nåˆ›å»ºæ–°çš„å‘½ä»¤ ./claude/commands/å‘½ä»¤.md åœ¨é‡Œé¢å†™æç¤ºè¯, é‡æ–°å¼€å¯ä¸€ä¸ªä¼šè¯,/å‘½ä»¤ å°±å¯ä»¥ç”¨äº†\nåœ¨commands/å‘½ä»¤.md é¡¶éƒ¨åŠ \n--- description: kreate a UI Component in /components/ui argument-hint: Component name | Component summary --- ## Context Parse $ARGUMENTS to get the following values: - [name]: Component name from $ARGUMENTS, converted to PascalCase - [summary]: Component summary from $ARGUMENTS| ## åé¢çš„æç¤ºè¯ä½¿ç”¨ä¼ è¿›æ¥çš„å‚æ•° å¯ä»¥ä½¿ç”¨/å‘½ä»¤ someName | some summary\nMCP server claude mcp add context7 --scope project -- npx -y @upstash/context7-mcpclaude\nremote vs local\nremote :è¿è¡Œåœ¨serverä¸Š, æ¯”è¾ƒå…¬å¸å†…ç½‘å¤šäººå…±ç”¨ä¸€ä¸ªmcp local: è¿è¡Œè‡ªå·±ç”µè„‘ä¸Š,æ€§èƒ½å¥½,tokenæ¶ˆè€—ä½ scope\nproject éšç€é¡¹ç›®ä»£ç æ¨é€,æ‰€æœ‰ä½¿ç”¨è¿™ä¸ªprojectçš„äººå¯ç”¨ ,ä¼˜å…ˆçº§é«˜ local é»˜è®¤,ä»…åœ¨æœ¬åœ° project , ä¼˜å…ˆçº§ä¸­ global æœ¬åœ°æ‰€æœ‰project ,ä¼˜å…ˆçº§ä½ ä¸¾ä¾‹\nMCP è¿è¡Œä½ç½® Scope æ˜¯å¦æ¨è Context7ï¼ˆQt é¡¹ç›®ï¼‰ Local Project â­â­â­â­â­ Context7ï¼ˆé€šç”¨åº“ï¼‰ Local Local â­â­â­â­ clangd Local Local â­â­â­â­ Git MCP Local Global â­â­ å›¢é˜Ÿç´¢å¼•æœåŠ¡ Remote Project â­â­â­ï¼ˆå›¢é˜Ÿï¼‰ æ·»åŠ å, /mcp å¯ä»¥æšä¸¾å·²æ·»åŠ çš„mcp, å¦‚æœæ˜¯remoteçš„, ç¡®ä¿çŠ¶æ€æ˜¯å·²è¿æ¥,å¦‚æœè¿æ¥å¤±è´¥, å¯ä»¥é‡æ–°é€‰ä¸­é‡æ–°è¿æ¥\næ·»åŠ åœ¨æç¤ºè¯ç”¨åŠ use mcpserver,å¦‚ use context7. å°±å¯ä»¥ä½¿ç”¨mcp server, å¯ä»¥ä½¿ç”¨#ç¬¦å·æ·»åŠ åˆ°.claude.md\næ·»åŠ æ–°çš„mcp serverå,éœ€è¦é‡æ–°å¯åŠ¨ä¼šè¯ç”Ÿæ•ˆ, æ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆ.mcp.jsoné…ç½®\nclaw å¯åŠ¨sub agent\nä¼šè¯ä¸Šä¸‹æ–‡éš”ç¦» /agent åˆ›å»º, é€‰æ‹©ä½ç½® project ./.claude/agents personal ~/.claude/agents æ·»åŠ æç¤ºè¯æè¿° resability å’Œ mcpèƒ½åŠ› æ·»åŠ åˆ°command.mdä¸­å¯åŠ¨agent : æ‰§è¡Œxx-agent åšä»€ä¹ˆ, å¦‚æœéœ€è¦çš„è¯,å¾ªç¯è¿­ä»£ç›´åˆ° .. ä½¿ç”¨githubæ’ä»¶codereview ä»¥åŠå¤„ç†issue\nè‡ªå·±éƒ¨ç½²æ¨¡å‹ ä½¿ç”¨è‡ªå·±éƒ¨ç½²çš„llm å®ç°æ— é™tokenå¤§æ³•\néƒ¨ç½²æ¨¡å‹å¯ä»¥é€šè¿‡ollama, vllm, æˆ–sglang éƒ¨ç½²,æ€§èƒ½è¶Šå¾€å³è¾¹è¶Šå¥½.\nå…¶ä¸­ollamaæ¯”è¾ƒæ–°æ‰‹å‹å¥½,ä¸”åªèƒ½å•æ—¶å¡éƒ¨ç½² ,\nå¦‚æœä½ åªæœ‰ä¸€ä¸ªæ˜¾å¡åŸºæœ¬ä¸ç”¨çœ‹å…¶ä»–çš„äº†,å°±ç”¨ollamaçœæ—¶çœåŠ›.\nå¦‚æœæƒ³å¤šå¡éƒ¨ç½², vllm ç›¸å¯¹ç®€å•,èµ„æºæ–‡æ¡£æ›´å¤š, ä½† sglangæ€§èƒ½æ›´å¥½\nä½¿ç”¨ollama æ–¹æ³• https://ollama.com/\né€‰æ‹©æ¨¡å‹æ—¶é€‰æ‹©æœ‰tool tagçš„æ¨¡å‹,è¿™ç§æ¨¡å‹æ‰å¯ä»¥é…ç½®ç»™calude code\nä¸‹è½½æ¨¡å‹\n1 â¯ ollama pull name æŸ¥çœ‹å·²æœ‰æ¨¡å‹\n1 â¯ ollama list è¿è¡Œæ¨¡å‹\n1 â¯ ollama run name æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æ¨¡å‹\n1 2 3 â¯ ollama ps NAME ID SIZE PROCESSOR CONTEXT UNTIL glm-4.7-flash:latest d1a8a26252f1 22 GB 100% GPU 32768 4 minutes from now launch claude code\n1 ANTHROPIC_AUTH_TOKEN=ollama ANTHROPIC_API_KEY=\u0026#34;\u0026#34; ANTHROPIC_BASE_URL=http://localhost:11434 claude --dangerously-skip-permissions --model glm-4.7-flash \u0026ndash;dangerously-skip-permissions è¡¨ç¤ºclaude codeä¸éœ€è¦å‘ç”¨æˆ·ç¡®è®¤å°±æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡\næˆ‘åœ¨æˆ‘çš„macbook m3 maxä¸Šè¯•äº†ä¸€ä¸‹,ç”µé‡æ‰å¾ˆå¿«. æ‰€ä»¥å»ºè®®åœ¨å°å¼æœºä¸Šéƒ¨ç½².\nç„¶ååå‘ä»£ç†11434ç«¯å£,\nå¦‚æ­¤å¦‚æ­¤,ä½ å°±æœ‰ä¸€ä¸ªæ— é™tokençš„é™æ™ºæ¨¡å‹äº†. æˆ‘è¯•ç€æŒ‡æŒ¥ä»–æŠŠä¸€ä¸ªqt quickåšçš„äº‘å°æ§ä»¶çš„æŒ‰é’®æ”¹æˆsvg, æ•ˆæœè¿˜è¡Œ, é€Ÿåº¦ä¹Ÿå…¼é¡¾äº†.\næˆ‘éƒ¨ç½²çš„ç”µè„‘æ˜¾å¡æ˜¯nvidia rtx 4090d\næ›´å¤šçš„æ¨¡å‹å¯ä»¥åœ¨https://huggingface.co/ æŸ¥çœ‹\n", 
        "url": "\/post\/claude_code%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/tags\/claudecode\/": {
        "title": "ClaudeCode",
        "tags": [],
        "content": "", 
        "url": "\/tags\/claudecode\/"
    },
    
    "\/": {
        "title": "Home",
        "tags": [],
        "content": " æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ Posts: ", 
        "url": "\/"
    },
    
    "\/post\/": {
        "title": "Posts",
        "tags": [],
        "content": "", 
        "url": "\/post\/"
    },
    
    "\/tags\/": {
        "title": "Tags",
        "tags": [],
        "content": "", 
        "url": "\/tags\/"
    },
    
    "\/tags\/bittle\/": {
        "title": "Bittle",
        "tags": [],
        "content": "", 
        "url": "\/tags\/bittle\/"
    },
    
    "\/tags\/isaaclab\/": {
        "title": "IsaacLab",
        "tags": [],
        "content": "", 
        "url": "\/tags\/isaaclab\/"
    },
    
    "\/tags\/isaacsim\/": {
        "title": "IsaacSim",
        "tags": [],
        "content": "", 
        "url": "\/tags\/isaacsim\/"
    },
    
    "\/post\/play-bittle-with-ros2-isaaclab-isaacsim\/": {
        "title": "play-bittle-with-ros2-isaaclab-isaacsim",
        "tags": ["Ros2","IsaacSim","IsaacLab","Bittle",],
        "content": "\n_ 2025.11 - 2025ç»“æŸè¿™æ®µæ—¶é—´,è·³æ§½åˆ°å…·èº«æ™ºèƒ½è¡Œä¸š, åœ¨åŒäº‹çš„å¼•å¯¼ä¸‹æ‘¸ç´¢ç€è‡ªå®šä¹‰usd schema, å¹¶ä½¿ç”¨éä¾µå…¥çš„æ–¹å¼ä¿®æ”¹isaac simçš„physXæ’ä»¶, æ”¯æŒä»UIä¸Šå¯¹USD sceneä¸­çš„primå¢åˆ è‡ªå®šä¹‰çš„schema api, ä¿®æ”¹schemaå±æ€§.\nä¸‹ä¸€é˜¶æ®µçš„ç›®æ ‡æ˜¯åœ¨isaac labä¸Šå°è¯•æ›¿æ¢ç‰©ç†å¼•æ“è¿›è¡Œrl è®­ç»ƒ\nä¸ºäº†æ›´å¿«çš„é€‚åº”å·¥ä½œè¦æ±‚,æˆ‘ç»™è‡ªå·±è®¾å®šäº†ä¸€ä¸ªå¿«é€Ÿå…¥é—¨çš„è®¡åˆ’, é€šè¿‡è®­ç»ƒä¸€ä¸ªè‡ªå·±çš„æœºå™¨äººæ¨¡å‹,æ¥å­¦ä¹ å·¥ä½œæ‰€éœ€è¦çš„æŠ€èƒ½\næœ¬åšå®¢å°†å›´ç»•bittle 4è¶³æœºå™¨ç‹— è®°å½•\nisaaclab ä¸­è®­ç»ƒ (å¹³å¦åœ°é¢,4096ä¸ªä»¿çœŸç¯å¢ƒ 2000ä¸ªè¿­ä»£è®­ç»ƒé‡, 4090 Då¤§æ¦‚10åˆ†é’Ÿå·¦å³å³å¯) isaacsim ä¸­æ¨ç† (åœ¨Ros2ä½¿ç”¨ps5æ‰‹æŸ„æ§åˆ¶,å‘æ¶ˆæ¯åˆ°ä»¿çœŸç¯å¢ƒçš„Ros2èŠ‚ç‚¹,æ§åˆ¶ä»¿çœŸä¸–ç•Œçš„bittle) sim2sim (ä»physX ç‰©ç†å¼•æ“è½¬æ¢åˆ° å…¶ä»–ç‰©ç†å¼•æ“éªŒè¯æ¨¡å‹æ³›åŒ–èƒ½åŠ›) sim2real (é€šè¿‡æ¨¡å‹è’¸é¦, å»é™¤ç°å®ä¸–ç•Œä¸­ä¸æ–¹ä¾¿é‡‡æ ·çš„æ•°æ®,ä»¥åŠæ·»åŠ çœŸå®ä¸–ç•Œçš„6è½´é™€èºä»ªä¼ æ„Ÿå™¨) æœ¬æ–‡ä¸ä¼šä»‹ç»rl å’Œ inferçš„å…·ä½“ç»†èŠ‚,ä½†ä¼šæä¾›ä»£ç ,æ“ä½œæ­¥éª¤,\nå°è¯•æ¢ç´¢ä»£ç ,ä¼˜åŒ–ä»£ç ,è¿™æ ·æ‰ä¼šæœ‰æ‰€æ”¶è·\nè®¡åˆ’å¸¸å¸¸åœ¨éšç€å·¥ä½œ,ç›®æ ‡,å…´è¶£ è°ƒæ•´, ä¸ä¿è¯èƒ½åšå®Œ, ä½†æ˜¯æœ‰å®Œæˆ,æˆ‘éƒ½ä¼šæ›´æ–°åšå®¢(å¦åˆ™å²‚ä¸æ˜¯åšäº†ä¸ªå¯‚å¯)\n0. Bittle bittleæ˜¯ä¸€æ¬¾æ¯”è¾ƒæˆç†Ÿçš„å­¦ä¹ ç”¨çš„æœºå™¨ç‹—, 4æ¡è…¿æ¯æ¡è…¿æœ‰ä¸¤ä¸ªè‡ªç”±åº¦,è¿˜æœ‰è„–å­ä¸€ä¸ª,å…±æœ‰9ä¸ªè‡ªç”±åº¦,ä¸è¿‡è®­ç»ƒè¡Œèµ°çš„è¯,è„–å­å¯ä»¥ç®€ç•¥,è§†ä½œ8ä¸ªdof.\nä»–æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„é€†å‘å»ºæ¨¡, ä½†æœ‰ä¸€äº›å°é—®é¢˜, å³è¾¹è‚¢ä½“çš„å…³èŠ‚æ–¹å‘ä¸å·¦è¾¹ä¸ä¸€æ ·\næˆ‘åšäº†ä¸€äº›è°ƒæ•´,ç»Ÿä¸€æ‰€æœ‰è‚¢ä½“çš„è¡Œä¸º, ä½¿å…¶å…³èŠ‚è§’åº¦ä¸ºè´Ÿæ—¶,å‘å‰æŠ¬èµ·è‚¢ä½“,\né™¤æ­¤ä¹‹å¤–,è¿˜ä¿®æ”¹äº†å…³èŠ‚çš„åç§°, æŠŠå…³èŠ‚åç§°æŒ‰ å·¦å³(L/R),å…³èŠ‚ä½ç½®(Front / Hind), å…³èŠ‚åç§°(Hip/Knee),å…³èŠ‚è¡Œä¸º(Flexion-Extention/Abduction- Adduction) é‡å‘½å\nç”±äºBittleæ²¡æœ‰å‘å¤–ä¾§æ‰©å¼ /åˆæ‹¢çš„å…³èŠ‚(HAA),æ‰€ä»¥æ²¡æœ‰åŠæ³•èµ°èƒèŸ¹æ­¥,ä¿®æ”¹åçš„8ä¸ªå…³èŠ‚åç§°ä¸º\nLF_HFE (å·¦å‰,é«‹å…³èŠ‚,ä¼¸å±ˆ) LH_HFE \u0026hellip; RF_HFE \u0026hellip; RH_HFE \u0026hellip; LF_KFE \u0026hellip; LF_KFE \u0026hellip; RF_KFE \u0026hellip; RH_KFE (å³å,è†å…³èŠ‚,ä¼¸å±ˆ) å¦‚æœæƒ³è´­ä¹°Bittle, éœ€è¦æ³¨æ„ä»–æœ‰ardiunoç‰ˆæœ¬å’Œesp32ç‰ˆæœ¬, å…¶ä¸­ardiunoç‰ˆæœ¬ä¸æ”¯æŒè¯»å–å…³èŠ‚è§’åº¦\nå¼ºçƒˆå»ºè®®ä¸è¦å¤ªç€æ€¥ä¹°, ç›´åˆ°éœ€è¦çœŸæœºéƒ¨ç½²æ—¶å†ä¹°éƒ½æ¥å¾—åŠ,\nisaaclab/isaacsimä¸­å†…ç½®äº†ä¸€äº›4è¶³æœºå™¨äººçš„example, å¦‚spot ,anymal, æˆ‘è®­ç»ƒå‚è€ƒäº†anymal c , æ¨ç†å‚è€ƒäº†spot\n1. ä»£ç è·å– æœ¬æ–‡ä»£ç åŸºäºisaacsim 5.1 + isaaclab 2.3\nä¸»ä»“åº“ é¡¹ç›®ä¸­åŒ…å«4ä¸ªgit submodule\n1 2 3 4 5 6 ../ bittle_solution/ | IsaacLab_bittle/ | IsaacSim_bittle/ | bittle_URDF/\t# bittle æœºå™¨äººèµ„äº§, å¦‚æœæƒ³ä¿®æ”¹æ‰éœ€è¦ä½¿ç”¨,å¦åˆ™ä½¿ç”¨IsaacLab_bittleä¸­çš„å·²æ·»åŠ çš„.usdå°±è¡Œ | ps_ros2_common/ # mac/ubuntuå¯ç”¨çš„rosåŒ…,å¯¹ros2-humble-joy æ‰‹æŸ„æ¶ˆæ¯è§£ç å publishåˆ°isaacsimä¸­æ§åˆ¶æœºå™¨äºº è·å–å®ƒä»¬:\n1 2 3 git clone git@github.com:nocanstillbb/bittle_solution.git cd bittle_solution git submodule update --init --recursive 2. è®­ç»ƒ,å¯¼å‡ºæ¨¡å‹ Isaaclabå’Œisaacsimçš„å®‰è£…, è¯·å‚è€ƒInstallation using Isaac Sim Source Code\nåœ¨isaaclabä¸­ ä½ éœ€è¦æŠŠè¿™ä¸ªç»å¯¹è·¯å¾„ä¿®æ”¹ä¸ºé€‚åˆä½ ç¯å¢ƒçš„è·¯å¾„ (æ‡’å¾—æ”¹æˆç›¸å¯¹è·¯å¾„)\nè®­ç»ƒ\n1 ./isaaclab.sh -p scripts/reinforcement_learning/rsl_rl/train.py --task Isaac-Velocity-Flat-Bittle-v0 --num_env 4096 agent.max_iterations=2000 --headless \u0026ndash;num_env è¡¨ç¤ºä½¿ç”¨4096ä¸ªç¯å¢ƒ,æ„å‘³ç€è®­ç»ƒæ—¶,ä»¿çœŸä¸–ç•Œä¼šæœ‰4096åªbittle å­¦ä¹ èµ°è·¯\nagent.max_iterations=2000 è¡¨ç¤ºè®­ç»ƒè¿‡ç¨‹ä¸­æœ€å¤šæ›´æ–°2000æ¬¡æƒé‡\n\u0026ndash;headless è¡¨ç¤ºè®­ç»ƒè¿‡ç¨‹ä¸æ˜¾ç¤ºä»¿çœŸ,ä»¥æå‡æ€§èƒ½,\nè®­ç»ƒå®Œæˆå,\n1 ./isaaclab.sh -p scripts/reinforcement_learning/rsl_rl/play.py --task Isaac-Velocity-Flat-Bittle-v0 --num_env 1 --checkpoint logs/rsl_rl/bittle_flat/2026-01-19_17-05-33/model_1999.pt å…¶ä¸­2026-01-19_17-05-33éœ€è¦ä¿®æ”¹ä¸ºä½ çœŸå®è®­ç»ƒçš„æ—¶é—´\næ‰§è¡Œè¿™æ¡æŒ‡ä»¤å, logç›®å½•åº”ä¸º:\n1 2 3 4 5 6 7 8 9 10 11 12 13 logs/rsl_rl/bittle_flat/2026-01-19_17-05-33/ â”œâ”€â”€ events.out.tfevents.1769061845.CNF202558106702.1893133.0 â”œâ”€â”€ exported â”‚Â â”œâ”€â”€ policy.onnx â”‚Â â””â”€â”€ policy.pt â”œâ”€â”€ git â”‚Â â””â”€â”€ IsaacLab_bittle.diff â”œâ”€â”€ model_0.pt â”œâ”€â”€ ... â”œâ”€â”€ model_1999.pt â””â”€â”€ params â”œâ”€â”€ agent.yaml â””â”€â”€ env.yaml exportedç›®å½•å’Œparamsç›®å½•åœ¨åé¢æ¨ç†æ­¥éª¤ä¼šä½¿ç”¨åˆ°.\n3. æ¨ç†, ps5æ‰‹æŸ„æ§åˆ¶ isaacsim 5.1 è‡ªå¸¦äº†ä¸€ä¸ªros2 humble , ä¸Python3.11å…¼å®¹\næˆ‘åœ¨mç³» mac bookä¸Šä½¿ç”¨ros2 humble é€šè¿‡ç»„ç½‘è¿‡äº‘ç«¯å’Œ isaacsimä¸­çš„ros2 humbleè¿›è¡Œé€šè®¯\nå› ä¸ºä½¿ç”¨çš„æ¶ˆæ¯æ˜¯rosæ ‡å‡†æ¶ˆæ¯,æ‰€ä»¥ä¸å¿…ä¿è¯abiå…¼å®¹,ä½†éœ€è¦rosç»„ç½‘,\nä¸ºç®€ä¾¿æ•™ç¨‹,æˆ‘é»˜è®¤çœ‹æœ¬æ–‡çš„ä½ ä½¿ç”¨çš„æ˜¯ubuntu 22.04 æœ¬æœºros2 humbleå’Œisaacsimçš„rosé€šè®¯\nå¦‚æœä½ åœ¨ubuntuä¸ŠåŒæ—¶ä½¿ç”¨isaacsim ros2å’Œros2 é€šè®¯\nä¸è‡ªå®šä¹‰æ¶ˆæ¯åˆ™ä¹Ÿä¸å¿…è€ƒè™‘abiå…¼å®¹, å¦åˆ™éœ€è¦è‡ªå·±å‚è€ƒnvidiaæ–‡æ¡£ä¸ºisaacsimç¼–è¯‘python 11å…¼å®¹çš„ ros2\nå› ä¸ºubuntu22.04 apt å®‰è£…çš„humbleæ˜¯python 10å…¼å®¹çš„,è€Œisaacsim 5.1 ä½¿ç”¨çš„python 11\nå‡è®¾ä½ å·²ç»å®‰è£…å¥½ros2ç¯å¢ƒå’Œros2-humble-joy 1 2 3 4 mkdir -p ros2_ws/src cd ros2_ws/src cp -rf path/to/ps_ros2_common . cd .. åœ¨ç¼–è¯‘å‰æ ¹æ®æ“ä½œç³»ç»Ÿå’ŒPsæ‰‹æŸ„å‹å· ä½¿ç”¨è¿™ä¸ªå®æ“ä½œç¼–è¯‘ç›®æ ‡\nå¼€å§‹ç¼–è¯‘\n1 2 source /opt/ros/humble/setup.sh colcon build è®¾ç½®rosç¯å¢ƒå˜é‡åˆ°~/.bashrcæœ«å°¾\n1 2 3 4 5 cat \u0026lt;\u0026lt; EOF \u0026gt;\u0026gt; ~/.bashrc ROS_DOMAIN_ID=0 RMW_IMPLEMENTATION=rmw_fastrtps_cpp ROS_DISTRO=humble EOF é€šè¿‡è“ç‰™æˆ–usb è¿æ¥ä½ çš„psæ‰‹æŸ„åˆ°ä½ çš„ä¸»æœºä¸Š,ç„¶åé‡æ–°æ‰“å¼€3ä¸ªç»ˆç«¯,ä»¥ä¾¿äºä¸Šrosç›¸é€çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ\nç»ˆç«¯1è¿è¡Œ\n1 2 source /opt/ros/humble/setup.sh ros2 run joy joy_node # publish joy messages ç»ˆç«¯2è¿è¡Œ\n1 2 source /opt/ros/humble/setup.sh ros2 run ps_ros2_common joy_test # subscrib joy messages , publish joy_directions message ç»ˆç«¯3è¿è¡Œ\n1 2 source /opt/ros/humble/setup.sh ros2 topic echo /joy_directions # echo joy_directions messages for test ç¡®è®¤æ“ä½œæ‰‹æŸ„æ–¹å‘å, åœ¨ç»ˆç«¯3æ­£å¸¸æ‰“å°å, å°±å¯ä»¥å¯åŠ¨isaacsimè¿›è¡Œä¸‹ä¸€æ­¥çš„æµ‹è¯•äº†\nåŒæ ·éœ€è¦ä¿®æ”¹åŠ è½½çš„usdè·¯å¾„\nä»¥åŠä¿®æ”¹isaacsim bittle examplesä¸­åŠ è½½çš„æ¨¡å‹æ–‡ä»¶è·¯å¾„\nåœ¨isaacsim_bittleç›®å½•ä¸­æ‰§è¡Œ\n1 ./isaac-sim.selector.sh é€‰æ‹©ros2 bridge, humbleå, ç‚¹å‡»start\né€‰æ‹© window-\u0026gt;examples-\u0026gt;robotics examples\nåœ¨ä¸‹æ–¹é€‰æ‹© POLICY -\u0026gt; Bittle ,åŠ è½½å®Œæˆå, å°†ä¼šè‡ªåŠ¨è¿è¡Œä»¿çœŸ,ä½†æœºå™¨äººä¸ä¼šåŠ¨ä½œ, è¿™å¯èƒ½æ˜¯isaacsimçš„Bugæˆ–æˆ‘ä»£ç å“ªé‡Œæœ‰é—®é¢˜\nè§£å†³æ–¹å¼æ˜¯é€‰æ‹©æ‰€æœ‰å…³èŠ‚,æŠŠstiffnessä»0.01745ä¿®æ”¹ä¸º0.017451,\näº‹å®ä¸Šåªè¦å€¼æ”¹å˜ä¸€ä¸‹å°±æ­£å¸¸äº†,åœ¨æœ«å°¾åŠ 1æ˜¾ç„¶æ˜¯ä¸€ä¸ªå¾®ä¸è¶³é“çš„å°ä¿®æ”¹\næ­¤æ—¶æŠŠps5æ‰‹æŸ„é€šè¿‡è“ç‰™æˆ–type-cè¿æ¥åˆ°mac bookä¸Š, å°±å¯ä»¥æ§åˆ¶ä»¿çœŸä¸–ç•Œçš„bittle æœºå™¨ç‹—äº†.\nå¦‚æœä¸æƒ³ä½¿ç”¨roså’Œæ‰‹æŸ„, åªéœ€è¦æ³¨é‡Šæ‰è¿™éƒ¨åˆ†ä»£ç  å’Œè¿™éƒ¨åˆ†ä»£ç , ä»ç„¶å¯ä»¥ä½¿ç”¨é”®ç›˜çš„æ–¹å‘é”®æ“ä½œä»¿çœŸç¯å¢ƒä¸­çš„bittle\n4. sim2sim 5. sim2real ", 
        "url": "\/post\/play-bittle-with-ros2-isaaclab-isaacsim\/"
    },
    
    "\/tags\/ros2\/": {
        "title": "Ros2",
        "tags": [],
        "content": "", 
        "url": "\/tags\/ros2\/"
    },
    
    "\/tags\/omniverse\/": {
        "title": "Omniverse",
        "tags": [],
        "content": "", 
        "url": "\/tags\/omniverse\/"
    },
    
    "\/tags\/qt-plugin\/": {
        "title": "Qt Plugin",
        "tags": [],
        "content": "", 
        "url": "\/tags\/qt-plugin\/"
    },
    
    "\/post\/%E5%9C%A8nvidia_omniverse_app%E4%B8%AD%E5%8A%A0%E8%BD%BDc-_qt_qml%E6%8F%92%E4%BB%B6\/": {
        "title": "åœ¨nvidia_omniverse_appä¸­åŠ è½½c\u002b\u002b_qt_qmlæ’ä»¶",
        "tags": ["Omniverse","Qt Plugin",],
        "content": "æ¥ä¸Šæ–‡ å¥½ä¹…æ²¡å†™åšå®¢äº†, 5æœˆä»½-11æœˆä»½ä¸€ç›´åœ¨ç ”ç©¶react native , tså’Œcpp hybridçš„mvvm\nä»ä¸€å¼€å§‹çš„appå•ä¸ªå·¥ç¨‹,åˆ°åé¢çš„npmæ¨¡å—åŒ–, åœ¨11æœˆä»½å‹‰å¼ºç”»ä¸Šå¥å·\nå›½åº†å‰ç»æ’æ˜Ÿå’Œé“¶ç‹¼ä»‹ç»,æŠ•äº†ä»–ä»¬ä»¿çœŸå›¢ä¼™UIå²—ä½,åŸè®¡åˆ’qt6 + vulkanå†™ä¸€ä¸ªä»¿çœŸè½¯ä»¶.\n(æ„Ÿè°¢ä»–ä»¬,æ–°çš„å·¥ä½œç¯å¢ƒæ¯”ä»¥å‰å¥½å¾—å¤š, æ–°çš„å·¥ä½œä¹Ÿæ˜¯æ¯å¤©åœ¨æ¢ç´¢æ— äººåŒº,å……æ»¡æ–°é²œæ„Ÿ\nâ€‹ å¸Œæœ›æ–°çš„å…¬å¸å¯ä»¥å¹²è¶´å…¶ä»–ç«äº‰å¯¹æ‰‹,ä¹Ÿå¸Œæœ›è‡ªå·±å¯ä»¥åœ¨æ–°çš„è¡Œä¸šæœ‰æ‰€æˆé•¿\nå…¥èŒå‰ç‹ ç‹ çš„ç ”ç©¶äº†ä¸€æŠŠqt6 + vulkan\nå°è£…äº†vulkan çš„qmlæ§ä»¶;æŠŠæˆ‘çš„prism for qt mvvmæ¡†æ¶ä»qt5åˆ‡åˆ°qt6 ä¿®å¤äº†çƒ­é‡è½½ / nativeæ— è¾¹æ¡†çª—å£\nä¸è¿‡è®¡åˆ’æ€»æ˜¯èµ¶ä¸ä¸Šå˜åŒ–,å…¥èŒåå˜æˆåŸºäºnvidia omniverseçš„äºŒå¼€äº†\nå°±åƒåœ¨å²¸ä¸Šèµ°çš„äººçªç„¶æ‰å…¥æ°´ä¸­, ç¬¬ä¸€ä»¶äº‹å°±æ˜¯åŠªåŠ›çˆ¬åˆ°å²¸ä¸Šå»\næ‰€ä»¥æˆ‘å½“æ—¶ä¹Ÿè¯•å›¾æŠŠqtæ¬åˆ°omniverse app çš„pythonä¸–ç•Œé‡Œ, éšç€ç›®æ ‡è¶Šæ¥è¶Šæ¸…æ™°, qtæ–¹æ¡ˆå·²ç»æ”¾å¼ƒäº†\nä½†æ˜¯é‚£æ®µæ—¶é—´ç§¯ç´¯äº†ä¸€äº›ç»éªŒ, è¿˜æ˜¯è§‰å¾—éœ€è¦è®°å½•ä¸€ä¸‹ ,é˜²æ­¢æœªæ¥è¿˜ä¼šé‡åˆ°åœ¨pythonä¸­è°ƒç”¨qt c++ plugin çš„åœºæ™¯\nåˆ›å»ºqt qml c++ plugin æœ¬æ–‡ä¸ä»‹ç»å¦‚ä½•å°è£…è‡ªå®šä¹‰æ¥å£çš„qt æ’ä»¶,\nç®€è€Œè¨€ä¹‹å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£, ç„¶ååœ¨åŠ¨æ€åº“ä¸­å®šä¹‰,å®ç°ç»§æ‰¿æ¥å£çš„ç±» , åœ¨appä¸­å®ä¾‹åŒ–ç±»ä»¥è°ƒç”¨\nå®‰è£…qtå’Œpysideç‰ˆæœ¬ ä»license æ–¹é¢æ¥çœ‹ pyqtçš„å¼€æºåè®®ä¸ºå…·æœ‰å·¦ä¼ æŸ“çš„GPL, pyside æ˜¯LGPL, pysideèƒœ\nä»å…¼å®¹æ–¹é¢æ¥çœ‹, pyqtçš„qobject å’Œc++ qt çš„qobjectä¸å…¼å®¹, pyside åˆ™æ˜¯å…¼å®¹çš„, è¿˜æ˜¯pysideèƒœ\næ‰€ä»¥é€‰æ‹©pyside\næˆ‘å®‰è£…çš„qt 6æ˜¯ 6.8.3, æ‰€ä»¥æˆ‘åœ¨Pythonç¯å¢ƒä¸­ä¹Ÿå®‰è£…6.8.3çš„pyside6, è¿™æ ·å°±å¯ä»¥å…¼å®¹äº†\n1 2 #æŠŠpyside6 å®‰è£…åˆ°pip_installç›®å½• python -m pip install pyside6 == 6.8.3 -t c:\\path\\to\\pip_install ä»pythonåŠ è½½qtæ’ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 import sys #è®¾ç½®pyside pipå®‰è£…çš„ä½ç½®,è¿™æ ·åŠ è½½ c++ æ’ä»¶æ—¶,ä¼šè‡ªåŠ¨åˆ°è¿™é‡Œæ‰¾åˆ°ç›¸å…³çš„dll/soå’Œpyd extra_libs = [ r\u0026#34;c:\\path\\to\\pip_install\\PySide6\u0026#34; ] os.environ[\u0026#34;PATH\u0026#34;] = \u0026#34;;\u0026#34;.join(extra_libs) + \u0026#34;;\u0026#34; + os.environ[\u0026#34;PATH\u0026#34;] #æˆ– #sys.path.insert(0, r\u0026#34;c:\\path\\to\\pip_install\\PySide6\u0026#34;) from PySide6.QtGui import QGuiApplication from PySide6.QtQml import QQmlApplicationEngine from PySide6.QtCore import QPluginLoader, QObject , QLibraryInfo from PySide6.QtCore import qInstallMessageHandler, QtMsgType # å®‰è£…message hook, è®©qDebug æ—¥å¿—è¾“å‡ºåˆ°python console def message_handler(msg_type, context, message): if msg_type == QtMsgType.QtDebugMsg: prefix = \u0026#34;[Debug]\u0026#34; elif msg_type == QtMsgType.QtWarningMsg: prefix = \u0026#34;[Warning]\u0026#34; elif msg_type == QtMsgType.QtCriticalMsg: prefix = \u0026#34;[Critical]\u0026#34; elif msg_type == QtMsgType.QtFatalMsg: prefix = \u0026#34;[Fatal]\u0026#34; else: prefix = \u0026#34;[Info]\u0026#34; print(f\u0026#34;{prefix} {message}\u0026#34;) qInstallMessageHandler(message_handler) if __name__ == \u0026#34;__main__\u0026#34;: print(\u0026#34;sys.argv:\u0026#34;, sys.argv) # åœ¨pythonä¸­åˆ›å»ºapp å’Œqml engineçš„å®ä¾‹ app = QGuiApplication(sys.argv) #ä¼ é€’app args engine = QQmlApplicationEngine() # è¿™ä¸‰ä¸ªæ˜¯æˆ‘çš„ c++/qml hybrid çš„plugin, æ¯ä¸ªpluginé‡Œæœ‰ç‹¬ç«‹çš„c++é€»è¾‘å’Œqml ui plugin_path = [\u0026#34;C:/Users/CNF2025581067/source/repos/qt6-soclution/bin/AMD64/prism_qt_core.dll\u0026#34;, \u0026#34;C:/Users/CNF2025581067/source/repos/qt6-soclution/bin/AMD64/prism_qt_ui.dll\u0026#34;, \u0026#34;C:/Users/CNF2025581067/source/repos/qt6-soclution/bin/AMD64/rs_common.dll\u0026#34;] plugin_instances = [] loaders = [] # qt æ’ä»¶å®åŠ è½½,å®ä¾‹åŒ– for path in plugin_path: print(path) loaders.append(QPluginLoader(path)) loader =loaders[-1] if loader.load(): plugin_instance = loader.instance() if plugin_instance: plugin_instances.append(plugin_instance) print(\u0026#34;Loaded:\u0026#34;, plugin_instance.metaObject()) else: print(\u0026#34;Failed to get plugin instance:\u0026#34;, loader.errorString()) else: print(\u0026#34;Failed to load plugin:\u0026#34;, loader.errorString()) inject_app_engin = False #éå†æ‰€æœ‰æ’ä»¶,è°ƒç”¨æ¥å£æ–¹æ³• register_types æ³¨å†Œqtç±»å‹ä»¥åŠ ioc for instance in plugin_instances: #åœ¨ç¬¬ä¸€ä¸ªæ’ä»¶è°ƒç”¨ä¹‹å‰,æŠŠapp,å’Œqml engineæ³¨å…¥ plugin if not inject_app_engin : inject_app_engin = True if hasattr(instance, \u0026#34;attach_app\u0026#34;) : instance.attach_app(app) if hasattr(instance, \u0026#34;attach_engine\u0026#34;) : instance.attach_engine(engine) if hasattr(instance, \u0026#34;register_types\u0026#34;): ok = instance.register_types() print(\u0026#34;register_types result:\u0026#34;,ok) else: print(\u0026#34;C++ plugin instance does not have \u0026#39;register_types\u0026#39; method.\u0026#34;) #éå†æ‰€æœ‰æ’ä»¶,è°ƒç”¨æ¥å£æ–¹æ³• init for instance in plugin_instances: if hasattr(instance, \u0026#34;init\u0026#34;): ok = instance.init() print(\u0026#34;init result:\u0026#34;,ok) else: print(\u0026#34;C++ plugin instance does not have \u0026#39;init\u0026#39; method.\u0026#34;) #éå†æ‰€æœ‰æ’ä»¶,è°ƒç”¨æ¥å£æ–¹æ³• install for instance in plugin_instances: if hasattr(instance, \u0026#34;install\u0026#34;): ok = instance.init() print(\u0026#34;init install:\u0026#34;,ok) else: print(\u0026#34;C++ plugin instance does not have \u0026#39;install\u0026#39; method.\u0026#34;) #åŠ è½½æ’ä»¶ä¸­çš„qml ui, å¼¹å‡ºçª—å£ qml_file = \u0026#34;qrc:/rs_common/views/layouts/windows/MainWin.qml\u0026#34; engine.load(qml_file) if not engine.rootObjects(): sys.exit(-1) #æ‰§è¡Œuiçº¿ç¨‹çš„æ¶ˆæ¯å¾ªç¯ result = app.exec() #é€€å‡ºç¨‹åº(ä¸»çº¿ç¨‹æ¶ˆæ¯å¾ªç¯å), åå®‰è£… ååˆå§‹åŒ– for instance in plugin_instances: if hasattr(instance, \u0026#34;uninstall\u0026#34;): ok = instance.uninstall() print(\u0026#34;uninstall result:\u0026#34;,ok) else: print(\u0026#34;C++ plugin instance does not have \u0026#39;uninstall\u0026#39; method.\u0026#34;) for instance in plugin_instances: if hasattr(instance, \u0026#34;uninit\u0026#34;): ok = instance.init() print(\u0026#34;uninit result:\u0026#34;,ok) else: print(\u0026#34;C++ plugin instance does not have \u0026#39;uninit\u0026#39; method.\u0026#34;) #pythonè¿›ç¨‹é€€å‡º sys.exit(result) ä»omniverse åŠ è½½qt æ’ä»¶ omniverse kitæ˜¯nvidiaçš„ ä¸€å¥—ç”¨äºå¼€å‘ appçš„sdk, å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¼€å‘ usd / simulation app\nåœ¨omniverse kitä¸­,ä¸‡ç‰©çš†æ’ä»¶, å¼€å‘è¯­è¨€æ˜¯python , åŒæ—¶ä¹Ÿå†…ç½®äº†omni uiæ¨¡å—, å¯ä»¥ç”¨python + omni.ui åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶çƒ­è½½pythonä»£ç ,å¿«é€Ÿå¼€å‘ui\nå…³äºomniverse kitçš„æ’ä»¶å¼€å‘,å¯ä»¥å‚è€ƒ kit-app-template\nomni ui æ˜¯åŸºäºimgui å¼€å‘çš„ç«‹å³å¼uiæ¡†æ¶ ,ä¸åŒäºqtäº‹ä»¶å“åº”å¼çš„uiæ¡†æ¶, omni uiæ¯ä¸€å¸§éƒ½åœ¨é‡ç»˜, æ‰€ä»¥qt åœ¨ä¸»çº¿ç¨‹ä¸­ å¼€å¯æ¶ˆæ¯å¾ªç¯,ä¼šå¯¼è‡´æ•´ä¸ª omniverse app ui æŒ‚èµ·.\næ‰€ä»¥è¦ä¹ˆæŠŠqt ui thread åˆ›å»ºåœ¨åå°çº¿ç¨‹, è¦ä¹ˆqt ä¸æ‰§è¡Œæ¶ˆæ¯å¾ªç¯, è€Œæ˜¯æ‰‹åŠ¨æ³µ uiæ¶ˆæ¯\næ¶ˆæ¯å¾ªç¯å¤„ç† æˆ‘é€‰æ‹©æŠŠ qt ui æ¶ˆæ¯ä¸²åˆ° omni uiçš„update ä¸­,è¿™æ ·å°±ä¸å¿…è€ƒè™‘uiäº¤äº’çš„åŒæ­¥é—®é¢˜äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 import carb import carb.events import omni.ext import omni.kit.app g_app, g_engine = get_app_engine() # è®¢é˜…omni ui çš„update_streamçš„Updateäº‹ä»¶, omni uiæ¯æ›´æ–°ä¸€å¸§,æ‰§è¡Œä¸€ä¸ªqt uiæ¶ˆæ¯å¤„ç† def on_update(e: carb.events.IEvent): g_app.processEvents() update_stream = omni.kit.app.get_app().get_update_event_stream() g_sub = update_stream.create_subscription_to_pop(on_update, name=\u0026#34;My Subscription Name\u0026#34;) winä¸‹dllä¾èµ–å®šä½å¤±è´¥ ä½†æ˜¯åœ¨windowsä¸Šå‡ºç°äº†qt c++ æ’ä»¶åŠ è½½å¤±è´¥çš„é—®é¢˜, å³ä½¿å·²ç»è®¾ç½®äº†\n1 2 3 4 5 6 import sys #è®¾ç½®pyside pipå®‰è£…çš„ä½ç½®,è¿™æ ·åŠ è½½ c++ æ’ä»¶æ—¶,ä¼šè‡ªåŠ¨åˆ°è¿™é‡Œæ‰¾åˆ°ç›¸å…³çš„dll/soå’Œpyd extra_libs = [r\u0026#34;c:\\path\\to\\pip_install\\PySide6\u0026#34;] os.environ[\u0026#34;PATH\u0026#34;] = \u0026#34;;\u0026#34;.join(extra_libs) + \u0026#34;;\u0026#34; + os.environ[\u0026#34;PATH\u0026#34;] #æˆ– #sys.path.insert(0, extra_libs[0]) è¿™ä¸ªé—®é¢˜çš„åŸå› æš‚æ—¶ä¸æ¸…æ¥š, (gcc,clangä¸Šæœ‰rpath,runpath, msvcä¸Šå¥½åƒæ²¡æœ‰ç±»ä¼¼çš„ä¸œè¥¿)\nä½†çœ‹åˆ°open usdçš„æ–‡æ¡£ä¸Šä¹Ÿè®°è½½äº†è¿™ä¸ªé—®é¢˜\nåœ¨windowsä¸Šæ”¹æˆç”¨ os.add_dll_directory è®¾ç½®dllç›®å½•å°±å¯ä»¥äº†\n1 2 3 4 5 6 7 8 9 10 11 dynamicPaths = [ r\u0026#34;c:\\path\\to\\pip_install\\PySide6\u0026#34;, ] for path in dynamicPaths: print(f\u0026#34;Adding {path} to DLL search path list\u0026#34;) if sys.platform == \u0026#34;win32\u0026#34;: os.add_dll_directory(path) elif sys.platform == \u0026#34;linux\u0026#34;: os.environ[\u0026#34;LD_LIBRARY_PATH\u0026#34;] = path + \u0026#34;:\u0026#34; + os.environ.get(\u0026#34;LD_LIBRARY_PATH\u0026#34;, \u0026#34;\u0026#34;) elif sys.platform == \u0026#34;darwin\u0026#34;: os.environ[\u0026#34;DYLD_LIBRARY_PATH\u0026#34;] = path + \u0026#34;:\u0026#34; + os.environ.get(\u0026#34;DYLD_LIBRARY_PATH\u0026#34;, \u0026#34;\u0026#34;) ä¼ é€’å‚æ•°åˆ°qt ä¸­ ç”±äºæˆ‘ä»¬çš„qt pluginæ˜¯åœ¨omniverse extenstionä¸­åˆ›å»ºçš„,æ‰€ä»¥ç”±kit appä¼ é€’åˆ°pythonä¸­, å†é€šè¿‡pythonä»£ç ä¼ ç»™qt app\n1 2 3 print(\u0026#34;sys.argv:\u0026#34;, sys.argv) # åœ¨pythonä¸­åˆ›å»ºapp å’Œqml engineçš„å®ä¾‹ app = QGuiApplication(sys.argv) #ä¼ é€’app args è¿™æ¶‰åŠåˆ°æ€ä¹ˆå¯åŠ¨kit è¿›ç¨‹\né€šå¸¸æˆ‘ä»¬å¯åŠ¨kit appéƒ½æ˜¯ç”¨kit executable å¯åŠ¨ä¸€ä¸ª.kitæ–‡ä»¶\n1 .\\kit.exe xxx.kit å¦‚æœè¦ä¼ é€’command parameter, ä½¿ç”¨\u0026ndash; args å³å¯\n1 .\\kit.exe xxx.kit -- qml_live è§£å†³æ‰ä¸Šé¢è¿™äº›é—®é¢˜å, å°±å¯ä»¥ä½¿ç”¨qt c++ å¼€å‘gui, ç„¶ååœ¨omniverseä¸­åŠ è½½äº†,\nå¦‚æœä½ æœ‰ä¸€ä¸ªæˆç†Ÿçš„qt c++å†™çš„å·¥å…·,è¿™ä¹Ÿè®¸æ˜¯ä¸€ä¸ªå¥½æ–¹å¼, ä½†90%çš„æƒ…å†µ,å¯èƒ½omni.uiæ‰æ˜¯åº”è¯¥é€‰æ‹©çš„\nåç»§æˆ‘å°†åŸºäºomni.kit.phsyX çš„uiåšä¸€äº›å®šåˆ¶å¼€å‘,åº”è¯¥è¿˜ä¼šå‘è¡¨ä¸€äº›ç›¸é€çš„åšå®¢ ^..^\n", 
        "url": "\/post\/%E5%9C%A8nvidia_omniverse_app%E4%B8%AD%E5%8A%A0%E8%BD%BDc-_qt_qml%E6%8F%92%E4%BB%B6\/"
    },
    
    "\/tags\/c\u002b\u002b\/": {
        "title": "C\u002b\u002b",
        "tags": [],
        "content": "", 
        "url": "\/tags\/c\u002b\u002b\/"
    },
    
    "\/tags\/react-native\/": {
        "title": "react native",
        "tags": [],
        "content": "", 
        "url": "\/tags\/react-native\/"
    },
    
    "\/post\/react_native%E7%AC%94%E8%AE%B0\/": {
        "title": "react_nativeç¬”è®°",
        "tags": ["react native","c\u002b\u002b","turbo module",],
        "content": "qt qml ä¸­ å¯ä»¥æŠŠ c++å¯¹è±¡æ³¨å…¥ qml engine\nreac native è‡ªä»æ”¶ç¼– nitro ä¹‹å,ä¹Ÿè·å¾—äº†è¿™ç§èƒ½åŠ›\næˆ‘å·²ç»ç”¨qt qml åœ¨windows/linux/mac / embed linuxä¸­å†™gui, ä½†å¯¹äºandroidå’Œios ä¸€ç›´æ²¡æœ‰å®è·µ\n1æ˜¯ç¡®å®æ²¡æœ‰ä»€ä¹ˆé¡¹ç›®, 2æ˜¯lgpl å’Œå•†åŸè§„åˆ™æˆ–å¤šæˆ–å°‘å­˜åœ¨äº‰è®®\næ‰€ä»¥åœ¨çŸ¥é“react nativeä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´å,æˆ‘æ‰“ç®—å¼€å§‹ç©ä¸€ç©, å°è¯•æŠŠæˆ‘è‡ªå·±å†™çš„c++ é™æ€åå°„åº“åº”ç”¨äºå…¶ä¸­\näºæ˜¯æœ‰æ­¤ç¬”è®°,å°†å’Œå¾€å¸¸ä¸€æ ·ä¸å®šæ—¶æ•´ç†æ›´æ–°\n1 é…ç½®sdkç‰ˆæœ¬,åŠå…¼å®¹çš„æœ€ä½ç‰ˆæœ¬ 1.1 IOS 1.1.1 SDKç‰ˆæœ¬é€‰æ‹© sdkå‘ä¸‹å…¼å®¹æ˜¯æœ‰é™åˆ¶çš„,æ‰€ä»¥æƒ³å¼€å‘å…¼å®¹å¾ˆæ—§çš„iosç³»ç»Ÿçš„ç¨‹åº,åªèƒ½ä¸‹è½½æ—§çš„xcodeç‰ˆæœ¬å¼€å‘,ä¸”å¼€å‘åä¸Šä¸äº†æ¶,å¹¶ä¸”iosç³»ç»Ÿä¸ä¸€å®šèƒ½è¿è¡Œæ—§ç‰ˆæœ¬çš„xcode, æƒ³å¼€å‘ä¸ä¸Šæ¶çš„ios app,æœ‰å¯èƒ½éœ€è¦è£…è™šæ‹Ÿæœº,å®‰è£…æ—§çš„ç³»ç»Ÿ,å†å®‰è£…æ—§çš„xcode,å†å¼€å‘\nxcode ç‰ˆæœ¬æ”¯æŒçš„sdkç‰ˆæœ¬æ”¯æŒå‚è€ƒè¿™é‡Œ\nå› ä¸ºapple storeè¦æ±‚sdkéœ€è¦ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬,æ‰€ä»¥æƒ³ä¸Šæ¶çš„è¯, æœ€å¥½åœ¨apple storeå®‰è£…æœ€æ–°çš„xcode,æ›´æ–°æœ€æ–°çš„sdk\napple store å®‰è£…å®Œçš„xcode ç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶å¯èƒ½æœ‰å¼¹å‡ºä¸€ä¸ªé€‰æ‹©å®‰è£…sdkçš„ç‰ˆæœ¬,å¦‚æœæœ‰çš„è¯æŠŠios sdk æ‰“é’©å®‰è£…\nä¸‹è½½çš„xcode.xipè§£å‹çš„å¥½åƒæ²¡æœ‰è¿™ä¸ªå¼¹çª— ,æœ‰çš„è¯ä¹Ÿæ˜¯æŠŠios sdkæ‰“é’©å®‰è£…(è¿™è¯•äº†å‡ æ¬¡éƒ½æ²¡æœ‰)\né€‰æ‹©äº†xcodeå°±ç­‰äºé€‰æ‹©äº†sdk ç‰ˆæœ¬äº†,æƒ³æ”¹åªèƒ½åˆ‡æ¢xcodeç‰ˆæœ¬\né™„ä¸Šä¸€äº›åœ¨å‘½ä»¤è¡Œä¸­åˆ‡æ¢ xcodeå’Œsdkç‰ˆæœ¬çš„æ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #é€‰æ‹©xcode xcode-select -p sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer xcodebuild -showsdks #æŸ¥çœ‹å¯ç”¨sdk xcodebuild -showsdks ls `xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/ #æŸ¥çœ‹å½“å‰sdk xcrun --show-sdk-path xcrun --sdk macosx --show-sdk-version #ä¸´æ—¶é…ç½®sdk export SDKROOT=`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk #ç¼–è¯‘æ—¶é…ç½®sdk cd build \u0026amp;\u0026amp; xcodebuild -sdk macosx13.3 #or #cmake cmake .. -DCMAKE_OSX_SYSROOT=`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk #GN gn gen out/Default --args=\u0026#39;mac_sdk_path=\u0026#34;`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk\u0026#34;\u0026#39; 1.1.2 å‘ä¸‹å…¼å®¹è‡³ä½•ç§ç‰ˆæœ¬ å‘ä¸‹å…¼å®¹è‡³ä½•ç§ç‰ˆæœ¬,åˆ™éœ€è¦å¼€å‘è€…æŒ‡å®š, ä¸”åªèƒ½åœ¨xcode æ”¯æŒçš„ç‰ˆæœ¬èŒƒå›´ä¸­é€‰ æ‹©å‚è€ƒè¿™é‡Œ\næœ‰å‡ ä¸ªä½ç½®éœ€è¦ä¿®æ”¹ ,ä»¥xcode 16ä¸ºä¾‹,å®ƒæ”¯æŒ ios 16.0 - 18.2çš„å¼€å‘, æˆ‘æƒ³å…¼å®¹åˆ°16.0\n\u0026hellip;/react_active_src/ios/Podfileä¸­çš„\n1 platform :ios, 16.0 #å®‰è£…å“ªç§sdkçš„ä¾èµ–åº“ å¦‚æœå·²ç»å®‰è£…è¿‡podsäº†,éœ€è¦åˆ é™¤ä¸€ä¸‹,é‡æ–°å®‰è£… åˆ é™¤Podfile.lock ,è¿˜æœ‰podsç›®å½•,é‡æ–°å®‰è£…ä¾èµ–\n1 2 3 rm -rf .../react_active_src/ios/pods rm .../react_active_src/ios/Podfile.lock cd .../react_active_src/ios/ \u0026amp;\u0026amp; pod install xcodeæ‰“å¼€å·¥ç¨‹è®¾ç½®\nå¦‚æœæ˜¯çœŸæœº,ç›´æ¥é€‰æ‹©,ä¸ç”¨å®‰è£…simulator, å¦‚æœæ˜¯simulator, æäº¤å®‰è£…æƒ³å…¼å®¹çš„æœ€ä½ç‰ˆæœ¬ , æœ€æ–°ç‰ˆæœ¬çš„simualtorä¹Ÿéœ€è¦å®‰è£…,å¦åˆ™é€‰æ‹©ä¸äº†å…¶ä»–ä½ç‰ˆæœ¬çš„simulator , å›¾ä¸Šå›¾æˆ‘é€‰ä¸­iPhone 14 pro,ä½†å®‰è£…äº†simualtor 16.0å’Œ 18.2æ‰å¯ä»¥é€‰æ‹©16.0\ngeneral é¡µè®¾ç½®minimum deployments\nbuild setting\næ˜¾ç¤ºä¸ºç°è‰²çš„ios 18.2æ˜¯ç›®å‰çš„xcodeæœ€æ–°çš„sdk, ä¸ç®¡é€‰ä¸­çš„minimum deploymentsæ˜¯ä»€ä¹ˆç‰ˆæœ¬, éƒ½æ˜¯ç”¨æœ€æ–°çš„sdkç¼–è¯‘çš„\n1.2 Andorid react native ç‰ˆæœ¬å½±å“ JDKç‰ˆæœ¬, å’Œ Gradle åŒ…ç®¡ç†å™¨çš„ç‰ˆæœ¬ , å®ƒä»¬åªæ˜¯å‚ä¸äº†å·¥ç¨‹æ„å»º,ä¸å½±å“app ä¸Šæ¶, æ ¹æ®å…·ä½“ä½¿ç”¨çš„react nativeç‰ˆæœ¬æŒ‰éœ€è¦é€‰æ‹©\n1.2.1 SDKç‰ˆæœ¬é€‰æ‹© æŒ‡å®šç‰ˆæœ¬éœ€è¦ä¿®æ”¹\n\u0026hellip;/react_active_src/android/build.gradle\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 buildscript { //é¢å¤–å±æ€§ extra ext { buildToolsVersion = \u0026#34;35.0.0\u0026#34; minSdkVersion = 24 compileSdkVersion = 35 targetSdkVersion = 35 ndkVersion = \u0026#34;27.1.12297006\u0026#34; kotlinVersion = \u0026#34;2.0.21\u0026#34; } //æº repositories { google() mavenCentral() } //ä¾èµ– dependencies { classpath(\u0026#34;com.android.tools.build:gradle\u0026#34;) classpath(\u0026#34;com.facebook.react:react-native-gradle-plugin\u0026#34;) classpath(\u0026#34;org.jetbrains.kotlin:kotlin-gradle-plugin\u0026#34;) } } apply plugin: \u0026#34;com.facebook.react.rootproject\u0026#34; ä¸åŒçš„ç›®å½•å±‚çº§å¯èƒ½ä¼šæœ‰å¤šä¸ªbuild.gradle, ä½†ç‰ˆæœ¬ç›¸å…³çš„è®¾ç½®éƒ½ä¼šå¼•ç”¨æ ¹ç›®å½•çš„build.gradleä¸­extä¸­æŒ‡å®šçš„ç‰ˆæœ¬\n1 2 3 4 5 6 7 8 9 AwesomeProject/android on î‚  main [!?] via ğŸ…¶ v8.13 via â˜• v17.0.15 took 17m22s â¯ grep -irn \u0026#34;rootproject\u0026#34; . ./app/build.gradle:76: ndkVersion rootProject.ext.ndkVersion ./app/build.gradle:77: buildToolsVersion rootProject.ext.buildToolsVersion ./app/build.gradle:78: compileSdk rootProject.ext.compileSdkVersion ./app/build.gradle:83: minSdkVersion rootProject.ext.minSdkVersion ./app/build.gradle:84: targetSdkVersion rootProject.ext.targetSdkVersion ./build.gradle:21:apply plugin: \u0026#34;com.facebook.react.rootproject\u0026#34; ./settings.gradle:4:rootProject.name = \u0026#39;AwesomeProject\u0026#39; å’Œiosä¸€æ ·, å¦‚æœæƒ³ä¸Šæ¶çš„è¯,google playä¹Ÿsdkç‰ˆæœ¬æœ‰è¦æ±‚\n1.2.1 å‘ä¸‹å…¼å®¹è‡³ä½•ç§ç‰ˆæœ¬ andorid ç‰ˆæœ¬, sdkç‰ˆæœ¬, ndkç‰ˆæœ¬, æ­é…å¤§è‡´å¯ä»¥å‚ç…§ä¸‹è¡¨\ncompileSdkVersion Android API æ¨è NDK ç‰ˆæœ¬ æ”¯æŒçš„ NDK åŠŸèƒ½ æ”¯æŒçš„æ¶æ„ 34 Android 14 r26 ~ r27b 64ä½æ¶æ„ï¼Œarm64-v8aï¼Œé€æ¸æ”¾å¼ƒæ—§æ¶æ„ arm64-v8a, armeabi-v7a, x86_64 33 Android 13 r23b ~ r26b ä¼˜åŒ–çš„æ€§èƒ½ã€ç¨³å®šæ€§æ”¯æŒï¼Œæ”¯æŒ Android 12 åŠä»¥ä¸Š arm64-v8a, armeabi-v7a, x86_64 32 Android 12L r22b ~ r25c æ”¯æŒ Android 12ï¼ŒAPI 30ï¼Œé€æ¸åŠ å…¥æ–°çš„åŠŸèƒ½ arm64-v8a, armeabi-v7a, x86_64 31 Android 12 r21e ~ r23b å¯ç”¨ 64 ä½æ¶æ„æ”¯æŒï¼ŒNDK ç‰¹æ€§åŸºæœ¬ç¨³å®š arm64-v8a, armeabi-v7a 30 Android 11 r20b ~ r22b å®Œå…¨æ”¯æŒ arm64-v8a, armeabi-v7aï¼Œå‘ä¸‹å…¼å®¹ arm64-v8a, armeabi-v7a 29 Android 10 r19c ~ r21b é»˜è®¤æ”¯æŒ armeabi-v7a, arm64-v8aï¼Œ 32 ä½/64 ä½ armeabi-v7a, arm64-v8a 28 Android 9 r18b ~ r20b å¯åŠ¨ 64 ä½æ¶æ„æ”¯æŒï¼Œç›®æ ‡ä¸º armeabi-v7a armeabi-v7a 27 ä»¥ä¸‹ Android 8.x r17b ~ r19b ä¸æ”¯æŒæ–°çš„æ¶æ„ï¼Œåªæ”¯æŒ armeabi-v7a armeabi-v7a æˆªæ­¢2025å¹´5æœˆ3æ—¥ , react native 0.79.2 çš„æ¨¡æ¿ç‰ˆæœ¬é…ç½®ä¸º\n1 2 3 4 5 6 buildToolsVersion = \u0026#34;35.0.0\u0026#34; minSdkVersion = 24 compileSdkVersion = 35 targetSdkVersion = 35 ndkVersion = \u0026#34;27.1.12297006\u0026#34; kotlinVersion = \u0026#34;2.0.21\u0026#34; å¦‚æœä¸è€ƒè™‘ndkçš„è¯,è¿™ä¸ªç‰ˆæœ¬å·²ç»è¦†ç›–å¸‚åœºä¸Š95%çš„æ‰‹æœºäº†, å»ºè®®å¼€å‘æ–°çš„appå°±ç”¨è¿™ä¸ªé…ç½®\nè€Œä½¿ç”¨24çš„ndkç‰ˆæœ¬,åˆ™è¯´æ˜ ä½¿ç”¨android 12ä»¥ä¸‹çš„ç³»ç»Ÿapiæœ‰ä¸å…¼å®¹çš„é£é™©,å°½é‡é¿å…ä¸ç¨³å®šçš„api çš„ä½¿ç”¨å³å¯\nç”±äºæˆ‘ä¸»è¦ä½¿ç”¨c++ å’Œ react nativeè¿›è¡Œå¼€å‘,æ‰€ä»¥kotlinç‰ˆæœ¬æˆ‘æ¯”è¾ƒä¸åœ¨æ„,æš‚æ—¶ä¸æ¢ç´¢\n2. åœ¨appä¸­æ·»åŠ å¤šä¸ªTurbo C++ æ¨¡å— ä¸ªå®‰è£…ç¯å¢ƒå‚è€ƒ ç¯å¢ƒè®¾ç½® å®˜æ–¹æ–‡æ¡£æ¨èçš„ä½œæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªframework å¦‚ expo è¿›è¡Œå¼€å‘\nä½†å¬å¾ˆå¤šåæ§½è¿™ä¸ªæ¡†æ¶æ€§èƒ½é—®é¢˜çš„å£°éŸ³,æˆ‘è¿˜æ˜¯æ›´å€¾å‘äºä¸ä½¿ç”¨framework\näºæ˜¯æˆ‘æ‰¾åˆ°è¿™ä¸ªæ–‡æ¡£getting-started-without-a-framework\nåœ¨è¿™ä¸ªåŸºç¡€ä¸Š, å‚è€ƒnativeå¼€å‘æ–‡æ¡£æ¢ç´¢åŠ å…¥c++ è¿›è¡Œç¼–è¯‘\n2.1 ç”¨Tsç”Ÿæˆè·¨å¹³å°èƒ¶æ°´ä»£ç  è¿›å…¥å·¥ç¨‹æ ¹ç›®å½•,åˆ›å»ºç›®å½• specs ç”¨äºå­˜æ”¾tsæ¥å£ ,ç„¶ååˆ›å»ºä¸¤ä¸ªæ¥å£\nNativeViewModelA.ts NativeViewModelB.ts åç§°å¿…éœ€ä»¥Nativeå¼€å¤´,å¦åˆ™ä¸èƒ½æ­£å¸¸ç”Ÿæˆc++èƒ¶æ°´ä»£ç \nä¸¤ä¸ªæ–‡ä»¶å†…å®¹å¦‚ä¸‹, æœ€åä¸€è¡Œçš„æ³¨å†Œåç§°å»ºè®®å’Œæ–‡ä»¶åä¿æŒä¸€è‡´, SpecæŒ‰éœ€æ”¹,åé¢ä¼šæˆä¸ºä¸€äº›èƒ¶æ°´ç±»çš„åç§°åè¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 //NativeViewModelA.ts import {TurboModule, TurboModuleRegistry} from \u0026#39;react-native\u0026#39;; export interface Spec extends TurboModule { readonly getStr: (input: string) =\u0026gt; string; } export default TurboModuleRegistry.getEnforcing\u0026lt;Spec\u0026gt;(\u0026#39;NativeViewModelA\u0026#39;); //NativeViewModelB.ts import {TurboModule, TurboModuleRegistry} from \u0026#39;react-native\u0026#39;; export interface Spec extends TurboModule { readonly getStr: (input: string) =\u0026gt; string; } export default TurboModuleRegistry.getEnforcing\u0026lt;Spec\u0026gt;(\u0026#39;NativeViewModelB\u0026#39;); ç„¶åä¿®æ”¹package.json,æ·»åŠ codegen é…ç½®\n1 2 3 4 5 6 7 8 9 10 // .... \u0026#34;codegenConfig\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ViewmodelsSpecs\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;modules\u0026#34;, \u0026#34;jsSrcsDir\u0026#34;: \u0026#34;specs\u0026#34;, \u0026#34;android\u0026#34;: { \u0026#34;javaPackageName\u0026#34;: \u0026#34;com.viewmodels.specs\u0026#34; } }, //.... 2.1.1 Android æ¥ç€æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ ç”Ÿèƒ¶æ°´ä»£ç \n1 yarn android å¦‚æœæ˜¯android ç”Ÿæˆçš„ä»£ç åœ¨ \u0026hellip;/root/android/app/build\n1 2 3 4 5 generated/ | source/ | | codegen/ | | | java/ | | | jni/ å³ç”Ÿæˆäº†javaæ¥å£,ä¹Ÿç”Ÿæˆäº†jni ä¸­çš„c++æ¥å£\næŸ¥äº†ä¸€ä¸‹,å¥½åƒç›®å‰æ²¡åŠæ³•æŠŠJavaç”Ÿæˆçš„æ­¥éª¤çœç•¥æ‰,ä¸è¿‡ç”Ÿæˆäº†ä¸å»ç”¨å®ƒä¹Ÿæ²¡æœ‰é—®é¢˜\nä¸åªæœ‰æ¥å£å®šä¹‰,è¿˜æœ‰ä¸€äº›èƒ¶æ°´ä»£ç , c++ è¿˜æœ‰ä¸€ä¸ªcmakelists.txt,åé¢éœ€è¦é…ç½®åˆ°æ„å»ºç³»ç»Ÿå‚ä¸æ„å»º\n2.1.2 IOS å¦‚æœæ˜¯ios ç”Ÿæˆçš„ä»£ç åœ¨ ios/build\n1 2 generated/ | ios/ 2.2 ç†è§£ç”Ÿæˆçš„c++èƒ¶æ°´ 2.1 ä¸­ç”Ÿæˆçš„.cppå’Œ.hæ–‡ä»¶,ä¸æ˜¯æ‰€æœ‰éƒ½å’Œæˆ‘ä»¬æœ€å¼€å§‹å®šä¹‰çš„typescript çš„æ¥å£æœ‰ç›´æ¥çš„å…³ç³»,\næˆ‘ä»¬å…ˆåªäº†è§£ä¸‹é¢è¿™ä¸‰ä¸ªç±»å°±è¶³å¤Ÿ\nNativeViewModelACxxSpecJSI (åŠ ç²—éƒ¨åˆ†æ˜¯Tsé‡Œæœ€åä¸€è¡Œæ³¨å†Œçš„åç§°,ä¹Ÿæ˜¯tsæ–‡ä»¶å)\nNativeViewModelACxxSpec (åŒä¸Š)\nDelegate (ç§æœ‰å‹å…ƒç±»),è¿™ä¸ªç±»ç»§æ‰¿äº†ç”Ÿæˆçš„_CxxSpecJSIåè¾çš„ç±» å®ƒä»¬éƒ½åœ¨ViewmodelsSpecsJsI.hå¤´æ–‡ä»¶é‡Œ (åŠ ç²—éƒ¨åˆ†ä¸ºpackage.json,codegenconfigèŠ‚ç‚¹çš„çš„name)\nåç»§åœ¨å†™c++å®ç°çš„çš„æ—¶å€™,åªéœ€è¦include è¿™ä¸ªå¤´æ–‡ä»¶,ç»§æ‰¿_CxxSpecç±»,å®ç°æ¥å£å³å¯\n_CxxSpecJSI å’Œ _CxxSpec ä¸ºåè¾çš„ç±»,éƒ½ç»§å‚è‡ª TurboModule\nDelegateç»§æ‰¿äº†_CxxSpecJSI,ä¹Ÿé—´æ¥ç»§æ‰¿è‡ªTurboModuleç±»\n2.2.1 _CxxSpecJSIç±» _CxxSpecJSI åªæ˜¯å®šä¹‰ Tsä¸­çš„å®šä¹‰çš„moduleçš„æ–¹æ³•(æ²¡æœ‰å®ç°)\nä»¥åŠä¸€ä¸ªæ„é€ å‡½æ•°ç”¨äºä¼ é€’TurboModuleç±»æ„é€ å‡½æ•°å‚æ•°jsInvoker ,ä»¥ä¾¿ä»¥åœ¨c++ä¸­æ‰§è¡Œjs\n2.2.2 _CxxSpecç±» _CxxSpec è¿™ä¸ªç±»é‡è½½äº† TurboModuleçš„createå’ŒgetPropertiyNamesä¸¤ä¸ªæ–¹æ³•\nåº”è¯¥åœ¨æ˜¯jsxç”¨ç›´æ¥è®¿é—®å±æ€§ç”¨çš„,æš‚æ—¶æ²¡çœ‹åˆ°å…·ä½“å®ç°,åº”è¯¥æ˜¯ç”¨æŠ¥turboModuleçš„é»˜è®¤å®ç°äº†\nä»¥åŠä¸€ä¸ªæ ¹æ®é…ç½®çš„åç§°ç”Ÿæˆçš„é™æ€çš„å­—ç¬¦å­—æ®µ\n2.2.3 Delegate ç±» CxxSpec çš„ç§æœ‰å‹å…ƒç±»Delegate,ç»§æ‰¿äº†_CxxSpecJSI , å®ç°äº†Tsä¸­å®šä¹‰çš„é‚£äº›æ–¹æ³•çš„åŒ…è£…, ä¸»è¦åšå‚æ•°æ ¡éªŒ, ä»¥åŠè¿”å›Jsç»‘å®šç»™jsx\n2.3 å®ç°ç¼–ç , æ·»åŠ æ„å»ºä»»åŠ¡ åˆ›å»ºsharedç›®å½•, åˆ›å»º\nNativeViewModelA.h NativeViewModelA.cpp NativeViewModelB.h NativeViewModelB.cpp å¤´æ–‡ä»¶ include ViewmodelsSpecsJsI.h å\nNativeViewModelA ç»§æ‰¿ NativeViewModelACxxSpecç±»\nNativeViewModelB ç»§æ‰¿ NativeViewModelBCxxSpecç±»\n2.2ä¸­å·²ç»è¯´è¿‡äº†, CxxSpecç±»ä¸­å¯¹åº” Tsä¸­å®šä¹‰ä¸­çš„æ–¹æ³• ä¼šåœ¨å…¶ç§æœ‰å‹å…ƒç±»Delegateä¸­è¢«åŒ…è£…,è¿›è¡Œç®€å•çš„å‚æ•°ä¸ªæ•°æ ¡éªŒ,ä»¥åŠè¿”å›åˆ° Jsx ä¸­\næ‰€ä»¥åœ¨å®ç°æ—¶ä¸éœ€è¦è€ƒè™‘è¿™äº›ä¸œè¥¿\n2.3.1 å®ç°ç¼–ç  è¿™ä¸ªæ­¥éª¤ ios å’Œandroidéƒ½éœ€è¦,è¿™äº›ä»£ç éƒ½åˆ›å»ºåœ¨sharedç›®å½•\n//log.h ç”¨äºåœ¨ioså’Œandoridä¸Šç”¨ä¸€è‡´çš„å®è®°å½•æ—¥å¿—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #ifndef HBBLOG #define HBBLOG #if __ANDROID__ #include \u0026lt;android/log.h\u0026gt; #define HBBLOG_TAG \u0026#34;TurboModule\u0026#34; #define LOG_INFO(...) __android_log_print(ANDROID_LOG_INFO, HBBLOG_TAG, __VA_ARGS__) #define LOG_ERROR(...) __android_log_print(ANDROID_LOG_ERROR, HBBLOG_TAG, __VA_ARGS__) #elif __APPLE__ #include \u0026lt;TargetConditionals.h\u0026gt; #if TARGET_OS_IPHONE #ifdef __OBJC__ // åªæœ‰åœ¨ Objective-C/Objective-C++ ç¼–è¯‘å™¨ä¸­æ‰å…è®¸ç”¨ NSLog #import \u0026lt;Foundation/Foundation.h\u0026gt; #define LOG_INFO(...) NSLog(__VA_ARGS__) #define LOG_ERROR(...) NSLog(__VA_ARGS__) #else // çº¯ C++ æ¨¡å¼æ—¶ä¸å…è®¸ NSString/@ #define LOG_INFO(...) printf(__VA_ARGS__) #define LOG_ERROR(...) fprintf(stderr, __VA_ARGS__) #endif #else #define LOG_INFO(...) printf(__VA_ARGS__) #define LOG_ERROR(...) fprintf(stderr, __VA_ARGS__) #endif #else #define LOG_INFO(...) printf(__VA_ARGS__) #define LOG_ERROR(...) fprintf(stderr, __VA_ARGS__) #endif #endif // HBBLOG // example //LOG_INFO(\u0026#34;Init success: %d\u0026#34;, 42); //LOG_ERROR(\u0026#34;Error code: %s\u0026#34;, errMessage.c_str()); //LOG_INFO(\u0026#34;Initializing YourModule\u0026#34;); //NativeViewModelA.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #include \u0026#34;ViewmodelsSpecsJSI.h\u0026#34; #include \u0026lt;memory\u0026gt; #include \u0026lt;string\u0026gt; namespace facebook::react { class JSI_EXPORT NativeViewModelA :public NativeViewModelACxxSpec\u0026lt;NativeViewModelA\u0026gt; { public : NativeViewModelA(std::shared_ptr\u0026lt;CallInvoker\u0026gt; jsInvoker); jsi::String getStr(jsi::Runtime \u0026amp;rt, jsi::String input); }; } // namespace facebook::react //NativeViewModelA.cpp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026#34;NativeViewModelA.h\u0026#34; #include \u0026#34;log.h\u0026#34; namespace facebook::react { NativeViewModelA::NativeViewModelA(std::shared_ptr\u0026lt;CallInvoker\u0026gt; jsInvoker) : NativeViewModelACxxSpec(std::move(jsInvoker)) {} jsi::String NativeViewModelA::getStr(jsi::Runtime \u0026amp;rt, jsi::String input) { LOG_ERROR(\u0026#34;get string with native view model A\u0026#34;); return input; } } // namespace facebook::react //NativeViewModelB.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #include \u0026#34;ViewmodelsSpecsJSI.h\u0026#34; #include \u0026lt;memory\u0026gt; #include \u0026lt;string\u0026gt; namespace facebook::react { class JSI_EXPORT NativeViewModelB :public NativeViewModelBCxxSpec\u0026lt;NativeViewModelB\u0026gt; { public : NativeViewModelB(std::shared_ptr\u0026lt;CallInvoker\u0026gt; jsInvoker); jsi::String getStr(jsi::Runtime \u0026amp;rt, jsi::String input); }; } // namespace facebook::react //NativeViewModelB.cpp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026#34;NativeViewModelB.h\u0026#34; #include \u0026#34;log.h\u0026#34; namespace facebook::react { NativeViewModelB::NativeViewModelB(std::shared_ptr\u0026lt;CallInvoker\u0026gt; jsInvoker) : NativeViewModelBCxxSpec(std::move(jsInvoker)) {} jsi::String NativeViewModelB::getStr(jsi::Runtime \u0026amp;rt, jsi::String input) { LOG_ERROR(\u0026#34;get string with native view model B\u0026#34;); return input; } } // namespace facebook::react 2.3.2 Android 2.3.2.1 æ·»åŠ åˆ°æ„å»ºç³»ç»Ÿ androidä½¿ç”¨gradle æ·»åŠ é¢å¤–çš„cmake æ­¥éª¤æ¥ç¼–è¯‘c++ä»£ç \nåœ¨app æ ¹ç›®æ‰§è¡Œä¸‹é¢å‘½ä»¤,åˆ›å»ºä¸€ä¸ªandroid jni ç›®å½•\n1 android/app/src/main/jni åˆ›å»ºapp_root/android/app/src/main/jni/CMakeLists.txt\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 cmake_minimum_required(VERSION 3.13) # Define the library name here. project(appmodules) # This file includes all the necessary to let you build your React Native application include(${REACT_ANDROID_DIR}/cmake-utils/ReactNative-application.cmake) # Define where the additional source code lives. We need to crawl back the jni, main, src, app, android folders target_sources(${CMAKE_PROJECT_NAME} PRIVATE ../../../../../shared/NativeViewModelA.cpp ../../../../../shared/NativeViewModelB.cpp ) # Define where CMake can find the additional header files. We need to crawl back the jni, main, src, app, android folders target_include_directories(${CMAKE_PROJECT_NAME} PUBLIC ../../../../../shared) target_link_libraries(${CMAKE_PROJECT_NAME} -llog) æ·»åŠ åˆ° app_root/android/app/build.gradle çš„androidç»“ç‚¹ä¸‹\n1 2 3 4 5 6 7 8 9 ... android{ ... externalNativeBuild { cmake { path \u0026#34;src/main/jni/CMakeLists.txt\u0026#34; } } } 2.3.2.1 åˆ›å»ºprovider ä¸‹è½½onLoad.cpp ,ä»¥å®ƒä¸ºæ¨¡æ¿ä¿®æ”¹Jsxè¯·æ±‚c++å¯¹è±¡æ—¶çš„åˆ›å»ºå®ä¾‹é€»è¾‘,å¯ä»¥åœ¨è¿™é‡Œç®¡ç†c++å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ\n1 cd android/app/src/main/jni \u0026amp;\u0026amp; curl -O https://raw.githubusercontent.com/facebook/react-native/v0.76.0/packages/react-native/ReactAndroid/cmake-utils/default-app-setup/OnLoad.cpp ä¿®æ”¹onLoad.cpp\ninclude NativeViewModelA.h å’Œ NativeViewModelB.h ä¿®æ”¹cxxModuleProvideræ–¹æ³•,ç®¡ç†jsxè¯·æ±‚çš„c++å®ä¾‹çš„åˆ›å»ºé€»è¾‘ #onLoad.cpp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ... #include \u0026lt;NativeViewModelA.h\u0026gt; #include \u0026lt;NativeViewModelB.h\u0026gt; ... std::shared_ptr\u0026lt;TurboModule\u0026gt; cxxModuleProvider( const std::string\u0026amp; name, const std::shared_ptr\u0026lt;CallInvoker\u0026gt;\u0026amp; jsInvoker) { if (name == NativeViewModelA::kModuleName) { return std::make_shared\u0026lt;NativeViewModelA\u0026gt;(jsInvoker); } else if (name == NativeViewModelB::kModuleName) { return std::make_shared\u0026lt;NativeViewModelB\u0026gt;(jsInvoker); } // And we fallback to the CXX module providers autolinked return autolinking_cxxModuleProvider(name, jsInvoker); } ... ç¼–è¯‘è¿è¡Œ\nä½¿ç”¨andorid sutido è¿è¡Œ,å¯ä»¥åœ¨logcaté‡Œçœ‹åˆ°è°ƒç”¨æ—¶æ‰“å°çš„æ—¥å¿—\n2.3.3 ISO 2.3.3.1 æ·»åŠ åˆ°æ„å»ºç³»ç»Ÿ iosä½¿ç”¨ xcodeproj ç¼–è¯‘c++ä»£ç \næ·»åŠ Providerç±»,ç”¨æ¥åŠ è½½æ¨¡å—\n2.3.3.3 åˆ›å»ºprovider æ¯ä¸ªnpmåº“åº”è¯¥æœ‰ä¸€ä¸ªproviderç±»,å½“jsxè¯·æ±‚moduleæ—¶,ä¸ºjsxåˆ›å»ºå®ä¾‹\nåœ¨package.jsonä¸­çš„codegenç»“ç‚¹å†åŠ ä¸€ä¸ªioså­èŠ‚ç‚¹\n1 2 3 4 5 6 \u0026#34;ios\u0026#34;: { \u0026#34;modulesProvider\u0026#34;: { \u0026#34;NativeViewModelA\u0026#34;: \u0026#34;ViewmodelsProvider\u0026#34;, \u0026#34;NativeViewModelB\u0026#34;: \u0026#34;ViewmodelsProvider\u0026#34; } } å¯ä»¥è‡ªå·±æ§ä»¶å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ\né€‰ä¸­é¡¹ç›®,æŒ‰ command + N\nåç§°å’Œpackage.json ä¸­çš„ codegenconfigèŠ‚ç‚¹çš„çš„name å­—æ®µä¸€æ ·,å†åŠ provideråè¾å°±è¡Œ, ç¨åè¿˜éœ€è¦åœ¨codegenèŠ‚ç‚¹ä¸­æ·»åŠ ios provider\n//package.json\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026#34;codegenConfig\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ViewmodelsSpecs\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;modules\u0026#34;, \u0026#34;jsSrcsDir\u0026#34;: \u0026#34;specs\u0026#34;, \u0026#34;android\u0026#34;: { \u0026#34;javaPackageName\u0026#34;: \u0026#34;com.viewmodels.specs\u0026#34; }, \u0026#34;ios\u0026#34;: { \u0026#34;modulesProvider\u0026#34;: { \u0026#34;NativeViewModelA\u0026#34;: \u0026#34;ViewmodelsProvider\u0026#34;, \u0026#34;NativeViewModelB\u0026#34;: \u0026#34;ViewmodelsProvider\u0026#34; } } }, 2.4 æµ‹è¯• ä¿®æ”¹app.tsx\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 import React from \u0026#39;react\u0026#39;; import { Button, SafeAreaView, StyleSheet, Text, TextInput, View, } from \u0026#39;react-native\u0026#39;; import ViewModelA from \u0026#39;./specs/NativeViewModelA\u0026#39;; import ViewModelB from \u0026#39;./specs/NativeViewModelB\u0026#39;; function App(): React.JSX.Element { //const [value, setValue] = React.useState(\u0026#39;\u0026#39;); //const [reversedValue, setReversedValue] = React.useState(\u0026#39;\u0026#39;); //const onPress = () =\u0026gt; { // const revString = SampleTurboModule.reverseString(value); // setReversedValue(revString); //}; const [value1, setValue1] = React.useState(\u0026#39;\u0026#39;); const [str1Value, setStr1Value] = React.useState(\u0026#39;\u0026#39;); const onPress1 = () =\u0026gt; { const str1 = ViewModelA.getStr(value1); setStr1Value(str1); }; const [value2, setValue2] = React.useState(\u0026#39;\u0026#39;); const [str2Value, setStr2Value] = React.useState(\u0026#39;\u0026#39;); const onPress2 = () =\u0026gt; { const str2 = ViewModelB.getStr(value2); setStr2Value(str2); }; return ( \u0026lt;SafeAreaView style={styles.container}\u0026gt; \u0026lt;View\u0026gt; \u0026lt;Text style={styles.title}\u0026gt; Welcome to C++ Turbo Native Module Example \u0026lt;/Text\u0026gt; \u0026lt;Text\u0026gt;Write down here he text you want to revert\u0026lt;/Text\u0026gt; \u0026lt;TextInput style={styles.textInput} placeholder=\u0026#34;Write your text here\u0026#34; onChangeText={setValue1} value={value1} /\u0026gt; \u0026lt;Button title=\u0026#34;setstr1\u0026#34; onPress={onPress1} /\u0026gt; \u0026lt;Text\u0026gt;Reversed text: {str1Value}\u0026lt;/Text\u0026gt; \u0026lt;TextInput style={styles.textInput} placeholder=\u0026#34;Write your text here\u0026#34; onChangeText={setValue2} value={value2} /\u0026gt; \u0026lt;Button title=\u0026#34;setstr1\u0026#34; onPress={onPress2} /\u0026gt; \u0026lt;Text\u0026gt;Reversed text: {str2Value}\u0026lt;/Text\u0026gt; \u0026lt;/View\u0026gt; \u0026lt;/SafeAreaView\u0026gt; ); } const styles = StyleSheet.create({ container: { flex: 1, justifyContent: \u0026#39;center\u0026#39;, alignItems: \u0026#39;center\u0026#39;, }, title: { fontSize: 18, marginBottom: 20, }, textInput: { borderColor: \u0026#39;black\u0026#39;, borderWidth: 1, borderRadius: 5, padding: 10, marginTop: 10, }, }); export default App; ç”¨android stuido æˆ–xcode è°ƒè¯•æ—¶,å¯ä»¥çœ‹åˆ°æ‰§è¡Œc++ä»£ç æ—¶çš„æ‰“å°\n", 
        "url": "\/post\/react_native%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/tags\/turbo-module\/": {
        "title": "turbo module",
        "tags": [],
        "content": "", 
        "url": "\/tags\/turbo-module\/"
    },
    
    "\/tags\/udp-broadcast\/": {
        "title": "udp broadcast",
        "tags": [],
        "content": "", 
        "url": "\/tags\/udp-broadcast\/"
    },
    
    "\/tags\/usbipd\/": {
        "title": "usbipd",
        "tags": [],
        "content": "", 
        "url": "\/tags\/usbipd\/"
    },
    
    "\/tags\/wsl\/": {
        "title": "wsl",
        "tags": [],
        "content": "", 
        "url": "\/tags\/wsl\/"
    },
    
    "\/post\/wsl%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8udp%E5%B9%BF%E6%92%AD%E5%92%8Cusb\/": {
        "title": "wslåŒæ—¶ä½¿ç”¨udpå¹¿æ’­å’Œusb",
        "tags": ["wsl","udp broadcast","usbipd",],
        "content": "0.èƒŒæ™¯ â€‹ é‡åˆ°ä¸€ä¸ªé—®é¢˜, ä¹‹å‰å†™äº†ä¸€ä¸ªcv ai æ¨¡å‹è¾…åŠ©è®­ç»ƒçš„å·¥å…·ç»™å®¢æˆ·ä½¿ç”¨,ç”¨äºé‡‡é›†æˆ‘å¸AIç›¸æœºçš„å›¾ç‰‡,è®­ç»ƒæ¨¡å‹åå†ä¸Šä¼ å›AIç›¸æœº\nè¿™ä¸ªå·¥å…·ä¸­ä½¿ç”¨äº†å¾ˆå¤šbashç¯å¢ƒä¸‹çš„å·¥å…·, æ¯”å¦‚async scp,èŠ‚çº¦äº†å¾ˆå¤šé‡å¤é€ è½®å­çš„æ—¶é—´,ä½†ä¹Ÿæ³¨å®šäº†å‡ ä¹ç¦»ä¸å¼€bashç¯å¢ƒäº†\nåœ¨è¦windowsä¸Šè¿è¡Œè¿™ä¸ªå·¥å…·,é¢ä¸´è¿™å‡ ç§æ–¹æ¡ˆçš„é€‰æ‹©\nä½¿ç”¨wsl,dockerä¹‹ç±»çš„,è¿è¡Œäºå…¶ä¸­ (å¿«ä¹çš„æ‘¸é±¼æ—¶å…‰) åœ¨windowsä¸Šå®‰è£…bashç¯å¢ƒ (å°é‡ä¿®æ”¹) æŠ½è±¡bashå·¥å…·è°ƒç”¨çš„æ–¹æ³•é€‚é… (å·¥ä½œé‡å·¨å¤§) æ¯«æ— ç–‘é—®,å‡ºäºå¯¹å…¬å¸çš„è´Ÿè´£,æˆ‘é€‰æ‹©äº†æˆæœ¬æœ€ä½çš„æ–¹æ¡ˆ1\nå·¥ä¸šè½¯ä»¶ç»å¸¸åœ¨åœ¨é…ç½®è®¾å¤‡çš„Ipä¹‹å‰ç”¨udpå¹¿æ’­æ¥å‘ç°ç½‘ç»œè®¾å¤‡, å› ä¸ºudp broadcastè¿è¡Œåœ¨ ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚, ipåœ¨ç¬¬ä¸‰å±‚\næˆ‘å†™çš„è¿™ä¸ªå·¥å…·ä¹Ÿä½¿ç”¨äº†udpå¹¿æ’­æ¥å‘ç°è®¾å¤‡, åŒæ—¶åæœŸè¿˜åŠ å…¥äº†ç¡¬ä»¶åŠ å¯† usbå­é”,\næ‰€ä»¥å®ƒéœ€è¦è¿è¡Œåœ¨wslä¸­,åŒæ—¶ä½¿ç”¨udpå¹¿æ’­å’Œusbæ¥å£\n1. åŒæ—¶ä½¿ç”¨udpå¹¿æ’­å’Œusbæ¥å£çš„é—®é¢˜ 1.1 wsl usbæŒ‚è½½æ¨¡å¼ wslä¸­å·²ç»æœ‰æˆç†Ÿçš„usbæ–¹æ¡ˆ,å³ usbipd.\nå¯ä»¥åœ¨windows hostä¸ŠæŠŠæŸä¸€ä¸ªusbè®¾ç½®å…±äº«,åœ¨wslä¸­è®¾ç½®æŒ‚è½½\nå¦‚å®ƒçš„åå­—, usb ip d, åŸºäºusb/ipåè®®çš„daemonç¨‹åº,å®ƒçš„è¿è¡Œçš„åŸºç¡€æ˜¯:\néœ€è¦windows å’Œ wsl å¯ä»¥é€šè¿‡ip é€šè®¯\n1.2 wslçš„ä¸‰ç§ç½‘ç»œæ¨¡å¼ ç»å¸¸ä½¿ç”¨wslçš„æœ‹å‹éƒ½çŸ¥é“wslæœ‰ä¸‰ç§ç½‘ç»œå·¥ä½œæ¨¡å¼\nNAT (é»˜è®¤) Mirrored Bridged nat æ¨¡å¼æ—¶, wslè¿è¡Œåœ¨ä¸€ä¸ªhyper v çš„natå­ç½‘ç»œä¸­, è¿™ä¸ªç½‘ç»œé€‚é…å™¨åœ¨ncpa.cplå·¥å…·ä¸­çœ‹ä¸åˆ°,ä½†ä½¿ç”¨ipconfigå¯ä»¥çœ‹åˆ°,ç”¨hyper vç½‘ç»œç®¡ç†å·¥å…·ä¹Ÿå¯ä»¥çœ‹åˆ°,åº”è¯¥æ˜¯é˜²è€6è¯¯æ“ä½œ,å·æ„Ÿåè¶³. natå¤©ç„¶çš„ä¸èƒ½å¹¿æ’­udp, å°±åƒåœ¨å®¶é‡Œçš„å±€åŸŸç½‘ä¸èƒ½æ— é™åˆ¶çš„å‘ä¸Šå±‚ç½‘ç»œå¹¿æ’­ä¸€æ ·\nmirroredæ¢°æ—¶, wslé‡Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰windowsçš„ç½‘ç»œé€‚é…å™¨, è¿™ä¸ªæ¨¡å¼æ˜¯å¾®è½¯æ¨èçš„æ–¹å¼,ä½†è¿™ä¸ªæ¨¡å¼,å¯èƒ½æ˜¯ä¸ºäº†é˜²æ­¢udpé£æš´,è¿™ä¸ªæ¨¡å¼ä¸‹udpå¹¿æ’­æ˜¯æœ‰é™åˆ¶çš„,éšä¾¿ä¸€æœå°±èƒ½çœ‹åˆ°å¾ˆå¤šäººåœ¨githubä¸Šè®¨è®ºè°å®¶çš„udpåŒ…åˆä¸¢äº†\næœ€åbirgded,è¿™ä¸ªæ¨¡å¼æ˜¯å¾®è½¯æƒ³è¦é“²æ‰çš„åŠŸèƒ½,å› ä¸ºbridgeæ¨¡å¼ä¸‹, wsl çš„ç½‘ç»œåƒä¸€åº§å­¤å²›, å®Œå…¨å’Œwindows hostéš”ç¦»äº†, å®ƒç‹¬è‡ªå ç”¨äº†ä¸€ä¸ªwsl å¤–éƒ¨ç½‘ç»œ(å¯¹åº”ä¸€ä¸ªç‰©ç†ç½‘å¡),æ‰€ä»¥å®ƒä¹Ÿå¯ä»¥å¯¹å¤–å¹¿æ’­\n1.3 é—®é¢˜ ç»“åˆ 1.1 å’Œ 1.2 å¾—å‡º, å½“éœ€è¦udpå¹¿æ’­çš„åŠŸèƒ½æ—¶,éœ€è¦ä½¿ç”¨bridgedç½‘ç»œæ¨¡å¼, æ­¤æ—¶wsl å’Œhostæ˜¯ç½‘ç»œéš”ç¦»çš„, è€Œwindows host éœ€è¦é€šè¿‡usbipd-\u0026gt;ç½‘ç»œå…±äº«usb ç«¯å£ç»™wsl,æ‰€ä»¥é¢ä¸´äº†2é€‰1\n2 è§£ 2.1 ä¸¤è·¯æ€è·¯ ç»¼ä¸Šæ‰€è¿°,æƒ³è¦åŒæ—¶åœ¨wslä¸­ä½¿ç”¨ç½‘ç»œé€šè®¯ å’Œ usb\nè¦ä¹ˆä½¿ç”¨æ¡¥æ¥ç½‘ç»œæ¨¡å¼, usbå¦å¯»å‡ºè·¯, ä½¿ç”¨éç½‘ç»œçš„æ–¹å¼å…±äº«usbç»™wsl\nè¦ä¹ˆä½¿ç”¨nat æˆ– mirrored ç½‘ç»œæ¨¡å¼, udp å¹¿æ’­å¦å¯»å‡ºè·¯\nå‰è€…è²Œä¼¼å¯ä»¥ä¿®æ”¹wslçš„linux kernal, è®© 127.0.0.1è®¿é—®windowsçš„usbè®¾å¤‡å˜æˆèµ°å†…æ ¸çš„æ¨¡å¼,ä½†èµ„æ–™å¾ˆå°‘,å¹¶ä¸”ä¸ç¡®å®šèƒ½ä¸èƒ½åƒusbipdé‚£æ ·å•ç‹¬åªé…ç½®æŸä¸ªusb å…±äº«\næ‰€ä»¥æˆ‘è¿˜æ˜¯ä»åè€…å…¥æ‰‹è§£å†³åªè¦è®©wslçš„udpå¹¿æ’­åˆ°ä¸Šå±‚windowsæ‰€åœ¨çš„å±€åŸŸç½‘å°±è¡Œäº†\n2.2 é€šç”¨openvpn æ¡¥æ¥è®©wsl udpå¹¿æ’­åˆ°ä¸Šå±‚å±€åŸŸç½‘ openvpnæ”¯æŒlayer 2 å’Œlayer3çš„æ¡¥æ¥, é€šå¸¸æ¨èçš„æ˜¯æ€§èƒ½æ›´é«˜çš„layer3 tunæ¨¡å¼æ¡¥æ¥\nä½†udpå¹¿æ’­å‘ç”Ÿåœ¨layer2 æ•°æ®é“¾è·¯å±‚,æ‰€ä»¥éœ€è¦ç”¨ layer2çš„ tapæ¨¡å¼æ¡¥æ¥\n2.2.1 openvpn server googleä¸€ä¸‹ä»å®˜ç½‘ä¸‹è½½,åŒå‡»,driveråªé€‰tap ,\n#server.ovpn\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 port 1194 proto udp dev tap dev-node tap-bridge #è¿™ä¸ªæ˜¯windowsä¸Šçš„ç½‘ç»œé€‚é…å™¨åç§°,ncpa.cplå·¥å…·ä¸­å³é”®tapé€‚é…å™¨é‡å‘½åtap-bridge ca ca.crt cert server.crt key server.key dh dh.pem cipher none data-ciphers none #serverå’Œ server-bridgeä¸¤é€‰ä¸€ #ä¸æ¡¥æ¥ tap #server 192.168.8.0 255.255.255.0 #åœ¨ncpa.cplä¸­é€‰ä¸­tapç½‘ç»œé€‚é…å™¨å’Œæƒ³æ¡¥æ¥çš„ç½‘ç»œé€‚é…å™¨,æ‰‹åŠ¨æ¡¥æ¥ç½‘ç»œè®¾ç½®ipåœ°å€å,å¡«å†™åˆ°ä¸‹é¢ä¸€è¡Œ server-bridge 192.168.8.1 255.255.255.0 192.168.8.10 192.168.8.20 # æˆ–è€…ä¸æ‰‹åŠ¨è®¾ç½®æ¡¥æ¥ç½‘ç»œçš„ip,ç”¨è‡ªåŠ¨è·å– #server-bridge keepalive 10 120 persist-key persist-tun status server.log verb 3 explicit-exit-notify 1 ç”Ÿæˆca.crt , server.crt, server.key, dh.pem\nå®˜æ–¹æ–‡æ¡£ç”Ÿæˆæ­¥éš¾åˆè‡­ åˆé•¿, windowsåœ¨git bashé‡Œç›´æ¥ä½¿ç”¨ä¸‹é¢è¿™äº›å°±èƒ½ç”Ÿæˆ, è¿˜çœå¾—å®‰è£…openvpnçš„easy-rsaæ¨¡å—äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ cat genkey.sh # ç”Ÿæˆ CA ç§é’¥ openssl genrsa -out ca.key 2048 # ç”Ÿæˆ CA è¯ä¹¦ openssl req -x509 -new -nodes -key ca.key -sha256 -days 3650 -out ca.crt -subj \u0026#34;/C=CN/ST=Beijing/L=Beijing/O=MyVPN/CN=MyVPN-CA\u0026#34; # ç”Ÿæˆ Server ç§é’¥ openssl genrsa -out server.key 2048 # ç”Ÿæˆ Server CSRï¼ˆè¯·æ±‚ï¼‰ openssl req -new -key server.key -out server.csr -subj \u0026#34;/C=CN/ST=Beijing/L=Beijing/O=MyVPN/CN=MyVPN-Server\u0026#34; # ä½¿ç”¨ CA è¯ä¹¦ç­¾å‘ Server è¯ä¹¦ openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 3650 -sha256 # ç”Ÿæˆ Diffie-Hellman å‚æ•° openssl dhparam -out dh.pem 2048 æŠŠserver.ovpnæ–‡ä»¶æ”¾åˆ° c:\\progame file\\openvpn\\configç›®å½•, è¿è¡Œopenvpnå å³ä¸‹æ‰˜ç›˜å³é”®è¿æ¥\nå¦‚æœå¤±è´¥ä¹Ÿåœ¨å³ä¸‹æ‰˜ç›˜å³é”®çœ‹æ—¥å¿—,çŠ¶æ€ç­‰\nwindowsä¸Šé…ç½®\n2.2.2 client å®‰è£…\n1 sudo apt install openvpn #å’Œå®˜æ–¹æ–‡æ¡£ä¸åŒçš„æ˜¯,æˆ‘ä¸å®‰è£…easy-ras,å› ä¸ºæˆ‘ä¸ç”¨å®ƒ 1 2 sudo su #åˆ‡æ¢åˆ°rootå†æ“ä½œä¸‹é¢çš„æ­¥éª¤ cd /etc/openvpn #client.conf (confå’Œovpnæ˜¯åŒä¸€ç§æ ¼å¼çš„æ–‡ä»¶,åªæ˜¯linuxä¸‹åè¾åç”¨ conf)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 client dev tap proto udp #è¿™ä¸ªipæ˜¯windows wsl ç½‘ç»œé€‚é…å™¨çš„ip #wslä¼šé»˜è®¤è¢«åˆ†é…ä¸€ä¸ªhyper v å†…éƒ¨ç½‘ç»œ,ifconfigçœ‹å¾—åˆ°,ncpa.cplçœ‹ä¸åˆ°,è¿™ä¸ªç½‘ç»œçš„ä½œç”¨åªæ˜¯ç”¨æ¥wslå’Œhosté€šè®¯ #å¹¶ä¸”è¿™ä¸ªç½‘ç»œé…ç½®åˆå§‹åŒ–æ˜¯å†™åœ¨æ³¨å†Œè¡¨é‡Œçš„åœ°å€,ä¸ä¼šå˜,é™¤éæ”¹æ³¨å†Œè¡¨ #è®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss\\NatNetwork remote 172.28.208.1 1194 resolv-retry infinite nobind persist-key persist-tun ca ca.crt cert client.crt key client.key cipher none data-ciphers none verb 3 wslé»˜è®¤å°±æœ‰openssläº†å¥½åƒ,æ²¡æœ‰çš„è¯å®‰è£…ä¸€ä¸‹\nopensslç”Ÿæˆ client.crt å’Œclient.key, å‚è€ƒserverç”Ÿæˆçš„å¥½å‡ æ¡å‘½ä»¤ , ca.crt å’Œca.keyç”¨serverçš„å°±è¡Œ\n1 2 3 4 5 6 7 8 # ç”Ÿæˆ client ç§é’¥ openssl genrsa -out client.key 2048 # ç”Ÿæˆ client CSRï¼ˆè¯·æ±‚ï¼‰ openssl req -new -key client.key -out client.csr -subj \u0026#34;/C=CN/ST=Beijing/L=Beijing/O=MyVPN/CN=MyVPN-Client\u0026#34; # ä½¿ç”¨ CA è¯ä¹¦ç­¾å‘ client è¯ä¹¦ openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client.crt -days 3650 -sha256 é…ç½®å¥½äº†,ä¹Ÿç”Ÿæˆè¯ä¹¦å\n1 sudo openvpn --config client.conf å¯åŠ¨åå°±çœ‹åˆ°è‡ªåŠ¨è·å–åˆ°æœåŠ¡ä¸­é…ç½®çš„ipåœ°å€äº†, windows å’Œtap é€‚é…å™¨æ¡¥æ¥çš„ç½‘å¡æœ‰æ¥ç½‘çº¿åˆ°å…¶ä»–è®¾å¤‡çš„è¯(é€šè¿‡äº¤æ¢æœºçš„å¤šä¸ªç½‘ç»œä¹Ÿå¯ä»¥),è¿™æ—¶è¿è¡Œåœ¨nat ç½‘ç»œé‡Œçš„wslå¯ä»¥Pingé€šè¿™äº›è®¾å¤‡, è¿™äº›è®¾å¤‡ ä¹Ÿå¯ä»¥å‘wslå‘é€udpå¹¿æ’­\nå¦‚æœè¦è®©wslä¸ä»…é™äºå•æ’­,éœ€è¦é‡æ–°ç¼–è¯‘wslå†…æ ¸,æ‰“å¼€å¤šæ’­çš„å¼€å…³\né…ç½®ä¸ºç³»ç»ŸæœåŠ¡ä¹‹ç±»çš„å‰äººä¹‹è¿°å¤‡çŸ£, æœ¬æ‡’æ±‰å°±ä¸å†å•°å—¦äº†\n", 
        "url": "\/post\/wsl%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8udp%E5%B9%BF%E6%92%AD%E5%92%8Cusb\/"
    },
    
    "\/tags\/chromium\/": {
        "title": "chromium",
        "tags": [],
        "content": "", 
        "url": "\/tags\/chromium\/"
    },
    
    "\/post\/%E7%BC%96%E8%AF%91%E7%B2%BE%E7%AE%80%E7%9A%84chromium%E8%AE%B0%E5%BD%95\/": {
        "title": "ç¼–è¯‘ç²¾ç®€çš„chromiumè®°å½•",
        "tags": ["chromium",],
        "content": "0 å‰è¨€ æ˜¥èŠ‚å°è¯•äº†è‡ªå·±å†™pytorchæ¨¡å‹, é€šè¿‡æˆ‘å°è£…çš„vncæ§ä»¶,è¿œç¨‹dockerä¸­çš„Ubuntu, é‡‡é›†æ‰«é›·æ¸¸æˆçš„æˆªå›¾, è®­ç»ƒä¸¤ä¸ªæ¨¡å‹\nè‡ªå®šä¹‰å·ç§¯å¯¹æ¸¸æˆæˆªå›¾çŠ¶æ€è¯†åˆ« ddqn å¼ºåŒ–å­¦ä¹ ,ä»…é€šè¿‡å¥–åŠ±åœ¨ä¸æ•™è§„åˆ™çš„æƒ…å†µä¸‹è®©æ¨¡å‹è‡ªå·±å­¦ä¼šç©æ‰«é›· å‰é¢çš„è¯†åˆ«æ¨¡å‹ä¸€ä¸ªæ˜ŸæœŸå°±æˆåŠŸäº†,ä½†æ˜¯å¼ºåŒ–å­¦ä¹ çš„æ•ˆæœé™¤äº†èŠ±äº†æ˜¥èŠ‚ä¸€å‘¨æ—¶é—´,è¿˜è¿½åŠ äº†ä¸‰ä¸ªæ˜ŸæœŸçš„å‘¨æœ«,éƒ½æ²¡èƒ½æˆåŠŸ\nä¸çŸ¥é“æ˜¯ä¸æ˜¯å¼ºåŒ–å­¦ä¹ éœ€è¦çš„æ•°æ®é‡å¤ªå¤§å¯¼è‡´çš„,å› æ­¤åªèƒ½æš‚æ—¶æç½®æ­¤å­¦ä¹ ä»»åŠ¡,å¦åˆ™é“å¿ƒä¸ç¨³,å¤©ç©ºå¥½åƒå§‹ç»ˆè¦†ç›–ä¸€å±‚åšé‡çš„é˜´éœ¾\nä¸ºäº†èµ°å‡ºddqnçš„æ»‘é“å¢,æˆ‘æŠŠç›®å…‰è½¬å‘chromium , æˆ‘æƒ³ç¼–è¯‘å„å¹³å°çš„ç²¾ç®€ç‰ˆæœ¬çš„chromiumå†…æ ¸,åƒelectornä¸€æ ·ä½¿ç”¨å®ƒè¿›è¡Œä¸€äº›webé›†æˆåˆ°å®¢æˆ·ç«¯(qt qml çš„opengl frame buffer object)ä¸­çš„å¼€å‘,è¿™æ ·æ—¢èƒ½äº«å—webå‰ç«¯ä¾¿åˆ©çš„ç”Ÿæ€,åˆèƒ½ä½¿ç”¨qt qmlå…¨å¹³å°çš„c++èƒ½åŠ›,å¯¹webåœ¨éŸ³è§†é¢‘ç­‰é¢†åŸŸçš„ä¹åŠ›è¿›è¡Œè¡¥å…….\n1 mac os å®˜æ–¹æ–‡æ¡£\nhttps://github.com/chromium/chromium/blob/main/docs/mac_build_instructions.md\nhttps://bitbucket.org/chromiumembedded/cef/wiki/AutomatedBuildSetup.md#markdown-header-windows-configuration\næˆ‘ä»¬ä¸»è¦å®Œæˆä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤\narm64æ„å»º x64æ„å»º åˆå¹¶ä¸ºé€šç”¨çš„flatç‰ˆæœ¬(x64å’Œarm64éƒ½å¯ç”¨) 1.0 æºç æ‹‰å– 1.1 åˆ‡æ¢sdk åœ¨src/build/config/mac/mac_sdk.gnié‡Œå¯ä»¥ç¡®è®¤éœ€è¦å®˜æ–¹ç¼–è¯‘æ—¶çš„sdkç‰ˆæœ¬\nè¿™ä¸ªç‰ˆæœ¬ä¸ä¸€å®šæ˜¯è¦ä½è¦æ•‘,å¦‚æœæ²¡æœ‰è¿™ä¸ªç‰ˆæœ¬çš„sdkå¯ä»¥è°ƒä¸ºä½ æœ‰çš„ç‰ˆæœ¬å®éªŒç¼–è¯‘,å¦‚æœç¼–è¯‘ä¸è¿‡,å†å®‰è£…å’Œä»–ä»¬ä¸€æ ·çš„sdkç‰ˆæœ¬\nå¦‚æœéœ€è¦å®‰è£…æ–°çš„sdk, å¯èƒ½éœ€è¦å®‰è£…å¯¹åº”çš„xcodeç‰ˆæœ¬,åœ¨è¿™é‡Œä¸‹è½½\nä»€ä¹ˆç‰ˆæœ¬çš„xcodeæœ‰ä»€ä¹ˆç‰ˆæœ¬çš„sdk çœ‹è¿™ä¸ªè¯´æ˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #é€‰æ‹©xcode xcode-select -p sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer xcodebuild -showsdks #æŸ¥çœ‹å¯ç”¨sdk xcodebuild -showsdks ls `xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/ #æŸ¥çœ‹å½“å‰sdk xcrun --show-sdk-path xcrun --sdk macosx --show-sdk-version #ä¸´æ—¶é…ç½®sdk export SDKROOT=`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk #ç¼–è¯‘æ—¶é…ç½®sdk cd build \u0026amp;\u0026amp; xcodebuild -sdk macosx13.3 #or #cmake cmake .. -DCMAKE_OSX_SYSROOT=`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk #GN gn gen out/Default --args=\u0026#39;mac_sdk_path=\u0026#34;`xcode-select -p`/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk\u0026#34;\u0026#39; 1.2 é…ç½®depot_tools $ git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git\n1 $ export PATH=\u0026#34;$PATH:/path/to/depot_tools\u0026#34; 1.3 è·å–æºç  1 2 3 4 $ mkdir chromium \u0026amp;\u0026amp; cd chromium $ caffeinate fetch chromium #é˜²æ­¢ç”µè„‘åœ¨æ‹‰ä»£ç æ—¶ç¡çœ  #åªæ‹‰æœ€æ–°çš„ä»£ç å¯ä»¥ç”¨fetch --no-history chromium,æƒ³æ¢å¤æ—¶git fetch --unshallow #å¦‚æœç½‘ç»œä¸­æ–­å¯ä»¥ä¸é‡æ–°å¼€å§‹,ä½¿ç”¨gclient sync 1.4 é…ç½®æ„å»ºå‚æ•° https://www.chromium.org/developers/gn-build-configuration/\n1 2 mkdir -p out/arm64 #nameå¯ä»¥æ˜¯ä»»æ„çš„,ä¾‹å¦‚è¿™ä¸ªç›®å½•ç”¨äºç”Ÿæˆarm64,å°±å¯ä»¥å–åä¸ºarm64 vim out/arm64/args.gn ä¸ºäº†ä½ electorné‚£æ ·ç¼–è¯‘ç²¾ç®€çš„ç‰ˆæœ¬, args.gnçš„å†…å®¹é…ç½®ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 chrome_pgo_phase = 0 mac_sdk_path = \u0026#34;/Applications/Xcode16.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.2.sdk\u0026#34; #vim \u0026#34;/Applications/Xcode15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.2.sdk\u0026#34; #æ”¯æŒh264,mp3,ä¸“åˆ©åŸå› é»˜è®¤ä¸å¼€å¯ ffmpeg_branding = \u0026#34;Chrome\u0026#34; enable_proprietary_codecs = true # å…³é—­è°ƒè¯•ä¿¡æ¯ï¼Œå‡å°ä½“ç§¯ is_debug = false is_java_debug = false #android Defaults to is_debug. dcheck_always_on = false is_official_build = true is_chrome_branded = false #googler only symbol_level = 0 blink_symbol_level=0 v8_symbol_level=0 # å…³é—­ç»„ä»¶æ„å»ºï¼Œç”Ÿæˆå•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ is_component_build = false # ç›®æ ‡å¹³å°ï¼ˆæ ¹æ®éœ€æ±‚è®¾ç½®ï¼‰ target_cpu = \u0026#34;arm64\u0026#34; # æˆ– \u0026#34;arm64\u0026#34;ï¼ˆM1/M2 Macï¼‰ host_cpu = \u0026#34;arm64\u0026#34; # æˆ– \u0026#34;arm64\u0026#34;ï¼ˆM1/M2 Macï¼‰ #use_jumbo_build=ture #windowsä¸Šæ‰“å¼€è¿™ä¸ªä¼šç¼–è¯‘æ¯”è¾ƒå¿« # ç§»é™¤ä¸å¿…è¦åŠŸèƒ½ enable_nacl = false enable_extensions = true # å…³é—­æ‰©å±•æ”¯æŒ enable_plugins = true # å…³é—­ Pepper/Flash æ’ä»¶ enable_pdf = true # å…³é—­ PDF æ¸²æŸ“æ”¯æŒ enable_print_preview = true # å…³é—­æ‰“å°é¢„è§ˆ enable_webrtc = false # å…³é—­ WebRTCï¼ˆè§†é¢‘é€šè¯ï¼‰ webrtc_enable_screen_capture = false enable_spellcheck = false # å…³é—­æ‹¼å†™æ£€æŸ¥ enable_reporting = false # å…³é—­é”™è¯¯æŠ¥å‘Š enable_mhtml = false # å…³é—­ MHTMLï¼ˆç½‘é¡µå­˜æ¡£ï¼‰ enable_dbus = false # å…³é—­ D-Busï¼ˆLinuxï¼‰ # ç§»é™¤è‡ªåŠ¨æ›´æ–°å’Œè¿œç¨‹æ§åˆ¶ use_gnome_keyring = false enable_remoting = false use_kerberos = false # æœ€å°åŒ– UI ç»„ä»¶ use_aura = false # å…³é—­ Aura UIï¼ˆä»… CLI ç¨‹åºæ—¶ï¼‰ # osr #use_ozone = true #linux enable_osr = true # å…³é—­æ— ç”¨çš„ä¾èµ– use_cups = true # å…³é—­ CUPS æ‰“å°æ”¯æŒ use_pulseaudio = false # å…³é—­ PulseAudio use_gio = false # å…³é—­ GIOï¼ˆLinux æ–‡ä»¶ç®¡ç†ï¼‰ # è¿›ä¸€æ­¥è£å‰ªå¤§å° enable_media_router = false # å…³é—­ Chromecast enable_resource_allowlist_generation = false # å…³é—­èµ„æºç™½åå• å¦‚æœéœ€è¦äº¤å‰ç¼–è¯‘,è®¾ç½®\n1 2 3 # ç›®æ ‡å¹³å°ï¼ˆæ ¹æ®éœ€æ±‚è®¾ç½®ï¼‰ target_cpu = \u0026#34;arm64\u0026#34; # æˆ– \u0026#34;arm64\u0026#34;ï¼ˆM1/M2 Macï¼‰ host_cpu = \u0026#34;arm64\u0026#34; # æˆ– \u0026#34;arm64\u0026#34;ï¼ˆM1/M2 Macï¼‰ æ‰§è¡Œé…ç½®\n1 gn gen out/arm64 1.5 ç¼–è¯‘ 1 2 ulimit -n 524288 #é˜²æ­¢æ‰“å¼€æœ€å¤šæ–‡ä»¶æ•°é‡é™åˆ¶ å¦‚æœä¸éœ€è¦Ui,åªæ˜¯ä½¿ç”¨åº“,åˆ™ä½¿ç”¨content_shellé€‰é¡¹ç¼–è¯‘\n1 2 3 ninja -C out/Default content_shell #ç¼–è¯‘å®Œæˆåæ‰§è¡Œå¯åŠ¨ä¸€ä¸ªæœ€å°åŒ–çš„webview out/Default/content_shell --disable-gpu åˆ é™¤ä¸éœ€è¦çš„é™æ€åº“å’ŒåŠ¨æ€åº“\n1 2 3 4 strip out/Default/chrome # å»æ‰è°ƒè¯•ç¬¦å· find out/Default -name \u0026#34;*.a\u0026#34; -delete # åˆ é™¤é™æ€åº“ find out/Default -name \u0026#34;*.so\u0026#34; -delete # åˆ é™¤ä¸å¿…è¦çš„åŠ¨æ€åº“ find out/Default -name \u0026#34;*.pdb\u0026#34; -delete # åˆ é™¤è°ƒè¯•ç¬¦å·ï¼ˆWindowsï¼‰ å¦‚æœéœ€è¦æœ‰ç¼–è¯‘æœ‰ui\n1 2 3 4 ninja -C out/Default chrome strip out/Default/chrome # è¿›ä¸€æ­¥ç˜¦èº« #ç¼–è¯‘å®Œæˆåæµ‹è¯•æ‰§è¡Œ out/Default/chrome --no-sandbox --disable-gpu å¦‚æœè¦åœ¨vs codeä¸­ç¼–è¯‘,åˆ›å»ºtasks.josn\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 { \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { \u0026#34;label\u0026#34;: \u0026#34;build-cotent-shell\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;bash\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-x\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;ninja -C out/arm64 content_shell\u0026#34; ], \u0026#34;group\u0026#34;: { \u0026#34;kind\u0026#34;: \u0026#34;build\u0026#34;, \u0026#34;isDefault\u0026#34;: true }, \u0026#34;problemMatcher\u0026#34;: [] } ] } åœ¨vs codeä¸­æŒ‰command + shift + b ç¼–è¯‘\n1.5 åˆå¹¶ä¸ºfatæ¨¡å¼(åŒæ—¶æ”¯æŒx64å’Œarm64) 1 2 3 4 5 6 7 % ninja -C out/release_x86_64 chrome % ninja -C out/release_arm64 chrome % mkdir out/release_universal % chrome/installer/mac/universalizer.py \\ out/release_x86_64/Chromium.app \\ out/release_arm64/Chromium.app \\ out/release_universal/Chromium.app 1.6 è°ƒè¯• å¦‚æœå‡ºç°ä¸å…è®¸é™„åŠ è¿›ç¨‹è°ƒè¯•çš„æƒ…å†µattach failed: Operation not permitted\n1 echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope æ‰“æ–­ç‚¹\n1 breakpoint set -f inspector_overlay_agent.cc -l 627 1.6.1 å‰ç½®æ¡ä»¶ https://chromium.googlesource.com/chromium/src/+/main/docs/lldbinit.md\næŒ‰ä¸Šé¢è¿™ä¸ªé“¾æ¥è®¾ç½®å®Œå,åœ¨å‘½ä»¤è¡Œæ‰§è¡Œlldb å¯ä»¥æ­£å¸¸è°ƒè¯•chromiumé‡Œçš„ç¨‹åº\nä½†åœ¨vs codeä½¿ç”¨codelldbæ‰©å±•è°ƒè¯•æ—¶ä¸è¡Œ,éœ€è¦åœ¨ launch.jsonä¸­è®¾ç½®åŠ è½½è„šæœ¬\n1 2 3 4 5 6 7 \u0026#34;initCommands\u0026#34;: [ \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/lldbinit.py\u0026#34; ], \u0026#34;env\u0026#34;: { \u0026#34;CHROME_LOG_FILE\u0026#34;: \u0026#34;/tmp/chrome_debug.log\u0026#34;, \u0026#34;CHROMIUM_LLDBINIT_SOURCED\u0026#34;: \u0026#34;1\u0026#34;, }, ç¼–è¯‘æ—¶,æ‰“å¼€ is_debug ,å…³æ‰ is_official_build , symbol_level=2ç”Ÿæˆä¸€ä¸‹æœ‰è°ƒè¯•ç¬¦å·çš„ç¨‹åº,æ‰èƒ½è°ƒè¯•\nç”Ÿæˆcompile_command.jsonå, è®¾ç½®åˆ° IDEä¸­, ç”¨äºideç¬¦å·è·³è½¬\nè°ƒè¯•æ—¶é€šè¿‡å‘½ä»¤è¡Œä¼ å‚ --no-sandbox ,å…³æ‰æ²™ç®±,å¦åˆ™è°ƒè¯•å¯èƒ½ä¼šä¸æ­£å¸¸\n1.6.2 è°ƒè¯•ä¸»è¿›ç¨‹ åˆ›å»ºvsçš„è°ƒè¯•ç”¨çš„launch.json\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 { \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;Debug Content Shell\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;lldb\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/out/arm64/Content Shell.app/Contents/MacOS/Content Shell\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;--no-sandbox\u0026#34;, \u0026#34;--disable-logging\u0026#34;, \u0026#34;--off-screen-rendering-enabled\u0026#34;, \u0026#34;--v=0\u0026#34;, \u0026#34;--remote-debugging-port=9222\u0026#34; ], \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;env\u0026#34;: { \u0026#34;CHROME_LOG_FILE\u0026#34;: \u0026#34;/tmp/chrome_debug.log\u0026#34;, \u0026#34;CHROMIUM_LLDBINIT_SOURCED\u0026#34;: \u0026#34;1\u0026#34;, }, \u0026#34;stopOnEntry\u0026#34;: false, \u0026#34;initCommands\u0026#34;: [ \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/lldbinit.py\u0026#34;, \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/chromium_visualizers.py\u0026#34; ], \u0026#34;postRunCommands\u0026#34;: [ \u0026#34;image list\u0026#34; // å¯é€‰ï¼šå¯åŠ¨ååˆ—å‡ºåŠ è½½çš„æ¨¡å— ] //\u0026#34;sourceMap\u0026#34;: { // \u0026#34;/b/s/w/ir/cache/src\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34; // æ›¿æ¢ä¸ºè°ƒè¯•ä¿¡æ¯ä¸­çš„æºç è·¯å¾„ //}, //\u0026#34;preLaunchTask\u0026#34;: \u0026#34;build\u0026#34;, } ] } å¦‚æœè¦åœ¨å‘½ä»¤è¡Œä½¿ç”¨lldbè°ƒåº¦æ—¶ä¼ å…¥å‚æ•°\n1 lldb -- out/arm64/Content\\ Shell.app/Contents/MacOS/Content\\ Shell -- --no-sandbox --disable-logging --off-screen-rendering-enabled --v=0 --remote-debugging-port=9222 1.6.3 è°ƒè¯•å­è¿›ç¨‹ è°ƒè¯•å­è¿›ç¨‹,åªèƒ½ä½¿ç”¨é™„åŠ è¿›ç¨‹çš„æ–¹å¼\n1 2 lldb (lldb) attach -p 12345 content shell å¯åŠ¨å,æ‰“å¼€ç™¾åº¦\nä½¿ç”¨ ps è§‚å¯Ÿå¯åŠ¨äº†å‡ ä¸ªçº¿ç¨‹\n1 2 ps aux|grep chromium #å¯åŠ¨äº†3ä¸ªæ¸²æŸ“è¿›ç¨‹,1ä¸ªgpuè¿›ç¨‹,ä¸€ä¸ªç½‘ç»œè¿›ç¨‹,ä¸€ä¸ªå­˜å‚¨è¿›ç¨‹ æŒ‰éœ€è¦é™„åŠ è¿›ç¨‹å³å¯\nå¦‚æœè¦ç”¨vs codeè°ƒè¯•,åœ¨launch.jsonä¸­æ·»åŠ ä¸€ä¸ªé…ç½®\nåœ¨programä¸­å†™å…¥æƒ³è°ƒè¯•çš„è¿›ç¨‹çš„è·¯å¾„,\nå¦‚æœåªæœ‰ä¸€ä¸ªè¿›ç¨‹,å¯ä»¥ä½¿ç”¨ \u0026quot;program\u0026quot;: \u0026quot;path to executanble\u0026quot;æŒ‡å®š è°ƒè¯•çš„ç¨‹åºè·¯å¾„,\næˆ–ä½¿ç”¨\u0026quot;processId\u0026quot;: \u0026quot;${command:pickProcess}\u0026quot; é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹\nå¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹,åªèƒ½ä½¿ç”¨\u0026quot;pid\u0026quot;: \u0026quot;25951\u0026quot; æŒ‡å®šå…·ä½“çš„pid é™„åŠ æŸä¸ªè¿›ç¨‹è°ƒè¯•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 { \u0026#34;name\u0026#34;: \u0026#34;attach to Content Shell\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;lldb\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;attach\u0026#34;, //\u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/out/arm64/Content Shell.app/Contents/MacOS/Content Shell\u0026#34;, //\u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/out/arm64/Content Shell.app/Contents/Frameworks/Content Shell Framework.framework/Helpers/Content Shell Helper (Renderer).app/Contents/MacOS/Content Shell Helper (Renderer)\u0026#34;, //\u0026#34;processId\u0026#34;: \u0026#34;${command:pickProcess}\u0026#34;, \u0026#34;pid\u0026#34;: \u0026#34;25951\u0026#34;, \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;initCommands\u0026#34;: [ \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/lldbinit.py\u0026#34;, \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/chromium_visualizers.py\u0026#34; ], \u0026#34;postRunCommands\u0026#34;: [ \u0026#34;image list\u0026#34; // å¯é€‰ï¼šå¯åŠ¨ååˆ—å‡ºåŠ è½½çš„æ¨¡å— ] //\u0026#34;sourceMap\u0026#34;: { // \u0026#34;/b/s/w/ir/cache/src\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34; // æ›¿æ¢ä¸ºè°ƒè¯•ä¿¡æ¯ä¸­çš„æºç è·¯å¾„ //}, } å¦‚æœæƒ³è‡ªåŠ¨é™„åŠ è°ƒè¯•, è®¾ç½®\nåœ¨ä¸»ç¨‹åºçš„é…ç½®ä¸­è®¾ç½® \u0026quot;settings set target.process.follow-fork-mode child\u0026quot;å¹¶ä¸èƒ½ç”Ÿæ•ˆ,å› ä¸ºè®¾ç½®è¿™ä¸ªéœ€è¦å…ˆæœ‰æ–­ç‚¹ä¿¡æ¯,å†è®¾ç½®settings set target.process.follow-fork-mode child\n1 2 3 4 5 \u0026#34;initCommands\u0026#34;: [ \u0026#34;settings set target.process.follow-fork-mode child\u0026#34;, \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/lldbinit.py\u0026#34;, \u0026#34;command script import /Users/hbb/source/chromium/chromium/src/tools/lldb/chromium_visualizers.py\u0026#34; ], vs codeæœ‰ä¸€ä¸ªlldbçš„æ‰©å±•,é€šè¿‡ç›‘è§†è¿›ç¨‹è‡ªåŠ¨é™„åŠ \nhttps://marketplace.visualstudio.com/items?itemName=thebestnom.auto-attach-child-processes\næˆ–è€…æ‰‹åŠ¨åœ¨lldb è°ƒè¯•æ§åˆ¶å°å½•å…¥settings set target.process.follow-fork-mode child\næ€»ç»“,è¿˜æ˜¯è‡ªå·±ä½¿ç”¨lldb æ§åˆ¶å°æ§åˆ¶æ¯”è¾ƒåˆç†,å› ä¸ºå¦‚æœæœ‰å¤šä¸ªå­è¿›ç¨‹, ç”¨æ’ä»¶å§‹ç»ˆåªèƒ½é™„åŠ åˆ°ç¬¬ä¸€ä¸ªå­è¿›ç¨‹\n", 
        "url": "\/post\/%E7%BC%96%E8%AF%91%E7%B2%BE%E7%AE%80%E7%9A%84chromium%E8%AE%B0%E5%BD%95\/"
    },
    
    "\/post\/modbus_rtu%E4%BB%8E%E7%AB%99%E4%BB%BF%E7%9C%9F\/": {
        "title": "modbus_rtuä»ç«™ä»¿çœŸ",
        "tags": ["ModbusRTU","Simulation",],
        "content": "å‰è¨€ ä¸Šå‘¨,å¼€å‘äº†ä¸€ä¸ªå¯è§†åŒ–é…ç½®çš„modbusæ¨¡å—,ç”¨äºå’Œç”µæ°”éƒ¨é—¨çš„è¥¿é—¨å­plcçš„modbus RTU slaveé€šè®¯.\nå®ç°ä¸»è¦ä½¿ç”¨qtçš„qmodbusslaveç›¸å…³çš„ç±», ç»†èŠ‚ä¸å†å±•å¼€\nç”±äºç”µæ°”å·¥ç¨‹å¸ˆä»¬ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨modbus RTUæ¨¡å—, å¯¹é…ç½®ä¸ç†Ÿæ‚‰,æ‰€ä»¥æˆ‘éœ€è¦è‡ªå·±ä»¿çœŸé€šè®¯,éªŒè¯ç¨‹åºé€»è¾‘\nä¸»è¦é‡åˆ°çš„é—®é¢˜æ˜¯, modbus RTUæ˜¯åŸºäºä¸²å£çš„, å¦‚æœæ˜¯modbus tcpç›´æ¥é€šè¿‡å·²æœ‰çš„ç½‘ç»œä»¿çœŸ modbus slaveå°±å¯ä»¥,ä½†ç”µè„‘æœ¬èº«æ²¡æœ‰ä¸²å£,è¦æ€ä¹ˆä»¿çœŸ modbus slaveè¿è¡Œ,ä»¥éªŒè¯è‡ªå·±å®ç°çš„modbus masteré€»è¾‘å‘¢.\né€šè¿‡ä¸€å‘¨ä¸‹æ¥çš„æ‘¸ç´¢,æˆ‘æ‰¾åˆ°3ç§æ–¹æ³•\næ–¹æ³•1 qt5ä¸­,modbus RTUçš„ä»ç«™å¯¹åº”çš„c++ç±»æ˜¯ QModbusRtuSerialMaster , modbus Tcpä»ç«™åº”å¯¹çš„c++ç±»åˆ™æ˜¯QModbusTcpClient. å®ƒä»¬éƒ½ç»§æ‰¿è‡ªQModbusClient.\nè¿™ä¸¤ä¸ªé™¤äº†è¿æ¥çš„æ¥å£ä¸åŒ,ä¸Šå±‚å°è£…çš„æ¥å£æ²¡æœ‰ä»»ä½•åŒºåˆ«,åŒ…æ‹¬è¯»å†™,çŠ¶æ€,é”™è¯¯æ¥å£\næ‰€ä»¥å¯ä»¥å…ˆç”¨QModbusTcpClientç±» + ä¸€ä¸ªä»¿çœŸçš„modbus tcp master, å°±å¯ä»¥éªŒè¯äº†\nå¯ä»¥ç›´æ¥ä»qt 5å®‰è£…çš„exmapleä¸­æ‰¾åˆ° modbus slaveä»£ç ,ç¼–è¯‘äº†å®ƒä½ å°±æ‹¥æœ‰ä¸€ä¸ªä»¿çœŸç”¨çš„modbus ä»ç«™\né…ç½®å¥½ç¯å¢ƒç¼–è¯‘åç›´æ¥è¿è¡Œä»¥éªŒè¯\nè¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯ä¸²å£è¿æ¥çš„é€»è¾‘æ²¡æœ‰åŠæ³•éªŒè¯\næœ‰ä¸€ä¸ªå‘æ˜¯ QModbusRtuSerialMasterè¿æ¥çš„æ–¹æ³•connectDeviceæˆåŠŸæ˜¯åŒæ­¥è¿”å›çš„,ä¸åƒ QModbusTcpClientè¿æ¥åç«‹å³è¿”å›,\nå¦‚æœç”¨äº‹ä»¶å¾ªç¯è¿›ä¸€æ­¥å°è£…éœ€è¦æ³¨æ„,å¦åˆ™ä¼šå¯¼è‡´äº‹ä»¶å¾ªç¯æ°¸é€€å‡ºåœ¨å¼€å§‹ä¹‹å‰,è°ƒç”¨modbus è¿æ¥çš„çº¿ç¨‹ä¸€ç›´æŒ‚èµ·\næˆ‘å°±åœ¨è¿™ä¸ªé—®é¢˜æµªè´¹ä¸€ä¸‹åˆ,ç—›å®šæ€ç—›æ‰æ‘¸ç´¢å‡ºç¬¬2ç§å’Œç¬¬3ç§æ–¹å¼,å®Œå…¨çš„ä»¿çœŸ modbus RTUçš„é€šè®¯\næ–¹æ³•2 åœ¨windowsä¸Šä½¿ç”¨è™šæ‹Ÿä¸²å£(è¿™ä¸ªå¯ä»¥è‡ªé€‰ä¸Šç½‘æœç´¢,å¤§å¤šæ•°æ˜¯ç ´è§£æ”¶è´¹çš„),åˆ›å»ºä¸€å¯¹Tx Rxäº¤å‰çš„ä¸²å£å¯¹, ä¾‹å¦‚ COM1å’Œ COM2\nç„¶åä½¿ç”¨qt exampleçš„modbus slave è¿è¡Œåœ¨COM1\nä½ çš„modbus masterç¨‹åºä½¿ç”¨com2 ,è¿æ¥ä¸Šä¹‹åå°±å¯ä»¥å®Œæ•´çš„éªŒè¯modbus RTUçš„æ•´ä¸ªé€šè®¯è¿‡ç¨‹\næ–¹å¼3 æ­¤æ–¹å¼ä¸ æ–¹æ³•2é›·åŒ\nåŒºåˆ«æ˜¯ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªç‰©ç†ä¸²å£ äº¤å‰è¿æ¥ TX RX\nä¾‹å¦‚æˆ‘ä½¿ç”¨raspberry pi5 ,å…ˆæŠŠqt exampleçš„modbus slave äº¤å‰ç¼–è¯‘éƒ¨ç½²åˆ°raspberry piä¸­\nç„¶åé…ç½®raspberry pi ,æ‰“å¼€ 0 å’Œ 2çš„ä¸²å£, é…ç½®æ–¹æ³•å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„raspberry pi 5 å¼€å‘ç¬”è®°\nåœ¨å¼€å‘æ¿ä¸Šç”¨æœé‚¦çº¿ äº¤å‰è¿æ¥ä¸¤ä¸ªä¸²å£çš„TX RXå,\næŠŠqt modbus slaveè¿è¡Œåœ¨ ttyAMA0 ,\næŠŠè‡ªå·±çš„modbus masterç¨‹åºä¹Ÿéƒ¨ç½²åˆ°å¼€å‘æ¿ä¸Š, è¿è¡Œç¨‹åº,é€šè¿‡ttyAMA2 è¿æ¥åˆ° qt modbus slave\nå°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†\n", 
        "url": "\/post\/modbus_rtu%E4%BB%8E%E7%AB%99%E4%BB%BF%E7%9C%9F\/"
    },
    
    "\/tags\/modbusrtu\/": {
        "title": "ModbusRTU",
        "tags": [],
        "content": "", 
        "url": "\/tags\/modbusrtu\/"
    },
    
    "\/tags\/simulation\/": {
        "title": "Simulation",
        "tags": [],
        "content": "", 
        "url": "\/tags\/simulation\/"
    },
    
    "\/tags\/windows\/": {
        "title": "Windows",
        "tags": [],
        "content": "", 
        "url": "\/tags\/windows\/"
    },
    
    "\/tags\/wsl2\/": {
        "title": "WSL2",
        "tags": [],
        "content": "", 
        "url": "\/tags\/wsl2\/"
    },
    
    "\/post\/wsl2%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%A1%A5%E6%8E%A5%E5%88%B0%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1\/": {
        "title": "wsl2è®¾ç½®ç½‘ç»œæ¡¥æ¥åˆ°ç‰©ç†ç½‘å¡",
        "tags": ["wsl2","windows",],
        "content": "0. å‰è¨€ å‰å‡ ä¸ªæœˆå·²ç»æ¢ç´¢äº†é€šè¿‡x11 è½¬å‘, åœ¨windowsä¸mac osä¸Šé€šè¿‡ubuntu docker é•œåƒ,è¿è¡Œå…·æœ‰gpuåŠ é€Ÿçš„ubuntu guiç¨‹åº\nä½†æ˜¯åœ¨windowsä¸Šæœ‰æ›´ç›´æ¥çš„é€‰æ‹©, é‚£å°±æ˜¯é€šè¿‡wsl2 è¿è¡Œubutnuçš„linux å­ç³»ç»Ÿ, è¿™ç§æ–¹å¼,å¯ä»¥é€šè¿‡åœ¨docker desktopä¸­è®¾ç½®ä¸å…·ä½“çš„wsl2 å‘è¡Œç‰ˆé›†æˆ, è®©windowså’Œwsl2 å‘è¡Œç‰ˆä½¿ç”¨åŒä¸€ä¸ªdocker socket,å…±äº«ä¸€ä¸ªdocker engine\ndocker ä¹Ÿæ›´å»ºè®®æŠŠdockerä¸wsl2ä¸€èµ·ä½¿ç”¨, æ­¤æ–¹æ¡ˆåº”æœ‰æ›´å¤šçš„æ€§èƒ½çº¢åˆ©å’Œç¤¾åŒºæ”¯æŒçº¢åˆ©\nç”±äºæˆ‘å°†åœ¨windowsä¸Šé€šè¿‡wsl2 ubuntuè¿è¡Œçš„ç¨‹åºä¼šä½¿ç”¨udpå¹¿æ’­æ¥å‘ç°å±€åŸŸç½‘ä¸­çš„è®¾å¤‡,æ‰€ä»¥ä¸èƒ½ä½¿ç”¨wslé»˜è®¤çš„natç½‘ç»œ,å¦åˆ™udpå¹¿æ’­åˆšä¸èƒ½ä¼ è¾¾åˆ°å±€åŸŸç½‘çš„è®¾å¤‡ç«¯. æ‰€ä»¥æˆ‘æ¢ç´¢äº†è®¾ç½®wsl ç½‘ç»œæ¡¥æ¥ç‰©ç†ç½‘å¡çš„æ–¹å¼,å¹¶è®°å½•åœ¨æ­¤,ç•™ç—•\næ­¤æ–¹æ³•éœ€è¦\nä½¿ç”¨hyper-v åˆ›å»ºè™šæ‹Ÿç½‘ç»œ é…ç½®wsl ä½¿ç”¨ è™šæ‹Ÿç½‘ç»œ é™åˆ¶\nç»ˆäºç›®å‰åªåœ¨win11ä¸Šä½¿ç”¨ win10ä¸Šè¿˜æ²¡æµ‹è¯•,æ‰€ä»¥ä¸ä¿è¯åœ¨windowsä¸Šå¯ä»¥æˆåŠŸ å¦‚æœå°†æ¥åœ¨windows 10æµ‹è¯•éªŒè¯, å°†ä¼šæ›´æ–°äº›æ–‡æ¡£\n1.windowså®¶æ—ç‰ˆå®‰è£…hyper-v é€šå¸¸å®‰è£…hyper-vçš„æ–¹å¼æ˜¯åœ¨ç¨‹åºä¸­æ‰“å¼€windowsåŠŸèƒ½,é€‰ä¸­hyper-v,ç¡®å®šå®‰è£…,ä¸è¿‡å¦‚æœä½ æ˜¯windows å®¶åº­ç‰ˆ,é‚£ä¹ˆåœ¨æ‰“å¼€windowsåŠŸèƒ½çš„ç•Œé¢ä¸­ä¸ä¼šæœ‰hyper-vçš„é€‰é¡¹,éœ€è¦ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£…\nåˆ›å»º hyper-v.bat\n1 2 3 4 5 6 pushd \u0026#34;%~dp0\u0026#34; dir /b %SystemRoot%\\servicing\\Packages\\*Hyper-V*.mum \u0026gt;hyper-v.txt for /f %%i in (\u0026#39;findstr /i . hyper-v.txt 2^\u0026gt;nul\u0026#39;) do dism /online /norestart /add-package:\u0026#34;%SystemRoot%\\servicing\\Packages\\%%i\u0026#34; del hyper-v.txt Dism /online /enable-feature /featurename:Microsoft-Hyper-V -All /LimitAccess /ALL pause ä½¿ç”¨å‘½ä»¤æç¤ºç¬¦æˆ–powershellè¿è¡Œè¿™ä¸ªè„šæœ¬å³å¯è¿›è¡Œå®‰è£…\n2. åˆ›å»ºhyper-v è™šæ‹Ÿäº¤æ¢æœºç½‘ç»œ ç„¶åè¿è¡Œhyper-vå,åœ¨å³è¾¹ç‚¹åˆ›å»ºè™šæ‹Ÿäº¤æ¢æœº,é€‰æ‹©å¤–éƒ¨ç½‘ç»œ,å¹¶è®¾ç½®wsléœ€è¦ä½¿ç”¨çš„ç‰©ç†ç½‘å¡, å°†åç§°ä¿®æ”¹ä¸ºè‡ªå·±æƒ³å®šä¹‰çš„åç§°,æˆ‘è¿™é‡Œå‘½åä¸º wsl-net\nåœ¨powershell ä½¿ç”¨Get-NetAdapter,æˆ–ncpa.cplå‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ›å»ºçš„è™šæ‹Ÿæœºç½‘ç»œåç§°ä¸º vEthernet(wsl-net), ä¸ºäº†æ–¹ä¾¿é…ç½®,æˆ‘ä»¬é‡å‘½åå®ƒä¸ºwsl-net (ç›´æ¥åœ¨ncpa.cplæ‰“å¼€çš„ç½‘ç»œé€‚é…å™¨çª—å£å³é”®é‡å‘½åå³å¯)\n1 2 3 4 PS C:\\WINDOWS\\system32\u0026gt; Get-NetAdapter Name InterfaceDescription ... vEthernet (wsl-net) Hyper-V Virtual Ethernet Adapter #3 ... ä¿®æ”¹å®Œè¿˜æ˜¯åœ¨powershellä¸­å‘½ä»¤Get-NetAdapteréªŒè¯ä¸€ä¸‹\n1 2 3 4 PS C:\\WINDOWS\\system32\u0026gt; Get-NetAdapter Name InterfaceDescription ... wsl-net Hyper-V Virtual Ethernet Adapter #3 ... 3. é…ç½®wslé…ç½®æ–‡ä»¶,ä½¿ç”¨è™šæ‹Ÿäº¤æ¢æœºç½‘ç»œ åœ¨é…ç½®ä¹‹å‰,è¿›å…¥wslä¸­æŸ¥çœ‹ç½‘ç»œä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 DESKTOP-E31FB3M:/mnt/host/c/Users/kokbi# ip a 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc mq state UP qlen 1000 link/ether 00:15:5d:b5:ac:4f brd ff:ff:ff:ff:ff:ff inet 172.28.219.98/20 brd 172.28.223.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::215:5dff:feb5:ac4f/64 scope link valid_lft forever preferred_lft forever 3.1 win11 åœ¨ç”¨æˆ·ç›®å½•ä¸­ä¿®æ”¹.wslconfig (å¦‚æœæ²¡æœ‰åˆ™åˆ›å»º)\n1 2 3 4 5 [WSL2] networkingMode=bridged vmSwitch=external dhcp=false localhostForwarding=True 3.2 win10 å‚è€ƒ\nwin10ä¸æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶ç›´æ¥é…ç½®è™šæ‹Ÿäº¤æ¢æœºç½‘ç»œ,æ‰€ä»¥åªèƒ½é€šè¿‡ä¿®æ”¹é»˜è®¤çš„wslç½‘ç»œæ¥è¾¾åˆ°æ¡¥æ¥çš„ç›®çš„\nåœ¨è¶…çº§ç®¡ç†å‘˜æƒé™çš„powershellä¸­æ‰§è¡Œ\n1 Set-VMSwitch -name \u0026#34;WSL\u0026#34; -NetAdapterName \u0026#34;WLAN\u0026#34; -AllowManagementOS $true WSLä¸ºé»˜è®¤çš„wslç½‘ç»œ,\nWLAN ä¸ºä½ æƒ³è¦æ¡¥æ¥çš„ç½‘ç»œ\nåœ¨wsl ä¸­æ‰§è¡Œåˆ·æ–°ipåœ°å€å’Œdhcpè·å–ipåœ°å€\n1 2 ip addr flush dev eth0 dhclient eth0 å¦‚æœéœ€è¦ç½‘ä¸Šå†²æµª,è¿˜éœ€è¦é…ç½®ä¸€ä¸‹dns\n1 sudo echo \u0026#34;nameserver 8.8.8.8\u0026#34; \u0026gt; /etc/resolv.conf å¦‚æœæƒ³åˆ‡æ¢å›NATç½‘ç»œ ,è®¾ç½®åœ¨å…·æœ‰è¶…çº§ç®¡ç†å‘˜æƒé™çš„powershellä¸­æ‰§è¡Œ\n1 Set-VMSwitch WSL -SwitchType Internal æ›´è¿›ä¸€æ­¥è®¾ç½®åˆ°wslé‡Œçš„/etc/wsl.conf,åœ¨wslå¯åŠ¨æ—¶å°†è‡ªåŠ¨æ‰§è¡Œè„šæœ¬\n1 2 3 4 5 [boot] systemd=true command = \u0026#34;/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/powershell.exe -Command \u0026#39;Set-VMSwitch -name \u0026#34;WSL\u0026#34; -NetAdapterName \u0026#34;WLAN\u0026#34; -AllowManagementOS $true\u0026#39;; ip addr flush dev eth0; dhclient eth0\u0026#34; [network] generateResolvConf = false ç­‰éªŒè¯, å¦‚æœä¿®æ”¹äº†é»˜è®¤çš„wslç½‘ç»œ,åœ¨wsl å…³æ‰,é‡å¯ç”µè„‘åä¼šé€ æˆçš„å½±å“éœ€è¦è§‚å¯Ÿ,\nä»ä¸Šæ–¹githubçš„é“¾æ¥ä¸­çœ‹ä»–ä»¬åœ¨wslå¼€å¯åæ‰ä¿®æ”¹ä¸ºæ¡¥æ¥,å¹¶åœ¨wsl shutdownå,é©¬ä¸Šå°±æŠŠç½‘ç»œä¿®æ”¹å›NATæ¨¡å¼äº†.\n", 
        "url": "\/post\/wsl2%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%A1%A5%E6%8E%A5%E5%88%B0%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1\/"
    },
    
    "\/tags\/blutooth\/": {
        "title": "BLUTOOTH",
        "tags": [],
        "content": "", 
        "url": "\/tags\/blutooth\/"
    },
    
    "\/tags\/gpio\/": {
        "title": "GPIO",
        "tags": [],
        "content": "", 
        "url": "\/tags\/gpio\/"
    },
    
    "\/tags\/i2c\/": {
        "title": "I2C",
        "tags": [],
        "content": "", 
        "url": "\/tags\/i2c\/"
    },
    
    "\/tags\/nvme\/": {
        "title": "NVME",
        "tags": [],
        "content": "", 
        "url": "\/tags\/nvme\/"
    },
    
    "\/post\/raspberry-pi5-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/": {
        "title": "raspberry-pi5-å¼€å‘ç¬”è®°",
        "tags": ["C\u002b\u002b","RaspberryPI 5","I2C","GPIO","NVME","BLUTOOTH",],
        "content": " 2024/07/27 æ·»åŠ nvme,bluetoothcli ç›¸å…³å†…å®¹ 2024/10/26 æ·»åŠ ä½¿ç”¨épdç”µæºé‡åˆ°çš„Usbç”µæµé—®é¢˜ 2024/12/14æ›´æ–°i2c å†™å…¥eeprom , å®šåˆ¶å¯åŠ¨åŠ¨ç”»å’Œå¼€å§‹èœå•å›¾æ ‡ 0. å‰è½¦ä¹‹é‰´ 0.1 glibc å…¼å®¹æ€§é—®é¢˜ åˆšå¼€å§‹çš„æ—¶å€™ï¼Œpi5çš„æ¿å­ç”¨äº†å®˜æ–¹çš„é•œåƒï¼Œå³ Debian 12 bookworm. ä½†æ˜¯äº¤å‰ç¼–è¯‘çš„é•œåƒä½¿ç”¨äº†Ubuntu 23.10 mantic, äº¤å‰ç¼–è¯‘äº†Qt5 å’Œç¨‹åºåï¼Œæ”¾åˆ°æ¿å­ä¸Šè¿è¡Œæ—¶ï¼Œæç¤ºglibcç‰ˆæœ¬ä¸å…¼å®¹ï¼Œ æ˜¯å› ä¸º bookwormå’Œubuntu 23.10çš„ libc å’Œlibcxxç‰ˆæœ¬ä¸åŒå¯¼è‡´ï¼Œubuntu23.10 2.38ï¼Œ bookworm 2.36ï¼Œåé¢æ¿å­å’Œäº¤å‰ç¼–è¯‘çš„dockeré•œåƒç»Ÿä¸€ä¹‹åå°±okäº†\n0.2 Qtç¨‹åºæ˜¾ç¤ºä¸æ­£å¸¸ï¼ŒåŠé€æ˜çš„å›¾å½¢ä¸æ˜¾ç¤ºï¼Œçª—å£æœ‰é»‘è¾¹ è™½ç„¶Qtæ­£å¸¸ç¼–è¯‘è¿‡äº†ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°æ¿å­ä¸Šåï¼Œç¨‹åºæ˜¾ç¤ºä¸æ­£å¸¸ï¼Œåç»æ’æŸ¥ï¼Œæ˜¯ç”±äº Qté…ç½® EGL on X11å¤±è´¥ï¼Œéœ€è¦åœ¨ç¼–è¯‘é…ç½®/src/qt5/qtbase/mkspecs/devices/linux-rasp-pi4-v3d-g++/qmake.confrä¸­æ·»åŠ ç¼–è¯‘é€‰é¡¹ -fpermissive\n1 QMAKE_CXXFLAGS = $$QMAKE_CFLAGS -fpermissive å¦åˆ™qt æºç ä¸­çš„configureå·¥å…· ç”Ÿæˆçš„EGL on X11 çš„å•å…ƒæµ‹è¯•ä¼šæ‰§è¡Œå¤±è´¥ï¼Œå¯¼è‡´é…ç½®å¤±è´¥\n0.3 æ£€æµ‹ä¸åˆ°I2C åˆé‡0.1ä¸­æ‰€è¿°é—®é¢˜æ—¶ï¼Œæˆ‘æŠŠæ¿å­å’Œdockerç¯å¢ƒçš„ç³»ç»Ÿéƒ½ åˆ·æˆubuntu 23.10ï¼Œä¹‹åæ¿å­ä¸€ç›´æ£€æµ‹ä¸åˆ°i2cï¼Œå«å¤§å¸ˆå¸®å¿™æ£€æµ‹ç¡¬ä»¶æ¥çº¿é—®é¢˜ï¼Œæ— æœï¼Œç”¨ç¤ºæ³¢å™¨æµ‹é‡æ³¢å½¢ï¼Œæ­£å¸¸ã€‚å…¶ä»–ç¡¬ä»¶æ²¡æœ‰æµ‹è¯•ï¼Œä½†åº”è¯¥ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œæ˜¯å› ä¸ºå®˜æ–¹è™½ç„¶ç»™äº†ubuntu23.10çš„é•œåƒï¼Œä½†å´æ²¡æœ‰é¢„è£…ç¡¬ä»¶ç›¸å…³çš„å·¥å…·ï¼Œä¾‹å¦‚i2cdetectï¼Œ äºæ˜¯æˆ‘ç”¨aptå®‰è£…äº†ä¸€ä¸ªï¼Œäºæ˜¯ä¸èƒ½æ­£å¸¸å·¥ä½œ ï¼Œå¦‚æœå…‹éš†å†…æ ¸æºç ï¼Œå•ç‹¬ç¼–è¯‘å·¥å…·åº”è¯¥ä¹Ÿå¯ä»¥è¡Œå¾—é€šï¼Œä½†æˆ‘è§£å†³çš„æ–¹æ³•ç®€å•ç²—æš´ï¼ŒæŠŠæ¿å­å’Œdockerçš„ç³»ç»Ÿéƒ½æ¢ä¸ºbookwormäº†ï¼Œbookwormçš„å·¥å…·æ˜¯é½å…¨çš„ã€‚\n0.4 GPIO C++ç¼–ç åï¼Œä¸èƒ½æ­£å¸¸åˆå§‹åŒ–ï¼Œæç¤ºç³»ç»Ÿä¸æ˜¯æ ‘è“æ´¾ ç”±äº PI5 åšäº†å¾ˆå¤§çš„å˜æ›´ï¼Œæ‰€ä»¥GPIOç›¸å…³çš„ç³»ç»Ÿå·¥å…·è™½ç„¶å†…ç½®äº†ï¼Œä½†å¹¶ä¸èƒ½é€‚ç”¨ äºpi5ï¼Œpigpioåœ¨ /usr/includeå’Œ/usr/libä¸­å¤´æ–‡ä»¶åº“å¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼Œé“¾æ¥ï¼Œä½†ç¼–å¥½çš„ç¨‹åºä¼šæç¤ºåˆå§‹åŒ–å¤±è´¥ï¼Œè§£å†³çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¼€å§‹çš„æº libgpiodï¼Œä¸è¦ä½¿ç”¨pigpio\nhttps://github.com/joan2937/pigpio/issues/589\n1. I2C æ ‘è“æ³¢5æ”¯æŒ3è·¯i2cé€šè®¯ï¼Œé»˜è®¤åªæ‰“å¼€ ä¸€ç»„ï¼Œå³pin3,pin5ï¼Œé€šè¿‡ä¿®æ”¹/boot/fireware/config.txtå¯ä»¥æ‰“å¼€å…¶ä»–ä¸¤è·¯ï¼Œåé¢ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œç›®å‰æˆ‘çš„é¡¹ç›®åªç”¨äº†ä¸€è·¯ï¼Œæ‰€ä»¥ä½¿ç”¨é»˜è®¤é…ç½® å³å¯ã€‚\nä¹Ÿå¯ä»¥å‚è€ƒä¸‹å›¾, æ ‡æ³¨4çš„æ˜¯åªæœ‰raspberry pi 4æ‰æœ‰çš„åŠŸèƒ½, æ²¡æœ‰æ ‡æ³¨4çš„,è¡¨ç¤ºraspberry pi 5ä¹Ÿå¯ä»¥ä½¿ç”¨\n2.1é…ç½® 1 2 sudo raspi-config æ‰¾åˆ°i2cçš„é€‰é¡¹ï¼Œåˆ‡æ¢ä¸ºæ‰“å¼€ ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹é…ç½® æ–‡ä»¶\n/boot/fireware/config.txt\n1 2 3 4 5 6 7 8 #çœç•¥ dtparam=i2c_arm=on#é»˜è®¤ dtparam=spi=on #é»˜è®¤ #é…ç½®i2c 0 ä¸ºç®¡è„šxå’Œy ,xyéœ€è¦æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ç¡®å®šæ”¯æŒi2cçš„ç®¡è„šå·å†é…ç½® #dtoverlay=i2c0,pins_x_y #çœç•¥ 2.2 bookwormé…å¥—i2cå·¥å…· ç¼–ç ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›å·¥å…·éªŒè¯ä¸€ä¸‹ è®¾å¤‡æ˜¯å¦æ­£å¸¸\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 # æšä¸¾i2c æ€»çº¿ dv@rsap5:/opt/dv_app $ i2cdetect -l i2c-11 i2c 107d508200.i2c I2C adapter i2c-12 i2c 107d508280.i2c I2C adapter #ç”±äºæ²¡æœ‰å¼€å…‰æœºï¼Œæ‰€ä»¥i2c-1æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ # æŸ¥çœ‹i2c-1 ä¸Šçš„è®¾å¤‡ dv@rsap5:/opt/dv_app $ i2cdetect -y 1 0 1 2 3 4 5 6 7 8 9 a b c d e f 00: -- -- -- -- -- -- -- -- 10: -- -- -- -- -- -- -- -- -- -- -- 1b -- -- -- -- 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 70: -- -- -- -- -- -- -- -- #å¦‚æœå…‰æœºæœ‰ä¸Šç”µçš„æ”¾åœ¨ï¼Œåº”è¯¥æ˜¯è¿™æ ·ï¼Œ1bè¡¨ç¤ºå…‰æœºçš„è®¾å¤‡æ€»çº¿åœ°å€ # æŸ¥çœ‹è®¾å¤‡0x1bä¸­å¯„å­˜å™¨çš„å€¼ i2cdump -y 1 0x1b # è·å–è®¾å¤‡0x1bä¸Šå¯„å­˜å™¨0x2ffçš„å€¼ i2cget -y 1 0x1b 0x2f # è®¾ç½®i2cä¸Š0x1bè®¾å¤‡0x2få¯„å­˜å™¨çš„å€¼ä¸º0xff i2cset -y 1 0x1b 0x2f 0xff 2.3 ç¼–ç  å¦‚æœä½¿ç”¨bookwormï¼Œ è¿™äº›å¤´æ–‡ä»¶ åº”è¯¥å°±åœ¨ç³»ç»Ÿç›®å½•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 #include \u0026lt;i2c/smbus.h\u0026gt; #include \u0026lt;linux/i2c-dev.h\u0026gt; #include \u0026lt;sys/ioctl.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; void rasp_I2c_helper::private_read() { int file; int adapter_nr = 1; char filename[20]; snprintf(filename, 19, \u0026#34;/dev/i2c-%d\u0026#34;, adapter_nr); file = open(filename, O_RDWR); if (file \u0026lt; 0) { exit(1); } int addr = 0x40; if (ioctl(file, I2C_SLAVE, addr) \u0026lt; 0) { exit(1); } __u8 reg = 0x10; __s32 res; res = i2c_smbus_read_word_data(file, reg); if (res \u0026lt; 0) { /* ERROR HANDLING: i2c transaction failed */ return; } else { /* res contains the read word */ } } void rasp_I2c_helper::private_write(l) { prism::qt::core::QEventLoopGuard raii(el) ; //å…‰æœºå‘½ä»¤ std::vector\u0026lt;uint8_t\u0026gt; writeMode = {0x05,0x01}; // solid color std::vector\u0026lt;uint8_t\u0026gt; writeRgbLedDisable = {0x52,0x00}; std::vector\u0026lt;uint8_t\u0026gt; writeRgbLedEnable = {0x52,0x07}; int file; int adapter_nr = 1; char filename[20]; snprintf(filename, 19, \u0026#34;/dev/i2c-%d\u0026#34;, adapter_nr); file = open(filename, O_RDWR); if (file \u0026lt; 0) { ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;i2c open error, dev: \u0026#34; \u0026lt;\u0026lt; filename; return; } ZLOGI(tag_) \u0026lt;\u0026lt; \u0026#34;i2c open success, dev: \u0026#34; \u0026lt;\u0026lt; filename; int addr = 0x1b; if (ioctl(file, I2C_SLAVE, addr) \u0026lt; 0) { ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;i2c ioctl error, addr: 0x\u0026#34; \u0026lt;\u0026lt; std::hex \u0026lt;\u0026lt; addr; return; } ZLOGI(tag_) \u0026lt;\u0026lt; \u0026#34;i2c ioctl success, addr: 0x\u0026#34; \u0026lt;\u0026lt; std::hex \u0026lt;\u0026lt; addr; //writeMode { if (write(file, writeMode.data(), writeMode.size()) != static_cast\u0026lt;int\u0026gt;(writeMode.size())) { ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write error:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeMode\u0026#34;; return; } ZLOGI(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write success:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeMode\u0026#34;; } //writeRgbLedEnable { if (write(file, writeRgbLedEnable.data(), writeRgbLedEnable.size()) != static_cast\u0026lt;int\u0026gt;(writeRgbLedEnable.size())) { ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write error:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeRgbLedEnable\u0026#34;; return; } ZLOGI(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write success:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeRgbLedEnable\u0026#34;; } std::this_thread::sleep_for(std::chrono::milliseconds(3000)); //writeRgbLedDisable { if (write(file, writeRgbLedDisable.data(), writeRgbLedDisable.size()) != static_cast\u0026lt;int\u0026gt;(writeRgbLedDisable.size())) { ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write error:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeRgbLedDisable\u0026#34;; return; } ZLOGI(tag_) \u0026lt;\u0026lt; \u0026#34;i2c write success:\u0026#34; \u0026lt;\u0026lt; \u0026#34;writeRgbLedDisable\u0026#34;; } std::this_thread::sleep_for(std::chrono::milliseconds(150)); close(file); } 2. GPIO 2.1 bookwormé…å¥—GPIOå·¥å…· æŸ¥çœ‹pinè„šä½ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 #æŸ¥çœ‹ç®¡è„šä½ç½®, dv@rsap5:/opt/dv_app $ pinout Description : Raspberry Pi 5B rev 1.0 Revision : d04170 SoC : BCM2712 RAM : 8GB Storage : MicroSD USB ports : 4 (of which 2 USB3) Ethernet ports : 1 (1000Mbps max. speed) Wi-fi : True Bluetooth : True Camera ports (CSI) : 2 Display ports (DSI): 2 ,--------------------------------. | oooooooooooooooooooo J8 : +==== | 1ooooooooooooooooooo : |USB2 | Wi Pi Model 5B V1.0 fan +==== | Fi +---+ +---+ | | |RAM| |RP1| +==== ||p +---+ +---+ |USB3 ||c ------- +==== ||i SoC |c|c J14 | ( ------- J7|s|s 12 +====== | J2 bat uart 1|i|i oo | Net | pwr\\..|hd|...|hd|o|1|0 +====== `-| |-1o|m0|---|m1|--------------\u0026#39; J8: 3V3 (1) (2) 5V GPIO2 (3) (4) 5V GPIO3 (5) (6) GND GPIO4 (7) (8) GPIO14 GND (9) (10) GPIO15 GPIO17 (11) (12) GPIO18 GPIO27 (13) (14) GND GPIO22 (15) (16) GPIO23 3V3 (17) (18) GPIO24 GPIO10 (19) (20) GND GPIO9 (21) (22) GPIO25 GPIO11 (23) (24) GPIO8 GND (25) (26) GPIO7 GPIO0 (27) (28) GPIO1 GPIO5 (29) (30) GND GPIO6 (31) (32) GPIO12 GPIO13 (33) (34) GND GPIO19 (35) (36) GPIO16 GPIO26 (37) (38) GPIO20 GND (39) (40) GPIO21 J2: RUN (1) GND (2) J7: COMPOSITE (1) GND (2) J14: TR01 TAP (1) (2) TR00 TAP TR03 TAP (3) (4) TR02 TAP For further information, please refer to https://pinout.xyz/ æŸ¥çœ‹Pinè„šåŠŸèƒ½,çŠ¶æ€ ä¾‹å¦‚é…ç½®äº†äº†ä¸²å£å,è¿™é‡Œä¼šæ˜¾ç¤ºå“ªäº›pinè„šä¸ºuart tx æˆ– rx\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 dv@rsap5:/opt/dv_app $ pinctrl 0: ip pu | hi // ID_SDA/GPIO0 = input 1: ip pu | hi // ID_SCL/GPIO1 = input 2: no pu | -- // GPIO2 = none 3: no pu | -- // GPIO3 = none 4: no pu | -- // GPIO4 = none 5: no pu | -- // GPIO5 = none 6: ip pu | hi // GPIO6 = input 7: ip pu | hi // GPIO7 = input 8: op dh pu | hi // GPIO8 = output 9: op dl pd | lo // GPIO9 = output 10: no pd | -- // GPIO10 = none 11: no pd | -- // GPIO11 = none 12: no pd | -- // GPIO12 = none 13: no pd | -- // GPIO13 = none 14: no pd | -- // GPIO14 = none 15: no pd | -- // GPIO15 = none 16: no pd | -- // GPIO16 = none 17: no pd | -- // GPIO17 = none 18: no pd | -- // GPIO18 = none 19: no pd | -- // GPIO19 = none 20: no pd | -- // GPIO20 = none 21: no pd | -- // GPIO21 = none 22: no pd | -- // GPIO22 = none 23: no pd | -- // GPIO23 = none 24: no pd | -- // GPIO24 = none 25: no pd | -- // GPIO25 = none 26: no pd | -- // GPIO26 = none 27: no pd | -- // GPIO27 = none 28: ip pd | lo // PCIE_RP1_WAKE/GPIO28 = input 29: no pu | hi // FAN_TACH/GPIO29 = none 30: no pu | -- // HOST_SDA/GPIO30 = none 31: no pu | -- // HOST_SCL/GPIO31 = none 32: op dh pd | hi // ETH_RST_N/GPIO32 = output 33: no pd | lo // GPIO33 = none 34: op dl pd | lo // CD0_IO0_MICCLK/GPIO34 = output 35: no pd | lo // CD0_IO0_MICDAT0/GPIO35 = none 36: no pd | lo // RP1_PCIE_CLKREQ_N/GPIO36 = none 37: no pd | lo // GPIO37 = none 38: ip pd | hi // CD0_SDA/GPIO38 = input 39: ip pd | hi // CD0_SCL/GPIO39 = input 40: ip pd | hi // CD1_SDA/GPIO40 = input 41: ip pd | hi // CD1_SCL/GPIO41 = input 42: a2 pd | hi // USB_VBUS_EN/GPIO42 = VBUS_EN1 43: a2 pu | hi // USB_OC_N/GPIO43 = VBUS_OC1 44: op dh pd | hi // RP1_STAT_LED/GPIO44 = output 45: a0 pd | hi // FAN_PWM/GPIO45 = PWM1_CHAN3 46: op dl pd | lo // CD1_IO0_MICCLK/GPIO46 = output 47: no pd | lo // 2712_WAKE/GPIO47 = none 48: no pd | lo // CD1_IO1_MICDAT1/GPIO48 = none 49: op dh pd | hi // EN_MAX_USB_CUR/GPIO49 = output 50: no pd | -- // GPIO50 = none 51: no pd | -- // GPIO51 = none 52: no pu | -- // GPIO52 = none 53: no pu | hi // GPIO53 = none 100: ip pd | lo // GPIO0 = input 101: op dh pu | hi // 2712_BOOT_CS_N/GPIO1 = output 102: a6 pn | hi // 2712_BOOT_MISO/GPIO2 = VC_SPI0_MISO 103: a5 pn | hi // 2712_BOOT_MOSI/GPIO3 = VC_SPI0_MOSI 104: a6 pn | lo // 2712_BOOT_SCLK/GPIO4 = VC_SPI0_SCLK 105: ip pd | lo // GPIO5 = input 106: ip pd | lo // GPIO6 = input 107: ip pd | lo // GPIO7 = input 108: ip pd | lo // GPIO8 = input 109: ip pd | lo // GPIO9 = input 110: ip pd | lo // GPIO10 = input 111: ip pd | lo // GPIO11 = input 112: ip pd | lo // GPIO12 = input 113: ip pd | lo // GPIO13 = input 114: a1 pd | lo // PCIE_SDA/GPIO14 = SPI_S_MOSI_OR_BSC_S_SDA 115: a1 pd | lo // PCIE_SCL/GPIO15 = SPI_S_SCK_OR_BSC_S_SCL 116: ip pd | lo // GPIO16 = input 117: ip pd | lo // GPIO17 = input 118: ip pd | lo // GPIO18 = input 119: ip pd | lo // GPIO19 = input 120: ip pu | hi // PWR_GPIO/GPIO20 = input 121: ip pd | lo // 2712_G21_FS/GPIO21 = input 122: ip pd | lo // GPIO22 = input 123: ip pd | lo // GPIO23 = input 124: a3 pn | lo // BT_RTS/GPIO24 = UART_RTS_0 125: a4 pu | lo // BT_CTS/GPIO25 = UART_CTS_0 126: a4 pn | hi // BT_TXD/GPIO26 = UART_TXD_0 127: a4 pu | hi // BT_RXD/GPIO27 = UART_RXD_0 128: op dh pd | hi // WL_ON/GPIO28 = output 129: op dh pd | hi // BT_ON/GPIO29 = output 130: a4 pn | lo // WIFI_SDIO_CLK/GPIO30 = SD2_CLK 131: a4 pu | hi // WIFI_SDIO_CMD/GPIO31 = SD2_CMD 132: a4 pd | hi // WIFI_SDIO_D0/GPIO32 = SD2_DAT0 133: a3 pu | hi // WIFI_SDIO_D1/GPIO33 = SD2_DAT1 134: a4 pn | hi // WIFI_SDIO_D2/GPIO34 = SD2_DAT2 135: a3 pn | hi // WIFI_SDIO_D3/GPIO35 = SD2_DAT3 200: ip pd | hi // RP1_SDA/AON_GPIO0 = input 201: ip pd | hi // RP1_SCL/AON_GPIO1 = input 202: op dh pd | hi // RP1_RUN/AON_GPIO2 = output 203: op dh pd | hi // SD_IOVDD_SEL/AON_GPIO3 = output 204: op dh pd | hi // SD_PWR_ON/AON_GPIO4 = output 205: a6 pu | lo // SD_CDET_N/AON_GPIO5 = SD_CARD_PRES_G 206: ip pu | hi // SD_FLG_N/AON_GPIO6 = input 207: ip pd | lo // AON_GPIO7 = input 208: ip pd | lo // 2712_WAKE/AON_GPIO8 = input 209: op dh pd | hi // 2712_STAT_LED/AON_GPIO9 = output 210: ip pd | lo // AON_GPIO10 = input 211: ip pd | lo // AON_GPIO11 = input 212: ip pd | lo // PMIC_INT/AON_GPIO12 = input 213: a3 pd | hi // UART_TX_FS/AON_GPIO13 = VC_TXD0 214: a3 pd | lo // UART_RX_FS/AON_GPIO14 = VC_RXD0 215: ip pd | lo // AON_GPIO15 = input 216: ip pu | hi // AON_GPIO16 = input 232: a1 -- | hi // HDMI0_SCL/AON_SGPIO0 = HDMI_TX0_BSC_SCL 233: a1 -- | hi // HDMI0_SDA/AON_SGPIO1 = HDMI_TX0_BSC_SDA 234: a1 -- | hi // HDMI1_SCL/AON_SGPIO2 = HDMI_TX1_BSC_SCL 235: a1 -- | hi // HDMI1_SDA/AON_SGPIO3 = HDMI_TX1_BSC_SDA 236: a2 -- | hi // PMIC_SCL/AON_SGPIO4 = BSC_M2_SCL 237: a2 -- | hi // PMIC_SDA/AON_SGPIO5 = BSC_M2_SDA gpiod å¸¸ç”¨æŒ‡ä»¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #libgpiod radmeä¸­æœ‰ä½¿ç”¨æ–¹æ³•ï¼Œraspberry pi 5 å†…ç½®äº†å®ƒhttps://github.com/brgl/libgpiod gpiodetect #æŸ¥çœ‹å¯ç”¨çš„gpioèŠ¯ç‰‡ gpioinfo 4 #æŸ¥çœ‹ç¬¬4å—èŠ¯ç‰‡ç®¡è„š gpioget 4 29 #é…ç½®ç¬¬4å—èŠ¯ç‰‡ç¬¬29è„šä¸ºinput,å¹¶æ‰“å°å…¶ç”µå¹³çŠ¶æ€ gpioset 4 29=0 #ç½®ç¬¬4å—èŠ¯ç‰‡ç¬¬29è„šä¸ºoutput,å¹¶æ‰“å°å…¶ç”µå¹³çŠ¶æ€ #ä¸‹é¢è¿™ç§æ–¹æ³•æ˜¯ä¸æ¨èçš„æ–¹æ³•ï¼Œsysctlçš„æ–¹å¼å·²ç»è¢«éƒ¨åˆ†ç³»ç»Ÿç¦ç”¨äº†,åŒ…æ‹¬pi5 #pi4å¯èƒ½è¿˜èƒ½ç”¨ #/sys/class/gpio/export(åªè¯») ä¸­å†™å…¥å¯¼å‡ºçš„ç®¡è„šå· # echo 26 \u0026gt;\u0026gt; cat /sys/kernel/debug/gpio #å†™å…¥æˆåŠŸåä¼šå¤šä¸€ä¸ªæ–‡ä»¶ #/sys/class/gpio/gpio26/value #è¿™ä¸ªæ–‡ä»¶ çš„å€¼å°±æ˜¯ç®¡è„šçš„çŠ¶æ€ #å¯ä»¥é€šè¿‡ cat /sys/kernel/debug/gpio æ‰“å°æ‰€æœ‰ç®¡è„šä¿¡æ¯çŠ¶æ€ï¼Œ 2.2 ç¼–è¯‘libgpiod gpiodæ˜¯ä¸€ä¸ªcè¯­è¨€çš„åº“ï¼Œä¸è¿‡æœ‰å¤šç§è¯­è¨€çš„ç»‘å®šï¼ŒåŒ…æ‹¬c++\nä¸¤è€…éƒ½æ˜¯LGPL, 2.1ä¸­ä»‹ç»çš„å¥½äº›å·¥å…·åˆ™æ˜¯GPL, å¯ä»¥è‡ªå·±ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨bookwormå†…ç½®çš„\næˆ‘ä»¬é¡¹ç›®ä½¿ç”¨c++ç»‘å®šï¼Œc++å†™çš„ä»£ç ç›¸å¯¹cæ¥è¯´ä¼šæ¯”è¾ƒé¢å‘å¯¹è±¡\n1 2 3 mkdir -p ~/source/repos cd ~/source/repos git clone https://github.com/brgl/libgpiod.git é…ç½®\n1 ./autogen.sh --enable-tools=yes --prefix=/usr é…ç½®å¯èƒ½ä¼šå¤±è´¥ï¼Œä¼šæç¤ºéœ€è¦å®‰è£…å‡ ä¸ªåº“ï¼Œ å®‰è£…å¥½å°±å¯ä»¥æ­£å¸¸é…ç½®äº†\nç„¶åè¿›å…¥bindings/cxx ç¼–è¯‘ï¼Œå®‰è£…\n1 2 3 cd bindings/cxx sudo make sudo make install å®‰è£…åéœ€è¦æ‰‹åŠ¨æŠŠcxxç»‘å®šçš„å¤´æ–‡ä»¶å¤åˆ¶è¿›å»/usr/includeé‡Œï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å§¿åŠ¿ä¸å¯¹ï¼Œåªå¤åˆ¶äº†cçš„å¤´æ–‡ä»¶\nç„¶åæŠŠsysrootåŒæ­¥åˆ°äº¤å‰ç¼–è¯‘çš„dockeré•œåƒä¸­å°±å¯ä»¥ç¼–ç äº†\n2.3 ç¼–ç  github repoä¸­ä¹Ÿæœ‰exampleï¼Œæˆ‘å°±ç›´æ¥å¤åˆ¶æˆ‘å·¥ç¨‹é‡Œçš„äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 #include \u0026lt;/sysroot/usr/include/gpiod.hpp\u0026gt; void rasp_gpio_helper::async_watch_line_value() { /* * Assume a button connecting the pin to ground, so pull it up and * provide some debounce. */ auto request = ::gpiod::chip(chip_path) .prepare_request() .set_consumer(\u0026#34;async-watch-line-value\u0026#34;) .add_line_settings( il_ofsets, ::gpiod::line_settings() .set_direction( ::gpiod::line::direction::INPUT) .set_edge_detection( ::gpiod::line::edge::BOTH) .set_bias(::gpiod::line::bias::PULL_UP) .set_debounce_period( std::chrono::milliseconds(10))) .do_request(); gpiod::edge_event_buffer event_buffer = gpiod::edge_event_buffer(1); struct pollfd poll_fd; poll_fd.fd = request.fd(); poll_fd.events = POLLIN; while (m_poll_flag) { int ret = poll(\u0026amp;poll_fd,1,1); if(ret != -1) { if(poll_fd.revents \u0026amp; POLLPRI) { request.read_edge_events(event_buffer); for (const gpiod::edge_event\u0026amp; event : event_buffer) { ::std::cout \u0026lt;\u0026lt; \u0026#34;offset: \u0026#34; \u0026lt;\u0026lt; event.line_offset() \u0026lt;\u0026lt; \u0026#34; type: \u0026#34; \u0026lt;\u0026lt; ::std::setw(7) \u0026lt;\u0026lt; ::std::left \u0026lt;\u0026lt; edge_event_type_str(event) \u0026lt;\u0026lt; \u0026#34; event #\u0026#34; \u0026lt;\u0026lt; event.line_seqno() \u0026lt;\u0026lt; ::std::endl; } } } else ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;async watch line value poll error\u0026#34;; } } void rasp_gpio_helper::async_write_line_value() { auto request = ::gpiod::chip(chip_path) .prepare_request() .set_consumer(\u0026#34;toggle-multiple-line-values\u0026#34;) .add_line_settings( ol_ofsets, ::gpiod::line_settings().set_direction( ::gpiod::line::direction::OUTPUT)) .set_output_values(o_values) .do_request(); struct pollfd poll_fd; poll_fd.fd = request.fd(); poll_fd.events = POLLOUT; while(m_poll_flag) { int ret = poll(\u0026amp;poll_fd,1,1); if(ret != -1) { request.set_values(ol_ofsets, o_values); } else ZLOGE(tag_) \u0026lt;\u0026lt; \u0026#34;async watch line value poll error\u0026#34;; } } 2.4 é…ç½®æƒé™ 1 2 3 cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/udev/rules.d/99-gpio-rules SUBSYSTEM==\u0026#34;gpio\u0026#34;, KERNEL==\u0026#34;gpiochip4\u0026#34;, OWNER=\u0026#34;dv\u0026#34;, GROUP=\u0026#34;root\u0026#34;, MODE=\u0026#34;0660\u0026#34; EOF 3 . PWMè°ƒåˆ¶è„‰å†² 3.1 Installation On the Raspberry Pi, add dtoverlay=pwm-2chan to /boot/config.txt. This defaults to GPIO_18 as the pin for PWM0 and GPIO_19 as the pin for PWM1. Alternatively, you can change GPIO_18 to GPIO_12 and GPIO_19 to GPIO_13 using dtoverlay=pwm-2chan,pin=12,func=4,pin2=13,func2=4. On the Pi 5, use channels 0 and 1 to control GPIO_12 and GPIO13, respectively; use channels 2 and 3 to control GPIO_18 and GPIO_19, respectively On all other models, use channels 0 and 1 to control GPIO-18 and GPIO_19, respectively Reboot your Raspberry Pi. You can check everything is working on running lsmod | grep pwm and looking for pwm_bcm2835 Install this library: sudo pip3 install rpi-hardware-pwm 3.2 Examples For Rpi 1,2,3,4, use chip=0; For Rpi 5, use chip=2\n1 2 3 4 5 6 7 8 9 from rpi_hardware_pwm import HardwarePWM pwm = HardwarePWM(pwm_channel=0, hz=60, chip=0) pwm.start(100) # full duty cycle pwm.change_duty_cycle(50) pwm.change_frequency(25_000) pwm.stop() History The original code is from jdimpson/syspwm, We\u0026rsquo;ve updated it to Python3 and made it look like the RPi.GPIO library\u0026rsquo;s API (but more Pythonic than that.), and we use it in Pioreactor bioreactor system.\n4 . NVMEå¯åŠ¨ 4.1 æ–¹å¼ä¸€:rasp-config ä½¿ç”¨rasp-bianç³»ç»Ÿçš„è¯,æœ‰ä¸€ä¸ªåä¸ºrasp-configçš„å·¥å…·,å¯ä»¥è¿›å…¥ç±»ä¼¼biosçš„ç•Œé¢,é€‰æ‹©ä¸€äº›cliå·¥å…·é…ç½®,å…¶ä¸­æœ‰ä¸€ä¸ªboot order, è¿›å…¥åå¯ä»¥é€‰æ‹©nvmeä¼˜å…ˆäºemmc,sdæˆ–usb\n1 sudo rasp-config é…ç½®æ—¶å¯èƒ½ä¼šå¤±è´¥, æç¤ºè¯´å°‘ä¸€ä¸ªeepromç›¸å…³çš„aptåŒ…æ²¡æœ‰å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬, æŒ‰æç¤ºå®‰è£…ä¸€ä¸‹å°±å¯ä»¥\n4.2 æ–¹å¼ä¸€, ä¿®æ”¹config.txt 4.2.1 pcieæ¥å£æ¥å•ä¸ªè®¾å¤‡ åœ¨/boot/fireware/config.txt æœ«å°¾æ·»åŠ \n1 2 3 4 5 6 7 8 # Add to bottom of /boot/firmware/config.txt dtparam=pciex1 # Note: You could also just add the following (it is an alias to the above line) # dtparam=nvme # Optionally, you can control the PCIe lane speed using this parameter dtparam=pciex1_gen=2 #å•ä¸ªpcieè®¾å¤‡,è¿™é‡Œå¯ä»¥ä½¿ç”¨gen3, gen2å¯è¾¾450mb/s,gen3å¯è¾¾ 900mb/s 42.2 pcie æ¥å£é€šè¿‡switcher æ¥ä¸¤ä¸ªpcieè®¾å¤‡ æˆ‘ä»¬çš„é¡¹ç›®ä¸­,é™¤äº†å¤–æ¥ä¸€å—nvme m2 ssdä¹‹å¤–,è¿˜æœ‰ä¸€ä¸ªpcieæ¥å£çš„ aiæ¨ç†ç¡¬ä»¶æ¨¡å—\nè¿™æ—¶å€™å¦‚æœ3.2.1 pcieä¸­çš„é…ç½®æ–¹æ³•, å¼•å¯¼ç¨‹åºä¼šä¸çŸ¥é“è¦ä»å“ªä¸ªä½ç½®å¯åŠ¨ç³»ç»Ÿ,æ‰€ä»¥/boot/fireware/config.txtéœ€è¦å†æ·»åŠ \n1 2 3 # /boot/fireware/config.txt dtparam=pciex1_no_l0s=on ç„¶åè®¾ç½®EEPROM\n1 2 3 4 sudo â‰ˆrpi-eeprom-config --edit # è¿™å°†ä»¥nano æ‰“å¼€é…ç½®æ–‡ä»¶ç¼–è¾‘ #å¦‚æœæƒ³ä½¿ç”¨vimè¿›è¡Œç¼–è¾‘ #sudo EDITOR=vim rpi-eeprom-config --edit æŠŠåŸæ¥çš„é…ç½®\n1 2 3 4 [all] BOOT_UART=1 POWER_OFF_ON_HALT=0 BOOT_ORDER=0xf461 ä¿®æ”¹ä¸º\n1 2 3 4 5 # Change the BOOT_ORDER line to the following: BOOT_ORDER=0xf416 # Add the following line if using a non-HAT+ adapter: PCIE_PROBE=1 ä½¿ç”¨å®˜æ–¹åˆ·ç³»ç»Ÿçš„å·¥å…·æŠŠç³»ç»Ÿåˆ·è¿›nvmeå, æ¥å¥½ä¹‹å,å¯åŠ¨åå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦æŒ‚è½½åˆ°nvme åŸæ¥ç³»ç»ŸæŒ‚è½½åœ¨emmc sdå¡ä¸Š\n1 2 3 4 5 6 7 8 9 dv@rsap5:/boot/firmware $ df -h Filesystem Size Used Avail Use% Mounted on udev 3.8G 0 3.8G 0% /dev tmpfs 805M 6.2M 799M 1% /run /dev/mmcblk0p2 29G 11G 18G 38% / tmpfs 4.0G 496K 4.0G 1% /dev/shm tmpfs 5.0M 48K 5.0M 1% /run/lock /dev/mmcblk0p1 510M 74M 437M 15% /boot/firmware tmpfs 805M 144K 805M 1% /run/user/1000 æ­£ç¡®ä¿®æ”¹å,ä¸Šé¢çš„mmcblkåº”è¯¥å˜ä¸ºnvme\n5 ä½¿ç”¨éPDç”µæº 5.1 é‡åˆ°çš„é—®é¢˜ raspberry pi 5 å®˜æ–¹çš„ç”µæºæ˜¯å¸¦pdåè®®çš„,ä¼šåå•†ç”µæºå‚æ•°\næˆ‘ä»¬åœ¨æˆ‘ä»¬ä»¥raspberry pi 5 ä¸ºæ ¸å¿ƒæ¿æ‰©å±•äº†åº•æ¿,ç”µæºç”±æˆ‘ä»¬è‡ªå·±æä¾›,é‡åˆ°ä¸¤ä¸ªé—®é¢˜\nusb hubå¤–è®¾ä¾›ç”µä¸è¶³,æœ‰æ¦‚ç‡çš„å¯¼è‡´å´©æºƒ æ¥é€šç”µæºåè¿›å…¥raspbinç³»ç»Ÿåå³ä¸Šè§’æœ‰æ°”æ³¡æç¤ºä½ç”µå‹æŠ¥è­¦, å¦‚æœæ˜¯åœ¨ç³»ç»Ÿä¸­ç›´æ¥ä½¿ç”¨rebootåˆ™ä¸ä¼šæç¤ºä½ç”µå‹æŠ¥è­¦ 5.2 è§£å†³ä¾›ç”µé—®é¢˜ åœ¨è®ºå›ä¸ŠæŸ¥æ‰¾èµ„æ–™å, æ®è¯´åŸå› æ˜¯æ²¡æœ‰pdåå•†,æ‰€ä»¥raspberry ä¼šè®¤ä¸ºæ¥å…¥çš„ç”µæºæ˜¯3Açš„,å¹¶ä¸”åªä¼šç»™4ä¸ªusb æ€»å…±600mAçš„ç”µæµ\nå¦‚æœæƒ³ä½¿ç”¨5Açš„éPDç”µæº,æŒ‰ä¸‹é¢çš„æ­¥éª¤æ·»åŠ é…ç½®å, usbå¤–è®¾å¯ä»¥æœ‰1.6Açš„ç”µæµ\nç¼–è¾‘config.txtåŠ å…¥ä¸€è¡Œ\nusb_max_current_enable=1 æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤é…ç½® eeprom é…ç½®æ¿ä¸Šçš„å‚æ•°æ–‡ä»¶\n1 sudo EDITOR=vim rpi-eeprom-config --edit æ·»åŠ ä¸€è¡Œ\n1 PSU_MAX_CURRENT=5000 è¿™ä¸¤ä¸ªé…ç½®åå¯ä»¥ä½¿ç”¨épdçš„5vç”µæº,ä¸è¿‡ä»ç„¶ä¼šæç¤ºä½ç”µå‹æŠ¥è­¦\nåœ¨config.txtæ·»åŠ å¿½ç•¥æ— è§†è­¦å‘Šçš„é…ç½®,å¯ä»¥å»æ‰ä½ç”µå‹çš„æŠ¥è­¦\n1 avoid_warnings=1 ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æœ‰ä¸€ä¸ªå…¶ä»–çš„ç”µæºæŠ¥è­¦å»ä¸æ‰,é¦–æ¬¡ä¸Šç”µå¼€æœºå,å°†ä¸€ç›´åœç•™åœ¨å³ä¸Šè§’,éœ€è¦äººä¸ºçš„ç‚¹å‡»æ‰æ¶ˆé™¤æ‰\nåªéœ€è¦åœ¨ä»»åŠ¡æ å³é”®è®¾ç½®,æŠŠç”µæºå’Œç”µæ± çš„ä¸¤ä¸ªå›¾æ ‡ç§»é™¤æ‰å°±è¡Œäº†\n5.3 å…¶ä»– ps:\nraspberry piçš„å„ä¸ªç”µå‹ç”µæµæŒ‡æ ‡å¯ä»¥é€šè¿‡vcgencmd pmic_read_adcè·å–\n1 vcgencmd pmic_read_adc [name] #nameæ˜¯å¯é€‰çš„,ä¸å¡«åˆ—å‡ºæ‰€æœ‰ è®ºå›ä¸Šä¸€äº›ä½ç”µå‹ç›¸å…³çš„å¸–\nhttps://forums.raspberrypi.com/viewtopic.php?t=373841\n6. UART 6.1 æŸ¥çœ‹uartç®¡è„š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #æŸ¥çœ‹ dtoverlay -a |grep uart dtoverlay -h uart1 #è¿™é‡Œæ˜¾ç¤ºçš„gpioå·ä¸è¦å½“çœŸï¼Œå…·ä½“ä»pinctrl å‘½ä»¤çœ‹ #ä¸´æ—¶åº”ç”¨ sudo dtoverlay uart0,\u0026lt;param\u0026gt; #æŒä¹…åŒ–ï¼Œå†™åˆ°/boot/fireware/config.txt dtoverlay=uart0 dtoverlay=uart2 #uart0ç®¡è„š8ï¼Œ10 #uart2ç®¡è„š7ï¼Œ29 #ä¸rock5cçš„uart2-m0å’Œuart4-m2 ç®¡è„šå·ä¸€æ · é…ç½® - Raspberry Pi æ–‡æ¡£\n6.2 æµ‹è¯•uartè¯»å†™çš„Pythonè„šæœ¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import serial import argparse import threading import time from datetime import datetime def send_data(ser): while True: current_time = datetime.now().strftime(\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;) ser.write(current_time.encode()) print(\u0026#34;Sent: {}\u0026#34;.format(current_time)) time.sleep(5) # æ¯5ç§’å‘é€ä¸€æ¬¡ def receive_data(ser): while True: if ser.in_waiting \u0026gt; 0: received_data = ser.readline().decode().strip() print(\u0026#34;Received: {}\u0026#34;.format(received_data)) def main(): parser = argparse.ArgumentParser(description=\u0026#34;Serial port listener and responder\u0026#34;) parser.add_argument(\u0026#39;--port\u0026#39;, type=str, required=True, help=\u0026#39;Serial port to use, e.g., /dev/ttyUSB0 or COM3\u0026#39;) parser.add_argument(\u0026#39;--baudrate\u0026#39;, type=int, required=True, help=\u0026#39;Baud rate for the serial communication\u0026#39;) args = parser.parse_args() try: with serial.Serial(args.port, args.baudrate, timeout=1) as ser: print(\u0026#34;Listening on {} at {} baud.\u0026#34;.format(args.port,args.baudrate)) # åˆ›å»ºå‘é€å’Œæ¥æ”¶çº¿ç¨‹ send_thread = threading.Thread(target=send_data, args=(ser,)) receive_thread = threading.Thread(target=receive_data, args=(ser,)) # å¯åŠ¨çº¿ç¨‹ send_thread.start() receive_thread.start() # ç¡®ä¿ä¸»çº¿ç¨‹ä¸ä¼šæå‰ç»“æŸ send_thread.join() receive_thread.join() except serial.SerialException as e: print(\u0026#34;Error: {}\u0026#34;.format(e)) if __name__ == \u0026#34;__main__\u0026#34;: main() ç”¨æ³•\n1 2 3 4 python -m venv test cd text source bin/active (test) dv@rsap5:~/test $ sudo python ./tst_uart.py --port /dev/ttyAMA0 --baudrate 115200 7. I2C EEPROM ä»¥ä¸‹æ–¹æ³•é€‚ç”¨äºkernalç‰ˆæœ¬ä¸º6.6.20çš„ç‰ˆæœ¬\næ ¹æ®è¿™ä¸ªå¸–å¯çŸ¥é“, åœ¨linux kernalç‰ˆæœ¬6.6.60ä¹‹å‰,æ²¡æœ‰æ‰“è¡¥ä¸ä¹‹å‰,åœ¨è®¾å¤‡æ ‘æºæ–‡ä»¶ä¸­, gpio 0 1ç®¡è„šçš„åç§°ä¸º\nrp1_i2c0_0_1 ä¹‹åæ‰“äº†è¡¥ä¸å–äº†ä¸€ä¸ªåˆ«åä¸ºi2c0_pins\næ‰€ä»¥ä»åˆ«çš„è®¾å¤‡ä¸Šå¤åˆ¶äº†è®¾å¤‡æ ‘æºæ–‡ä»¶è¿‡æ¥ä½¿ç”¨,ä¸€ç›´æ²¡æœ‰åˆå§‹åŒ–æˆåŠŸ,æ²¡æœ‰at24é©±åŠ¨,\nåˆ›å»ºat24.dts è®¾å¤‡æ ‘æºæ–‡ä»¶å†™å…¥:\n/dts-v1/;\r/plugin/;\r/ {\rfragment@0 {\rtarget = \u0026lt;\u0026amp;i2c0\u0026gt;; // Reference to the I2C controller\r__overlay__ {\rpinctrl-names = \u0026#34;default\u0026#34;;\rpinctrl-0 = \u0026lt;\u0026amp;rp1_i2c0_0_1\u0026gt;; //kernal 6.6.yå¯ç”¨ \u0026amp;i2c0_pins\rclock-frequency = \u0026lt;400000\u0026gt;;\rstatus = \u0026#34;okay\u0026#34;;\r#address-cells = \u0026lt;1\u0026gt;; // Define addressing scheme\r#size-cells = \u0026lt;0\u0026gt;; // No size information for I2C\rat24@50 {\rcompatible = \u0026#34;atmel,24c64\u0026#34;, \u0026#34;at24\u0026#34;; // EEPROM compatibility\rreg = \u0026lt;0x50\u0026gt;; // I2C address of the EEPROM\rpagesize = \u0026lt;32\u0026gt;; // EEPROM page size in bytes\rsize = \u0026lt;8192\u0026gt;; // EEPROM size in bytes\raddress-width = \u0026lt;16\u0026gt;; // Address width in bits\r};\r};\r};\r}; ç„¶åç¼–è¯‘è®¾å¤‡æ ‘,å¹¶æŠŠç¼–è¯‘ç»“æœå¤åˆ¶åˆ°/boot/firmware/overlays\n1 2 dtc -@ -I dts -O dtb -o at24.dtbo at24.dts sudo cp at24.dtbo /boot/firmware/overlays/ åœ¨/boot/firmware/confit.txtä¸­éœ€è¦æ‰“å¼€\ndtparam=i2c_arm=on #i2c pin27 28, gpio 0 1 dtparam=i2c_vc=on #\rdtoverlay=at24 #at24é©±åŠ¨ é‡å¯ä¸€ä¸‹\n1 sudo reboot åœ¨/etc/modules æ–‡ä»¶ä¸­åŠ å…¥ä¸€è¡Œat24\n1 echo \u0026#34;at24\u0026#34; | sudo tee -a /etc/modules æµ‹è¯•è¯»å†™eeprom\n1 2 3 test: echo \u0026#39;Hello World\u0026#39; | sudo tee /sys/class/i2c-dev/i2c-0/device/0-0050/eeprom sudo cat /sys/class/i2c-dev/i2c-0/device/0-0050/eeprom 8. å®šåˆ¶å¼€æœºåŠ¨ç”»,å¼€å§‹èœå•icon æ›¿æ¢è¿™äº›ä½ç½®çš„pngå›¾æ ‡\n1 2 3 4 5 6 7 8 9 10 #å¼€å§‹èœå•å›¾æ ‡ scp ./usr/share/icons/PiXflat/16x16/places/start-here.png root@10.2.1.203:/usr/share/icons/PiXflat/16x16/places/start-here.png scp ./usr/share/icons/PiXflat/24x24/places/start-here.png root@10.2.1.203:/usr/share/icons/PiXflat/24x24/places/start-here.png scp ./usr/share/icons/PiXflat/48x48/places/start-here.png root@10.2.1.203:/usr/share/icons/PiXflat/48x48/places/start-here.png scp ./usr/share/icons/PiXflat/32x32/places/start-here.png root@10.2.1.203:/usr/share/icons/PiXflat/32x32/places/start-here.png scp ./usr/share/icons/Adwaita/22x22/places/start-here.png #å¼€æœº scp ./usr/share/plymouth/themes/pix/splash.png root@10.2.1.203:/usr/share/plymouth/themes/pix/splash.png ç„¶åupdate-initramfs -uå›ºåŒ–ä¸€ä¸‹,å¦åˆ™booté˜¶æ®µè¿˜æ²¡æœ‰æŒ‚è½½ä¸Š rootfs, æ²¡åŠæ³•åŠ è½½æ›¿æ¢çš„å›¾ç‰‡.\n100. å…¶ä»– 100.1 éšè—ä»»åŠ¡æ  ~/.config/wf-panel-pi.ini 1 2 autohide=true autohide_duration=500 100.2 raspbianè“ç‰™è®¾å¤‡é…å¯¹ raspberry pi 5 çš„raspbianç³»ç»Ÿå¥½åƒæ²¡æœ‰è“ç‰™é…çš„guiç¨‹åº,ä¸è¿‡æœ‰ä¸€ä¸ªcliå·¥å…·,å¤§è‡´ç”¨æ³•,\nå¼€å¯cli å·¥å…·è¿›å…¥äº¤äº’äº¤äº’å¼\nå¼€å¯agent +\nç¡®è®¤è®¾å¤‡å¯ä»¥è¢«æ‰«æåˆ°\næ‰«æè®¾å¤‡\nåœæ­¢æ‰«æ\né…å¯¹\né€€å‡ºcli\n1 2 3 4 5 6 7 8 9 10 11 12 #æ ‘è“æ´¾è“ç‰™ bluetoolthctl agent on scan on scan off pair \u0026lt;device\u0026#39;s mac\u0026gt; quit ", 
        "url": "\/post\/raspberry-pi5-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/tags\/raspberrypi-5\/": {
        "title": "RaspberryPI 5",
        "tags": [],
        "content": "", 
        "url": "\/tags\/raspberrypi-5\/"
    },
    
    "\/tags\/docker\/": {
        "title": "Docker",
        "tags": [],
        "content": "", 
        "url": "\/tags\/docker\/"
    },
    
    "\/tags\/gui\/": {
        "title": "GUI",
        "tags": [],
        "content": "", 
        "url": "\/tags\/gui\/"
    },
    
    "\/tags\/nvidia-docker2\/": {
        "title": "Nvidia-docker2",
        "tags": [],
        "content": "", 
        "url": "\/tags\/nvidia-docker2\/"
    },
    
    "\/post\/windows_wsl2_nvidia-docker2%E9%95%9C%E5%83%8F%E8%AE%B0%E5%BD%95\/": {
        "title": "windows_wsl2_nvidia-docker2é•œåƒè®°å½•",
        "tags": ["X11","Windows","Docker","WSL2","Nvidia-docker2","GUI",],
        "content": "0. å†™åœ¨å‰é¢ ä¸Šä¸Šå‘¨æˆ‘å°è¯•äº†ä½¿ç”¨mac os é€šè¿‡x11è½¬å‘,æ˜¾ç¤ºä»ubuntu dockerä¸­å¯åŠ¨çš„guiç¨‹åº,å¹¶ä½¿ç”¨ubuntu dockerä¸­çš„è¾“å…¥æ³•çš„å®è·µ\nä¸Šå‘¨æˆ‘å°è¯•äº†åœ¨windowsä¸Šåœ¨å…¶åŸºç¡€ä¸ŠåŠ å…¥äº†nvidia-docker2çš„æ­¥éª¤,ä¹ŸæˆåŠŸäº†,ä¸è¿‡æ²¡æ—¶é—´è®°å½•,äºæ˜¯ä»Šæ—¥å†™æ­¤æ–‡æ¡£è®°å½•\nä¸ç®¡æ˜¯mac osè¿˜æ˜¯windowsä¸Šæ‰€åšçš„è¿™äº›å®éªŒ,éƒ½æ˜¯ä¸ºäº†åœ¨dockerä¸­è¿è¡Œæˆ‘çš„å¼€æºçš„yolo8è¾…åŠ©è®­ç»ƒè½¯ä»¶label-image\n1. å‰ç½®æ¡ä»¶ 1.1 wsl 2 ç”±äºwindowsä¸Šçš„ubuntu docker containerè¿è¡Œåœ¨wsl2å¯ä»¥æ”¯æŒå¾—æ›´å¥½,ä¹Ÿæ˜¯nvidia-docker2çš„å……åˆ†å¿…è¦æ¡ä»¶,æ‰€ä»¥å¦‚æœä½ å®‰è£…çš„wslå‘è¡Œç‰ˆæœ¬ä¸æ˜¯wslç‰ˆæœ¬çš„è¯,éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªwsl2çš„docker-desktop\nå®‰è£…æˆåŠŸåå¯ä»¥å‘½ä»¤è¡ŒæŸ¥çœ‹\n1 2 3 PS C:\\WINDOWS\\system32\u0026gt; wsl --list -v NAME STATE VERSION * docker-desktop Running 2 wsl2çš„å®‰è£…æ–¹æ³•,éšä¾¿æœç´¢ä¸€ä¸‹å°±æœ‰å¾ˆå¤š,ç•¥\néœ€è¦åœ¨docker-desktopä¸­å¯ç”¨wsl2, å¦‚æœè®¾ç½®æˆåŠŸçš„æ”¾åœ¨, setting-\u0026gt;resoucesä¸­æ˜¾ç¤ºå¦‚ä¸‹å›¾\n1.2 nvidia-docker2å®‰è£… https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html\nå‚ç…§äº›æ–‡,å¦‚æ­¤å¦‚æ­¤,è¿™èˆ¬è¿™èˆ¬,å°±å¥½äº†,è¿™é‡Œä¸å†å±•å¼€,æ²¡å®‰è£…æˆåŠŸçš„å†åŠªåŠ›ç™¾åº¦ä¸€ä¸‹\nç›¸æ¯”linuxä¸‹çš„æ­¥éª¤ç®€å•, å®‰è£…å®Œååœ¨docker-desktopä¸­é‡å¯ä¸€ä¸‹dockerå°±å¯ä»¥ç”Ÿæ•ˆ\nå¦‚æœæ˜¯åœ¨linuxä¸‹, éœ€è¦\nsudo systemctl reload-daemon \u0026amp;\u0026amp; sudo systemctl restart docker by the way ,\nlinuxçš„dockerçš„daemon.jsonåœ¨/etc/docker/daemon.json\nwidnowsçš„dockerçš„daemon.jsonåœ¨~/.config/docker/daemon.json\nè®¾ç½®ä»£ç†ä¼šè§£å†³å¾ˆå¤šé•œåƒæ‹‰ä¸ä¸‹æ¥çš„é—®é¢˜\n1 2 3 4 5 6 7 8 9 10 11 12 { \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://dockerhub.icu\u0026#34;, \u0026#34;https://docker.chenby.cn\u0026#34;, \u0026#34;https://docker.1panel.live\u0026#34;, \u0026#34;https://docker.awsl9527.cn\u0026#34;, \u0026#34;https://docker.anyhub.us.kg\u0026#34;, \u0026#34;https://dhub.kubesre.xyz\u0026#34; ], //...ä¿å­˜åŸæ¥çš„.. } éªŒè¯å®‰è£…çš„è¯,å…ˆæ‹‰ä¸€ä¸ªubuntué•œåƒ(ç›´æ¥ç”¨hello-worldé•œåƒä¸è¡Œ)\n1 docker pull ubuntu20.04 æŸ¥çœ‹é•œåƒ\n1 2 3 PS C:\\WINDOWS\\system32\u0026gt; docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 20.04 9522b5ff29b8 3 weeks ago 72.8MB ç„¶åä»¥è¿™ä¸ªhello-worldé•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨,åœ¨é‡Œé¢è°ƒç”¨nvidia-smi æŸ¥çœ‹æ˜¾ç¤ºä¿¡æ¯\n1 docker run --rm ubuntu20.04 --runtime=nivdia --gpus all -it nvidia-smi å¦‚æœä½ æœºå™¨ä¸Šæœ‰å¤šä¸ªgpu,ä½†åªæƒ³æŸä¸€äº›gpuæˆ–æŸä¸€ä¸ªgpu, å¯ä»¥æŸ¥çœ‹æ–‡æ¡£,æœ‰å¤šç§æ–¹å¼å¯ä»¥çº¦æŸ\nä½†æ˜¯å¦‚æœdocker runåŠ äº†--privileged å‚æ•°, ä¸ç®¡ä½ æ€ä¹ˆçº¦æŸ,æ‰€æœ‰gpuéƒ½å°†åœ¨docker containerå†…å¯è§.(linuxä¸Šæ˜¯å¦‚æ­¤,windowsæ²¡æœ‰å®éªŒè¿‡)\n1.3 å®‰è£…windowsä¸Šçš„x11 server ç”¨äºæ¥æ”¶æ¥è‡ªdocker containerä¸­çš„guiç¨‹åºäº¤äº’æ¶ˆæ¯\næˆ‘å®‰è£…çš„æ˜¯è¿™ä¸ª x11 server\nå®‰è£…åéœ€è¦è®¾ç½®ä¸€ä¸‹ ç¦ç”¨ è®¿é—®ç­–ç•¥æˆ–è®¾ç½®ç›¸åº”çš„è§„å¾‹,è®©è‡ªå·±çš„dockerä¸­çš„guiå¯ä»¥è½¬å‘è¿‡æ¥\næˆ‘æ˜¯ç›´æ¥ç¦ç”¨äº†\n2.æ„å»ºubuntu20.04è¿è¡Œæ—¶docker å’Œåœ¨ä½¿ç”¨x11è½¬å‘åœ¨macosä¸Šä»dockerå®¹å™¨ä¸­å¯åŠ¨guiç¨‹åºä¸€æ ·,é¦–å…ˆæ„å»ºä¸€ä¸ªubuntu20.04çš„ç¯å¢ƒ,æµ‹è¯•æ˜¾ç¤ºguiç¨‹åºå’Œä½¿ç”¨å®¹å™¨ä¸­çš„ä¸­æ–‡è¾“å…¥æ³•\nåŸºæœ¬å’Œmac os é‚£ç¯‡è®°å½•ä¸­çš„è„šæœ¬åŸºæœ¬ä¸€è‡´,åªæ˜¯åšäº†å‡ ä¸ªæ”¹åŠ¨\nåŸºç¡€é•œåƒæ”¹ä¸ºnvidia-cudaé•œåƒ æ›¿æ¢äº†aptæºæ”¹ä¸ºæ¸…åå¤§å­¦çš„apt source ä¿®æ”¹docker container workdirä¸º/opt/label-image ,è¿™ä¸ªç›®å½•å°†ä¼šæ˜¯æˆ‘éƒ¨ç½²label-imageçš„ç›®å½• 2.1 æ„å»ºdocker image 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 FROM nvidia/cuda:12.6.1-cudnn-devel-ubuntu20.04 #FROM --platform=linux/amd64 nvidia/cuda:12.6.1-cudnn-devel-ubuntu20.04 ENV DEBIAN_FRONTEND=noninteractive COPY .gitconfig /root/.gitconfig COPY .vimrc /root/.vimrc RUN cat \u0026lt;\u0026lt;EOF \u0026gt; /etc/apt/sources.list # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse # ä»¥ä¸‹å®‰å…¨æ›´æ–°è½¯ä»¶æºåŒ…å«äº†å®˜æ–¹æºä¸é•œåƒç«™é…ç½®ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œä¿®æ”¹æ³¨é‡Šåˆ‡æ¢ deb http://security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse # deb-src http://security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse # é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨ # deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse # # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse EOF RUN \\ apt update \u0026amp;\u0026amp; \\ apt install -y \\ build-essential \\ software-properties-common \u0026amp;\u0026amp;\\ apt update \u0026amp;\u0026amp; \\ apt install -y locales language-pack-zh-hans language-pack-gnome-zh-hans fonts-wqy-zenhei fonts-wqy-microhei ibus-rime librime-data-wubi \u0026amp;\u0026amp; sed -i.bak \u0026#39;s/# zh_CN.UTF-8/zh_CN.UTF-8/g\u0026#39; /etc/locale.gen \u0026amp;\u0026amp; locale-gen \u0026amp;\u0026amp; update-locale LANG=zh_CN.UTF-8 \u0026amp;\u0026amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \u0026amp;\u0026amp; \\ apt install -y \\ autoconf \\ automake \\ bison \\ build-essential \\ cmake \\ gcc \\ g++ \\ git \\ lsb-release \\ make \\ ninja-build \\ python3 \\ rsync \\ tar \\ unzip \\ vim \\ wget \\ curl \\ cowsay \u0026amp;\u0026amp; \\ apt install -y openssh-server \u0026amp;\u0026amp; echo \u0026#39;root:aaa\u0026#39; | chpasswd \u0026amp;\u0026amp; sed -i.bak \u0026#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g\u0026#39; /etc/ssh/sshd_config \u0026amp;\u0026amp; service ssh restart \u0026amp;\u0026amp; \\ apt clean \u0026amp;\u0026amp; \\ mkdir -p /opt/label-image RUN apt install -y gnome \u0026amp;\u0026amp; apt clean COPY .config /root/.config WORKDIR /opt/label-image ENTRYPOINT [\u0026#34;/bin/bash\u0026#34;,\u0026#34;-c\u0026#34; ,\u0026#34;service ssh start \u0026amp;\u0026amp; tail -f /dev/null\u0026#34;] 2.2 å¯åŠ¨docker container æˆ‘åŸæœ¬æƒ³è¦åœ¨windowsä¸Šä½¿ç”¨git bash ç›´æ¥ç”¨ è¿™ä¸ªè„šæœ¬å¯åŠ¨å®¹å™¨\nä¸è¿‡åŸºäºè¿™å‡ ä¸ªåŸå› é‡å†™äº†ä¸€ä¸ª.batæ‰¹å¤„ç†è„šæœ¬æ¥å¯åŠ¨windowsä¸Šçš„å®¹å™¨\ngit bashä»¿çœŸç¯å¢ƒä¸èƒ½æ‰§è¡Œ docker runå‘½ä»¤,ä¼šå‡ºç°é—®é¢˜ windowsä¸Šçš„x11æœåŠ¡å™¨æ˜¯åŸºäº tcp çš„,ä¸éœ€è¦åƒlinuxé‚£æ ·æŒ‚è½½ /tmp/.x11-unix displayç¯å¢ƒå˜é‡ä¸åƒlinuxé‚£æ ·è®¾ç½®:n,è€Œæ˜¯host.docker.internal:0,Hoståœ¨containerä¸­çš„åŸŸå:0 runDocker.bat\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @echo off set display=host.docker.internal:0 set runcmd=docker run ^ --name hbb ^ --privileged ^ -p 2246:22 ^ --gpus all ^ --runtime=nvidia ^ -e DISPLAY=%display% ^ -e LANG=zh_CN.UTF-8 ^ -e XMODIFIERS=\u0026#34;@im=ibus\u0026#34; ^ -e QT_IM_MODULE=ibus ^ -e GTK_IM_MODULE=ibus ^ --entrypoint /bin/bash ^ -e GID=%NUMBER_OF_PROCESSORS% ^ -e UID=%USERNAME% ^ -it ubuntu:20.04 -c \u0026#34;ibus-daemon -xrd \u0026amp;\u0026amp; gedit\u0026#34; %runcmd% æ‰§è¡Œè¿™ä¸ªè„šæœ¬å, å¯åŠ¨è¾“å…¥æ³•,æ‰“å¼€ æ–‡æœ¬ç¼–è¾‘å™¨gedit, æµ‹è¯•è¾“å…¥æ³•æ²¡æœ‰é—®é¢˜å, å¯ä»¥å¼€å§‹å‡†å¤‡ç¼–è¯‘ç¨‹åºå’Œéƒ¨ç½²ç¨‹åºäº†\n3. label-image ç¼–è¯‘éƒ¨ç½² 3.1 å®‰è£…qt å¼€å‘ç¯å¢ƒ ç”±äºå·²ç»æ”¯æŒx11è½¬å‘äº†,æ‰€ä»¥ä¸‹è½½ qt å®˜æ–¹çš„åœ¨çº¿å®‰è£…å™¨å°±èƒ½å®‰è£…qt 5.15,ä¸æ˜¯arm64,æ‰€ä»¥ä¸éœ€è¦äº¤å‰ç¼–è¯‘qt æºç \næ‰€ä»¥\u0026hellip; ç•¥\nå”¯ä¸€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯, è®¿é—®hostçš„ä½¿ç”¨ host.docker.internal\n3.2 ç¼–è¯‘ ç•¥\n3.3 æµ‹è¯•label-image dockerä¸­ä½¿ç”¨cudaåŠ é€Ÿè®­ç»ƒ è™½ç„¶è½¯ä»¶å†™å¾—å¾ˆçƒ‚,ä½†è¿˜æ˜¯æˆåŠŸåœ¨windows ä¸Šä½¿ç”¨cudaåŠ é€Ÿè®­ç»ƒäº†yolov8,\nä¸è¿‡æˆ‘çš„windowsç”µè„‘çš„GPUæ˜¯ 1650, æœ€ç»ˆè¿˜æ˜¯ä»¥out of memoryå¤±è´¥å‘Šç»ˆ,ä½†è¯å®è¿™ä¸ªæ–¹æ¡ˆæ˜¯å¯è¡Œçš„\n", 
        "url": "\/post\/windows_wsl2_nvidia-docker2%E9%95%9C%E5%83%8F%E8%AE%B0%E5%BD%95\/"
    },
    
    "\/tags\/x11\/": {
        "title": "X11",
        "tags": [],
        "content": "", 
        "url": "\/tags\/x11\/"
    },
    
    "\/tags\/macos\/": {
        "title": "MacOS",
        "tags": [],
        "content": "", 
        "url": "\/tags\/macos\/"
    },
    
    "\/post\/%E4%BD%BF%E7%94%A8x11%E8%BD%AC%E5%8F%91%E5%9C%A8macos%E4%B8%8A%E4%BB%8Edocker%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%90%AF%E5%8A%A8gui%E7%A8%8B%E5%BA%8F\/": {
        "title": "ä½¿ç”¨x11è½¬å‘åœ¨macosä¸Šä»dockerå®¹å™¨ä¸­å¯åŠ¨guiç¨‹åº",
        "tags": ["X11","MacOS","Docker","GUI",],
        "content": "0.å†™åœ¨å‰é¢ ä¹‹æ‰€ä»¥è¦ç ”ç©¶è¿™ä¸ª,ä¸»è¦æ˜¯æˆ‘å†™çš„ä¸€ä¸ªYoloç›®æ ‡æ£€æµ‹AI æ¨¡å‹çš„è¾…åŠ©è®­ç»ƒè½¯ä»¶label-imageä¸æ”¯æŒWindowså¹³å°, å¦‚æœéœ€è¦åœ¨Windowsä¸Šä½¿ç”¨, éœ€è¦åœ¨Windowsä¸Šå¯åŠ¨ubuntuçš„docker ,å†ä»ä¸­å¯åŠ¨ ubuntuç‰ˆæœ¬çš„label-image é€šè¿‡è½¬å‘x11æ¶ˆæ¯çš„æ–¹å¼æ˜¾ç¤º,åœ¨Nvidia-docker2çš„åŠ æŒä¸‹, ç›´æ¥ä»dockerä¸­è®¿é—®windowsä¸Šçš„æ˜¾å¡,ä½¿ç”¨cudaåŠ é€Ÿæ¨¡å‹è®­ç»ƒ\nè™½ç„¶ç›®å‰MacOSçš„MPSä¸ç®¡æ˜¯æ€§èƒ½è¿˜æ˜¯é…å¥—,éƒ½æ²¡æœ‰Nvidia CUDAåšå¾—å¥½,ä¸æ”¯æŒä»dockerä¸­ç¡¬ä»¶åŠ é€Ÿ,ä½†æˆ‘è¿˜æ˜¯è§‰å¾—æœ‰å¿…è¦ç ”ç©¶ä¸€ä¸‹,æ¯•ç«Ÿå°†æ¥ä¹Ÿè®¸ä¹Ÿå°±æ”¯æŒäº†.\n1.å®‰è£… XQuartz XQuartz\nä¸ºäº†è®©mac oså¯ä»¥ä½œä¸ºX11æœåŠ¡å™¨,æ¥æ”¶æ¥è‡ªlinuxçš„x11æ¶ˆæ¯\nå®‰è£…XQuartz ,å®‰è£…å®Œå,é…ç½®ä¸ºå…è®¸ä»ç½‘ç»œå®¢æˆ·ç«¯æ¥æ”¶æ¶ˆæ¯\nè®¾ç½®å…è®¸çš„x11å®¢æˆ·ç«¯\n1 xhost + #è¡¨ç¤ºä¸è¿‡æ»¤ä»»åŠ¡å®¢æˆ·ç«¯ip 2. åˆ›å»ºä¸€ä¸ªubuntu dockeré•œåƒ,å®‰è£…ä¸­æ–‡è¾“å…¥æ³• dockfile\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 FROM --platform=linux/amd64 ubuntu:20.04 #FROM ubuntu:20.04 ENV DEBIAN_FRONTEND=noninteractive COPY .gitconfig /root/.gitconfig COPY .vimrc /root/.vimrc RUN \\ apt update \u0026amp;\u0026amp; \\ apt install -y \\ build-essential \\ software-properties-common \u0026amp;\u0026amp;\\ apt update \u0026amp;\u0026amp; \\ apt install -y locales language-pack-zh-hans language-pack-gnome-zh-hans fonts-wqy-zenhei fonts-wqy-microhei ibus-rime librime-data-wubi \u0026amp;\u0026amp; sed -i.bak \u0026#39;s/# zh_CN.UTF-8/zh_CN.UTF-8/g\u0026#39; /etc/locale.gen \u0026amp;\u0026amp; locale-gen \u0026amp;\u0026amp; update-locale LANG=zh_CN.UTF-8 \u0026amp;\u0026amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \u0026amp;\u0026amp; \\ apt install -y \\ autoconf \\ gnome \\ automake \\ bison \\ build-essential \\ cmake \\ gcc \\ g++ \\ git \\ lsb-release \\ make \\ ninja-build \\ python3 \\ rsync \\ tar \\ unzip \\ vim \\ wget \\ curl \\ cowsay \u0026amp;\u0026amp; \\ apt install -y openssh-server \u0026amp;\u0026amp; echo \u0026#39;root:aaa\u0026#39; | chpasswd \u0026amp;\u0026amp; sed -i.bak \u0026#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g\u0026#39; /etc/ssh/sshd_config \u0026amp;\u0026amp; service ssh restart \u0026amp;\u0026amp; \\ apt clean \u0026amp;\u0026amp; \\ mkdir -p /opt/label-image #COPY .config /root/.config WORKDIR /opt/label-image ENTRYPOINT [\u0026#34;/bin/bash\u0026#34;,\u0026#34;-c\u0026#34; ,\u0026#34;service ssh start \u0026amp;\u0026amp; tail -f /dev/null\u0026#34;] ç¬¬14è¡Œ,è®¾ç½®æ—¶åŒº,æœ¬åœ°åŒ–,å®‰è£…å­—ä½“,è¾“å…¥æ³•ç­‰\nç¬¬36è¡Œè®¾ç½®open ssh æœåŠ¡,æ”¯æŒä»¥rootç”¨æˆ·è¿œç¨‹ç™»å½•\nç¬¬40è¡Œ,å¤åˆ¶è¾“å…¥æ³•ç›¸å…³çš„é…ç½®,.config æ–‡ä»¶å¤¹æ˜¯åœ¨é…ç½®å¥½è¾“å…¥æ³•åå¤åˆ¶å‡ºæ¥çš„æ–‡ä»¶å¤¹,å¯é€‰\nbuild dockerçš„æŒ‡ä»¤\n1 docker build . -f dockfile -t repos:version 3.å¯åŠ¨docker container åˆ›å»ºä¸€ä¸ª è„šæœ¬æ¥å¯åŠ¨docker å®¹å™¨ runDocker.sh\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #!/bin/bash display=${HOSTNAME}:0 runcmd=\u0026#34;docker run \\ --name hbb --privileged \\ --device /dev/mem \\ -p 2246:22 \\ -e DISPLAY=$display \\ -e LANG=zh_CN.UTF-8 \\ -e XMODIFIERS=\\\u0026#34;@im=ibus\\\u0026#34; \\ -e QT_IM_MODULE=\\\u0026#34;ibus\\\u0026#34; \\ -e GTK_IM_MODULE=\\\u0026#34;ibus\\\u0026#34; \\ -e GID=`id -g` \\ -e UID=`id -u` \\ -v /tmp/.X11-unix/:/tmp/.X11-unix \\ --entrypoint /bin/bash \\ --rm -it label-image:u2004 -c \u0026#39;ibus-daemon -xrd \u0026amp;\u0026amp; gedit\u0026#39;\u0026#34; eval $runcmd ä¸è¾“å…¥æ³•ç›¸å…³çš„,é™¤äº†å‡ ä¸ªç¯å¢ƒå˜é‡å¤–,è¿˜éœ€è¦æŒ‚è½½/tmp/.X11-unix ä»¥è½¬å‘x11æ¶ˆæ¯\nè„šæœ¬å…¥å£ç‚¹ä¸º/bin/bash, å‚æ•°ä¸º -c ibus-daemon -xrd \u0026amp;\u0026amp; gedit è¡¨ç¤ºå…ˆå¯åŠ¨è¾“å…¥æ³•çš„å®ˆæŠ¤è¿›ç¨‹,å†æ‰“å¼€geditæ–‡æœ¬ç¼–è¾‘å™¨\nç„¶åè„šæœ¬æƒé™å è¿è¡Œè„šæœ¬\n1 2 sudo chmod +x runDocker.sh ./runDocker.sh è¿™æ—¶ä¼šçœ‹åˆ°å¯åŠ¨äº†ä¸€ä¸ªdockr,å¹¶ä»¥äº¤äº’çš„æ–¹å¼æ‰“å¼€äº†å®¹å™¨ä¸­çš„gedit\nå¦‚æœåœ¨æ­¥éª¤2ä¸­æ²¡æœ‰ç¬¬40è¡Œ,è¿™æ—¶æ˜¯æ— æ³•ä½¿ç”¨è¾“å…¥æ³•çš„,\nå¯ä»¥é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯è¿›å…¥dockerä¸­\n1 docker exec -it hbb bash #hbbæ˜¯æ­¥éª¤3è„šæœ¬ä¸­--name å‚æ•°æŒ‡å®šçš„ 1 ibus-setup #å¼¹å‡ºIbusè¾“å…¥æ³•é…ç½®çª—å£ è®¾ç½®å¥½è¾“å…¥æ³•å,æŠŠ ~/.config/dconf å’Œ ~/.config/ibus å¤åˆ¶å‡ºæ¥, è¡¥å……åˆ°æ­¥éª¤2çš„ç¬¬40è¡Œå¤„,\né‡æ–°æ‰§è¡Œä¸€ä¸‹docker build,è¿™æ—¶ä¼šå¾ˆå¿«é€Ÿçš„åŸºäºä¸Šä¸€æ¬¡ç¼“å­˜çš„ç»“æœå†ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰è¾“å…¥æ³•é…ç½®çš„docker image\n4.é™„å½• 4.1è®¾ç½®ibusé»˜è®¤è¾“å…¥æ³•çš„æ–¹æ³• æˆ‘æ²¡æœ‰æ‰¾åˆ°ä»å‘½ä»¤è¡Œé…ç½®è¾“å…¥æ³•çš„æ–¹æ³•, (å¦åˆ™å°±èƒ½ç›´æ¥åœ¨runè„šæœ¬ä¸­é…ç½®)\næ‰€ä»¥æˆ‘çš„æ–¹å¼æ˜¯,å…ˆå¯åŠ¨å‘½ä»¤è¡Œ,åœ¨é‡Œé¢é…ç½®å¥½è¾“å…¥æ³•,å†æŠŠç›¸å…³çš„é…ç½®ä»¥æ–‡ä»¶çš„æ–¹å¼ä¿å­˜,\nå†åšä¸€ä¸ªdocker imageæŠŠé…ç½®æ–‡ä»¶è¦†ç›–è¿›å»,æˆ–æŒ‚è½½å»å»\nubuntuä¸ibusé…ç½®ç›¸å…³çš„é…ç½®åœ¨ ~/.config/dconf\nibus-rimeçš„é…ç½®æ–‡ä»¶åœ¨ ~/.config/.config/ibus\nåœ¨æ­¥éª¤3ä¸­å¯åŠ¨çš„dockerä¸­,é…ç½®ibus-rimeä¸ºè¾“å…¥æ³•\n1 ibus-setup è¿™æ—¶ä¼šè½¬å‘x11åˆ°mac osçš„x11 serverä¸Š, å¼¹å‡ºé…ç½®çª—å£\næ·»åŠ rimeè¾“å…¥æ³•, æœ€å¥½ä¹Ÿè®¾ç½®ä¸€ä¸‹è‡ªå·±å–œæ¬¢çš„åˆ‡æ¢è¾“å…¥æ³•çš„å¿«æ·é”®,ä¸è¦å’Œmac oså†²çªäº†.\nç„¶åä¿®æ”¹~/.config/ibus/rime é‡Œçš„é…ç½®, è¿™ä¸ªå› äººè€Œå¼‚,æˆ‘å°±æ­¤ç•¥è¿‡\néƒ½åšå¥½ä¿®æ”¹å,æŠŠ~/.config/dconfå’Œ~/.config/ibus æ–‡ä»¶å¤‡ä»½å‡ºæ¥,å¦‚æœå¯¹å‘½ä»¤è¡Œå¤åˆ¶ä¸ç†Ÿæ‚‰,å¯ä»¥ä½¿ç”¨fileZillaä¹‹ç±»çš„æ”¯æŒsftpæˆ–scpçš„å›¾å½¢åŒ–å·¥å…·, åœ¨æ­¥éª¤2ä¸­å·²ç»æŠŠhostçš„2246uç«¯å£è½¬å‘åˆ°docker containerä¸­äº†,\nå†åšä¸€ä¸ªdocker, åœ¨æ­¥éª¤2ä¸­å‰å‡ è¡Œ,æŠŠå¤‡ä»½çš„æ–‡ä»¶è¦†ç›–è¿›å»æ–°çš„é•œåƒä¸­,å³å¯\n4.2 x11 æ¶ˆæ¯è½¬å‘æ˜¾ç¤ºçš„ GUIç¨‹åº+è¾“å…¥æ³• æ•ˆæœ ", 
        "url": "\/post\/%E4%BD%BF%E7%94%A8x11%E8%BD%AC%E5%8F%91%E5%9C%A8macos%E4%B8%8A%E4%BB%8Edocker%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%90%AF%E5%8A%A8gui%E7%A8%8B%E5%BA%8F\/"
    },
    
    "\/tags\/radxa\/": {
        "title": "Radxa",
        "tags": [],
        "content": "", 
        "url": "\/tags\/radxa\/"
    },
    
    "\/post\/radxa-rock5c-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/": {
        "title": "radxa-rock5c-å¼€å‘ç¬”è®°",
        "tags": ["Radxa","Rock5C","NVME","UART",],
        "content": "1. ä»NVME å¯åŠ¨ç³»ç»Ÿ ä»å®˜æ–¹çš„æ–‡æ¡£ä¸Šçœ‹rock5c, ä½ ä¼šæœ‰ä¸€ç§çœ‹å±±è·‘æ­»é©¬çš„æ„Ÿè§‰, å› ä¸ºå®ƒåœ¨ä¸€æœ¬æ­£ç»çš„èƒ¡è¯´å…«é“\næ€€ç–‘å®ƒåªæ˜¯æŠŠrock 5bæˆ–5açš„æ–‡æ¡£å¤åˆ¶è¿‡æ¥æ”¹ä¸€ä¸€æ”¹\næŒ‰ä»–ä»¬æ–‡æ¡£ä¸Šåˆ·nvmeçš„æ–‡æ¡£,ä½ å°†æ°¸è¿œä¸å¯èƒ½æˆåŠŸ, å› ä¸ºrock 5c ä»emmcæˆ–nvmeå¯åŠ¨,åªèƒ½äºŒé€‰ä¸€\nå› ä¸ºpinè„šä¸å¤Ÿç”¨.ä½†æ˜¯ä»–ä»¬æ–‡æ¡£ä¸Šæ²¡æœ‰æŒ‡å‡ºè¿™ç‚¹, æˆªæ­¢2024-07-27\nå¦‚æœä¸æƒ³ä¹°é¢å¤–çš„æ¨¡å—,åˆæƒ³ä»nvmeå¯åŠ¨ç³»ç»Ÿ,å”¯çš„ä¸€é€‰é¡¹æ˜¯ æŠŠç³»ç»Ÿåˆ·åˆ° sdä¸­,\nè¿™é‡Œsdå¡ä¸­æœ‰ä¸‰ä¸ªåˆ†åŒº\nbootloader ç¡¬ä»¶é…ç½®åˆ†åŒº æ“ä½œç³»ç»Ÿåˆ†åŒº ç„¶åæŠŠsdå¡çš„ ç¬¬äºŒä¸ªåˆ†åŒºå’Œç¬¬ä¸‰ä¸ªåˆ†åŒºæ ¼å¼åŒ–å,è¿™æ ·å½“sdå¡ä¸­çš„bootloaderæ‰¾ä¸åˆ°ç³»ç»Ÿ,ä¼šå°è¯•ä»pcieå¯åŠ¨\nå‰ææ˜¯ç³»ç»Ÿå·²ç»è¯†åˆ«åˆ°nvmeè®¾å¤‡\n1 $lsblk #æŸ¥çœ‹æ˜¯å¦æœ‰nvmeè®¾å¤‡ æ ¼å¼åŒ–å¯ä»¥æŠŠsdåŠ è½½åˆ°linux,ä½¿ç”¨fdisk\n1 2 3 4 5 6 $lsblk #æŸ¥çœ‹æ˜¯å¦æ­£å¸¸è¯†åˆ«sdå¡è®¾å¤‡ $fdisk /dev/sdc #è¿›å…¥äº¤äº’å¼cli d 2 #åˆ é™¤ç¬¬äºŒåˆ†åŒº d 3 #åˆ é™¤ç¬¬ä¸‰åˆ†åŒº w #ä¿å­˜ q #é€€å‡º ç„¶åæŠŠå®˜ç½‘ä¸‹è½½çš„é•œåƒçƒ§å½•åˆ°m2, æ¥å…¥rock5c\nå¯åŠ¨ååº”è¯¥å¯ä»¥çœ‹åˆ°ç³»ç»ŸæŒ‚è½½åœ¨nvme\n1 df -h å¯ä»¥ä¹°å®¹é‡æ¯”è¾ƒå°çš„sdå¡, 10å…ƒä»¥å†…çš„, çƒ§å½•ç³»ç»Ÿå¤±è´¥ä¹Ÿæ²¡å…³ç³»,å› ç¬¬ä¸€ä¸ªåˆ†åŒºåº”è¯¥è¿˜æ˜¯æˆåŠŸçš„,å¤±è´¥äº†åº”è¯¥ä¸å½±å“ä½¿ç”¨sdå¡ä½œä¸ºbootload\nè¿™æ ·æ¯”è¾ƒç»æµå®æƒ \n2. å¼€æœºä¸è‡ªåŠ¨WIFI å…³é—­ é’±åŒ…æœåŠ¡\nkwalletmanagerä¸­ç¦ç”¨æ‰\næŠŠwirelessç½‘ç»œåˆ é™¤ï¼Œé‡æ–°åˆ›å»º æ— çº¿è¿æ¥\nè®¾ç½®å›ºå®šipåœ°å€ ä¸ºwifiç”Ÿæˆä¸€ä¸ªéšæœºçš„mac (radxaä¼°è®¡æ²¡æœ‰ä¹°macåœ°å€,æ‰€ä»¥æ²¡æœ‰macåœ°å€å¯¼è‡´dhcpæœåŠ¡å™¨ä¸ä¼šç¼“å­˜,æ¯æ¬¡é‡æ–°å¼€æœºéƒ½æ˜¯æ–°çš„ip,çœŸæ˜¯æ»¡æ»¡çš„æƒŠå–œ)\néœ€è¦åœ¨/config/config.txtä¸­è®¾ç½®\n1 connect_wi-fi YOUR_WIFI_SSID YOUR_WIFI_PASSWORD å¦‚æœ æ˜¯åˆšåˆšå®Œç³»ç»Ÿï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªbefore.txtï¼Œ ä¹Ÿåœ¨é‡Œé¢åŠ \n3 . sshæœåŠ¡ä¸è‡ªåŠ¨å¯åŠ¨ 1 sudo systemctl enable ssh 4. UART sudo rsetp ä¸­é€‰æ‹©overlays é€‰æ‹©manager å,è¿›å…¥é€‰æ‹©æƒ³è¦çš„uart,å†é€‰æ‹©ok, å°±ä¼šé…ç½®å¯¹åº”çš„uart ç„¶åå†é€‰æ‹©ä¸€ä¸‹rebuild overlays\nå¦‚æœæƒ³ç¡®è®¤uartå¯¹åº”çš„pinè„šæ˜¯å“ªä¸ª, å¯ä»¥çœ‹å®˜æ–¹çš„æ–‡æ¡£ä¸­çš„ç¡¬ä»¶ç›®å½•ä¸­çš„ä¸€ä¸ªè¡¨æ ¼\nä¹Ÿå¯ä»¥åœ¨ rsetupä¸­ overlaysç›®å½•é€‰æ‹©ä¸€ä¸ª view indoçš„é€‰é¡¹, é€‰æ‹©æƒ³æŸ¥çœ‹çš„åŠŸèƒ½å,Ok,ä¼šé€ä¸ªæ˜¾ç¤ºå…¶pinè„šä¿¡æ¯\nå¼ºçƒˆæ¨èä½¿ç”¨ ttys2 ttyS4 ttyS6 (ä¹Ÿå°±æ˜¯é…ç½®ç•Œé¢ä¸­å‰3ä¸ªuart)\nç†ç”±: ttys2, ttys4 å’Œ raspberry pi 5 çš„pinè„šæ˜¯å…¼å®¹çš„, ttyS6åˆ™å¯ä»¥é…ç½®ä¸ºè°ƒè¯•ç”¨çš„ä¸²å£\n1 2 3 4 5 6 7 8 sudo rsetup #æ ‘è“æ´¾5 #uart0ç®¡è„š8ï¼Œ10 #uart2ç®¡è„š7ï¼Œ29 #ä¸rock5cçš„uart2-m0å’Œuart4-m2 ç®¡è„šå·ä¸€æ · #uart6-m1ä¸»è¦ç”¨ä½œè°ƒè¯•ç”¨ #æ‰€ä»¥å¼€è¿™ä¸‰ä¸ªä¸²å£ okåï¼Œ åˆ°åŒä¸Šçº§èœå•é€‰æ‹©é‡æ–°ç¼–è¯‘ï¼Œç„¶åé‡å¯\né‡å¯åä¼šå¤šå‡ºä¸‰ä¸ªä¸²å£ttyS2 ttyS4 ttyS6\n2,4å’Œæ ‘è“æ´¾ä¸²å£çš„40pin ç®¡è„šå·å¯ä»¥å…¼å®¹ï¼Œ6ä¸å…¼å®¹, æ‰€ä»¥æŠŠ6ä½œä¸ºè°ƒè¯•ç”¨çš„ä¸²å£,é¡ºä¾¿æŠŠæ³¢ç‰¹ç‡æ”¹ä¸ºå’Œæ ‘è“æ´¾å…¼å®¹çš„115200\né»˜è®¤çš„1500000 å¤ªéä¸»æµäº†\nä¿®æ”¹å®Œæ‰§è¡Œ\n1 sudo u-boot-update Rock5/hardware/5b/gpio - Radxa Wiki\noverlays/arch/arm64/boot/dts/rockchip/overlays/rk3588-fiq-debugger-uart2m2.dts at main Â· radxa/overlays (github.com)\nRock5/guide/hardware-configuration - Radxa Wiki\nRsetup | Radxa Docs\nç¡¬ä»¶æ¥å£è¯´æ˜ | Radxa Docs\n4.1 æµ‹è¯•uartçš„è„šæœ¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 # æµ‹è¯•è„šæœ¬ tst.py import serial import argparse import threading import time from datetime import datetime def send_data(ser): while True: current_time = datetime.now().strftime(\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;) ser.write(current_time.encode()) print(\u0026#34;Sent: {}\u0026#34;.format(current_time)) time.sleep(5) # æ¯5ç§’å‘é€ä¸€æ¬¡ def receive_data(ser): while True: if ser.in_waiting \u0026gt; 0: received_data = ser.readline().decode().strip() print(\u0026#34;Received: {}\u0026#34;.format(received_data)) def main(): parser = argparse.ArgumentParser(description=\u0026#34;Serial port listener and responder\u0026#34;) parser.add_argument(\u0026#39;--port\u0026#39;, type=str, required=True, help=\u0026#39;Serial port to use, e.g., /dev/ttyUSB0 or COM3\u0026#39;) parser.add_argument(\u0026#39;--baudrate\u0026#39;, type=int, required=True, help=\u0026#39;Baud rate for the serial communication\u0026#39;) args = parser.parse_args() try: with serial.Serial(args.port, args.baudrate, timeout=1) as ser: print(\u0026#34;Listening on {} at {} baud.\u0026#34;.format(args.port,args.baudrate)) # åˆ›å»ºå‘é€å’Œæ¥æ”¶çº¿ç¨‹ send_thread = threading.Thread(target=send_data, args=(ser,)) receive_thread = threading.Thread(target=receive_data, args=(ser,)) # å¯åŠ¨çº¿ç¨‹ send_thread.start() receive_thread.start() # ç¡®ä¿ä¸»çº¿ç¨‹ä¸ä¼šæå‰ç»“æŸ send_thread.join() receive_thread.join() except serial.SerialException as e: print(\u0026#34;Error: {}\u0026#34;.format(e)) if __name__ == \u0026#34;__main__\u0026#34;: main() 1 2 3 4 python -m venv test # åˆ›å»ºä¸€ä¸ªåä¸ºtestçš„pythonè™šæ‹Ÿç¯å¢ƒ cd test source bin/active # æ¿€æ´»pythonè™šæ‹Ÿç¯å¢ƒ python -m pip install pyserial #å®‰è£… pyçš„ä¸²å£åº“, æµ‹è¯•è„šæœ¬ä¼šä½¿ç”¨è¿™ä¸ªåº“ æµ‹è¯•è„šæœ¬ç”¨æ³•:\nå¦‚æœå½“å‰ç”¨æˆ·æ²¡æœ‰åœ¨dialoutç”¨æˆ·ç»„å…ˆæ·»åŠ è¿›å»,å¦åˆ™å°†æ²¡æœ‰ä½¿ç”¨/dev/tts çš„æƒé™\n1 2 3 4 $sudo usermod dialout $USER #éœ€è¦é‡å¯ç™»å½•ä¸€ä¸‹æ‰ç”Ÿæ•ˆ #å¯ä»¥ç”¨groups æ¥ç¡®è®¤æ˜¯ä¸æ˜¯æœ‰åœ¨è¿™ä¸ªæƒé™ç»„ $goups ,åœ¨æ¿€æ´»pythonè™šæ‹Ÿç¯å¢ƒå,\n1 sudo chmod +x ./tst.py --port /dev/ttyS2 --baudrate 115200 5 . GPIO å¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ä¸­raspberry pi 5çš„gpioéƒ¨åˆ†,éƒ½æ˜¯ä½¿ç”¨ gpiod,\nå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯, raspberry pi 5 40 pinè„šä¸Šçš„gpioéƒ½æ˜¯æ¥è‡ªgpio chip 4\nrock 5c åˆ™æ˜¯æŠŠå¤šä¸ªchip ä¸Šçš„pinè„šéƒ½å¼•åˆ°40 pinsä¸Šé¢äº†\nè¿˜æœ‰ä¸€ä¸ªè½¬æ¢è§„åˆ™,\nrock 5c ä¸­æ¯ä¸ªchip çš„32pinè¢«åˆ†ä¸ºabcd4ç»„ æ¯ç»„8ä¸ªPin\nA 0-7 B 8-15 C 16-23 D 24-31 ä¾‹å¦‚ radxaç³»ç»Ÿä¸­çš„GPIO3_B2 å¯¹åº” gpiodä¸­çš„ gpio chip1 11 line\n", 
        "url": "\/post\/radxa-rock5c-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/tags\/rock5c\/": {
        "title": "Rock5C",
        "tags": [],
        "content": "", 
        "url": "\/tags\/rock5c\/"
    },
    
    "\/tags\/uart\/": {
        "title": "UART",
        "tags": [],
        "content": "", 
        "url": "\/tags\/uart\/"
    },
    
    "\/tags\/amd\/": {
        "title": "AMD",
        "tags": [],
        "content": "", 
        "url": "\/tags\/amd\/"
    },
    
    "\/post\/amd-zynq-freertos-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/": {
        "title": "amd-zynq-freeRTOS-å¼€å‘ç¬”è®°",
        "tags": ["C","AMD","Zynq","FreeRTOS",],
        "content": "0.åº ZynqÂ®-7000 ç³»åˆ—åŸºäº Xilinx SoC æ¶æ„ã€‚è¿™äº›äº§å“åœ¨å•ä¸ªå™¨ä»¶ä¸­é›†æˆäº†åŠŸèƒ½ä¸°å¯Œçš„åŸºäº ARMÂ® Cortexâ„¢-A9 çš„åŒæ ¸æˆ–å•æ ¸å¤„ç†ç³»ç»Ÿ (PS) å’Œ 28 nm Xilinx å¯ç¼–ç¨‹é€»è¾‘ (PL)ã€‚ ARM Cortex-A9 CPU æ˜¯ PS çš„æ ¸å¿ƒï¼Œè¿˜åŒ…æ‹¬ç‰‡ä¸Šå­˜å‚¨å™¨ã€å¤–éƒ¨å­˜å‚¨å™¨æ¥å£å’Œä¸°å¯Œçš„å¤–è®¾è¿æ¥æ¥å£ã€‚\næœ¬æ–‡æ¡£è®°å½•çš„æ˜¯ zynq 7020å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»éªŒ\n7020ä¸ŠPSç«¯æœ‰ä¸¤ä¸ªARM æ ¸ ï¼Œè¿˜æœ‰ä¸€ä¸ªFPGAç”¨çš„PL\næˆ‘ä»¬çš„FPGAå·¥ç¨‹å¸ˆä½¿ç”¨Vivadoå®ŒæˆPLç«¯çš„å·¥ç¨‹é…ç½®ï¼Œç¼–ç åï¼Œå¯¼å‡º.xsa æ–‡ä»¶ï¼Œ\næˆ‘å’Œæˆ‘ç»„å†…çš„å°ä¼™ä¼´ä½¿ç”¨Vitis ï¼Œå°†.xsaç”Ÿæˆä¸º PSç«¯çš„å·¥ç¨‹\nä½¿ç”¨xilinx BSPä¸­é›†æˆçš„SDKå’ŒFreeRTOS,è¿›è¡Œè£¸æœºå¼€å‘\nç”±æˆ‘åŒäº‹å®Œæˆç½‘ç»œç›¸æœºæ ¸å¿ƒä»£ç \næˆ‘ä½œä¸ºæ‘¸é±¼ç½ªçŠ¯ï¼Œè¢«å‘é…åˆ°è¿™ä¸ªé¡¹ç›®åšä¸€äº›æ¯”è¾ƒæœ‰æ‰‹å°±è¡Œçš„ä»»åŠ¡\nè£¸æœºæ„å‘³ç€å¾ˆå¤šå·¥å…·éƒ½ä¸èƒ½ç”¨äº†ï¼Œæ¯”å¦‚ssh, shellï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œ è¿˜æœ‰c++çš„libc\næ‰€ä»¥æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä¸»è¦ç”¨cè¿›è¡Œä¸‹é¢è¿™å‡ é¡¹å¼€å‘\næ–‡ä»¶ç³»ç»Ÿç§»æ¤ï¼ŒéªŒè¯ (bspä¸­æœ‰ç°æˆçš„) FreeRTOSä¸²å£å‘½ä»¤è¡ŒCLIå·¥å…·ç§»æ¤ ï¼ˆç”¨æ¥å¹³æ›¿Linuxçš„ssh + shell æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ ä¸Šä¼ æ–‡ä»¶ æ‰“å°æ–‡ä»¶å†…å®¹ æ‰“åŒ…ç¨‹åºï¼Œåˆ¶ä½œå¼•å¯¼ï¼Œçƒ§å½•å›ºåŒ– 1.FreeRTOSä¸²å£CLI ç§»æ¤ zynq 7020æœ‰ä¸¤ä¸ªä¸²å£ï¼Œé»˜è®¤ä¼šæŠŠå¯åŠ¨ä¿¡æ¯å†™åˆ°ç¬¬0ä¸ªï¼Œ ç¬¬1ä¸ªä¸²å£åˆ™é¢„ç•™ç€ï¼Œ\næˆ‘ä»¬çš„ç¡¬ä»¶å·¥ç¨‹å¸ˆåªæŠŠä¸²å£0 æš´éœ²åˆ°è®¾å¤‡å¤–å£³ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„æ˜¯ zynq é»˜è®¤ä¸²å£é€šé“ä¸Š åŠ ä¸ŠCLIå‘½ä»¤è¡Œäº¤äº’åŠŸèƒ½ä»¥åŠä¼ è¾“æ–‡ä»¶åŠŸèƒ½ï¼Œ\n1.1 zynqç›¸å…³æºç è·å– ç­¾å‡ºFreeRTOSæºç ï¼Œåˆ‡æ¢åˆ°vitis å†…ç½®çš„FreeRTOSå¯¹åº”çš„ç‰ˆæœ¬ï¼Œå¯¹äºæˆ‘æ¥è¯´æ˜¯10.4.x ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹åˆ—è¿™äº›\nCLIæ’ä»¶æ•´ä¸ªç›®å½•\nä¸²å£CLIå®ç°\nå‡ ä¸ªç¤ºä¾‹å‘½ä»¤å®ç°\nZynqä¸²å£å¤´æ–‡ä»¶ å’Œ Zynqçš„ä¸²å£å®ç° ï¼ˆå®˜æ–¹æä¾›äº†ä¸€ä¸ªåŸºäºé˜Ÿåˆ—çš„ä¸²å£ï¼Œæ€§èƒ½æ¯”è¾ƒå·®ï¼Œä½†å¤Ÿç”¨ï¼Œå¦‚æœæƒ³æ›´å¿«ï¼Œéœ€è¦è‡ªå·±ç”¨DMAå®ç°\n1.2 ä¿®æ”¹æºç  1.2.1 è§£å†³ç¼–è¯‘é”™è¯¯ æŠŠ 1.1ä¸­2ï¼Œ3ï¼Œ4ï¼Œ æ–‡ä»¶æ”¾æ”¾ 1 ç›®å½•ä¸­ï¼Œ æŠŠç›®å½•æ”¾åˆ°ä½ çš„Vitiså·¥ç¨‹ä¸­ï¼Œè®¾ç½®ä¸ºInclude path\næ·»åŠ ä¸€ä¸ªæºç ä¸­ç”¨åˆ°çš„çš„å®\n1 #define configCOMMAND_INT_MAX_OUTPUT_SIZE 2096 ç”¨äºå®šä¹‰cli è¾“å‡ºbuffçš„å¤§å°ï¼Œå¦‚æœä¸å®šä¹‰ä¼šç¼–è¯‘æŠ¥é”™\nå®˜ç½‘ç¤ºä¾‹æ˜¯åŠ åœ¨FreeRTOSConfig.hé‡Œï¼Œ ä¸è¿‡vitisçš„freeRTOSä»£ç ä¼šåœ¨ä½ ä¿®æ”¹bspé…ç½®æ—¶ä»å®‰è£…ç›®å½•å¤åˆ¶è¦†ç›–é¡¹ç›®ä¸­çš„ï¼Œæ‰€ä»¥å»ºè®®æŠŠè¿™ä¸ªå®åŠ åˆ°è‡ªå·±å·¥ç¨‹é‡Œ\n1.2.2 ä¸²å£å·ä¿®æ”¹ ç„¶åç¡®è®¤ä¸€ä¸‹è‡ªå·±æƒ³è¦ç”¨äºå‘½ä»¤è¡Œäº¤äº’çš„ä¸²å£ç«¯å£æ˜¯0æˆ–1ï¼Œå¦‚æœæ˜¯1çš„è¯ï¼Œä¸éœ€è¦ä¿®æ”¹serial.c (åœ¨æ­¥éª¤1.1.4ä¸­è·å–)\nå¦‚æœæ˜¯0çš„è¯ï¼Œéœ€è¦ä¿®æ”¹æºç ä¸­çš„å®ï¼Œ\nä¿®æ”¹å†…å®¹å‚ç…§ä¸‹é¢çš„diff å›¾ç‰‡ï¼Œ å·¦è¾¹æ˜¯ä¸²å£0ç«¯å£ï¼Œå³è¾¹æ˜¯ä¸²å£1ç«¯å£ï¼Œ æœ‰2ä¸ªå®éœ€è¦ä¿®æ”¹\n1.2.3 è‡ªå®šä¹‰cli å‘½ä»¤ åœ¨ Sample-CLI-Commands.cä¸­æœ‰vRegisterSampleCLICommandsæ–¹æ³•ï¼Œç”¨äºæ³¨å†Œå‘½ä»¤\nåœ¨UARTCommandConsole.cä¸­ æ”¶åˆ°ç”¨æˆ·æŒ‰é’®ä¸‹æ¢è¡Œåï¼Œä¼šè‡ªåŠ¨åˆ†å‰²å‘½ä»¤ï¼Œæ ¡éªŒå‚æ•°ä¸ªæ•°ï¼Œè°ƒç”¨æ³¨å†Œçš„å‘½ä»¤ç»“æ„ä½“ä¸­çš„å‡½æ•°æŒ‡é’ˆï¼Œä¼ é€’å‚æ•°\n1.2.4 åœ¨main()ä¸­å¯åŠ¨å‘½ä»¤è¡Œcliå¹¶æ³¨å†Œå‘½ä»¤ 70 int main( void )\r1 {\r2 /* Start the tasks that implements the command console on the UART, as\r3 described above. */\r4 vUARTCommandConsoleStart( mainUART_COMMAND_CONSOLE_STACK_SIZE, mainUART_COMMAND_CONSOLE_TASK_PRIORITY );\r5\r6 /* Register the standard CLI commands. */\r7 vRegisterSampleCLICommands();\r8 vUARTCommandConsoleStart ç”¨äºå¯åŠ¨ä¸€ä¸ªè¾ƒé«˜ä¼˜å…ˆçº§çš„freeRTOSçš„task,\nvRegisterSampleCLICommandsç”¨äºæ³¨å†Œ 1.2.3ä¸­å†™çš„é‚£äº›å‘½ä»¤å›è°ƒï¼Œè¯¦ç»†é€»è¾‘æŸ¥çœ‹UARTCommandConsole.cä¸­çš„å®ç°\n1.2.5 å…³äºä¸Šä¼ æ–‡ä»¶ åœ¨CLI/UARTCommandConsole.cï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ æ³¨å†Œçš„å‘½ä»¤å›è°ƒä¼šè¢«è°ƒç”¨1æ¬¡æˆ–å¤šæ¬¡ï¼Œç›´åˆ°è¿”å› 1\nåˆ©ç”¨å¥½è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å†™ä¸€ä¸ªå¾ªç¯æ¥æ”¶ä¸²å£æ•°æ®çš„å‘½ä»¤\n2.çƒ§å½•å›ºåŒ– 2.1 åˆ¶ä½œå›ºä»¶ ä¹‹å‰æˆ‘ä»¬åœ¨PSè·‘linuxæ—¶ï¼ŒZynq çš„å¯åŠ¨é¡ºåºä¸º\nbootROM (å›ºåŒ–åœ¨ç¡¬ä»¶ä¸­ï¼Œä¸å¯ä¿®æ”¹) fsbl (ç¬¬ä¸€å¯åŠ¨é˜¶æ®µ) uboot linux ç°åœ¨æˆ‘ä»¬åœ¨PSè·‘è£¸æœºç¨‹åºï¼Œä¸å†éœ€è¦uboot\nbootROM fsbl ï¼ˆç”¨vivadoå¯¼å‡ºçš„.xsaç”Ÿæˆçš„ï¼‰ .bit å’Œ .elf æ‰€ä»¥åœ¨vitisä¸­åˆ›å»ºboot.binæ—¶è¿™æ ·é€‰æ‹©\nboot.binçš„ä¸‰ä¸ªåˆ†åŒºï¼Œ\nç¬¬ä¸€ä¸ªæ˜¯fsbl.elf, partition typeä¸ºbootloader\nç¬¬äºŒä¸ªæ˜¯PLçš„ .bit , partition typeä¸ºdatafile\nç¬¬ä¸‰ä¸ªæ˜¯PSçš„.elf , partition typeä¸ºdatafile\n2.2 å¼€å¯ç¡¬ä»¶æœåŠ¡ ç”¨ jtagç”µç¼†è¿æ¥ zynq å’Œ pc\næ‰“å¼€vivado, åœ¨ä¸»ç•Œé¢ä¸‹é¢çš„å‘½ä»¤è¡Œè¾“å…¥\n1 hw_server è¿™æ—¶ä¼šåœ¨3121ç«¯å£æ‰“å¼€ä¸€ä¸ªç¡¬ä»¶serverï¼Œ å…¶ä»–ç”µè„‘æˆ–æœ¬æœºå¯ä»¥é€šè¿‡è¿™ä¸ªæœåŠ¡åœ¨çº¿ä¸‹è½½æˆ–çƒ§å½•ç¨‹åº\n2.3 çƒ§å½• åˆ›å»ºä¸€ä¸ªæ‰¹å¤„ç†è„šæœ¬ flash.bat\n1 2 3 4 set cmdpath=D:\\Xilinx\\SDK\\2018.3\\bin\\ set program_flash=%cmdpath%program_flash %program_flash% -f .\\BOOT.BIN -offset 0 -flash_type qspi_single -fsbl .\\fsbl.elf -cable type xilinx_tcf url TCP:127.0.0.1:3121 æŠŠBOOT.binå’Œ fsbl.elf å’Œè¿™ä¸ªè„šæœ¬æ”¾åœ¨ä¸€èµ·ï¼Œ\næ‰§è¡Œ\n1 ./flash.bat æ­¤æ—¶åº”è¯¥çœ‹åˆ°ç¨‹åºæ­£åœ¨çƒ§å½•ï¼Œ å¦‚æœæœ‰é”™è¯¯æˆ–çƒ§å½•å®Œæˆï¼Œéƒ½ä¼šåœ¨å‘½ä»¤çª—å£ä½“ç°\n2.4 æ³¨æ„ 2021çš„vitis, vivadoä¸æ”¯æŒ zynq 7020çš„çƒ§å½•ï¼ˆæ²¡æœ‰qsip-singleé€‰é¡¹ï¼‰ï¼Œå¯èƒ½æ˜¯å› ä¸ºç¡¬ä»¶å¤ªæ—§è½¯ä»¶å¤ªæ–°\næ‰€ä»¥ æ­¥éª¤2.3ä¸­ï¼Œæˆ‘æ‰ä½¿ç”¨è°ƒç”¨ vivado 2018ç‰ˆæœ¬çš„sdkè¿›è¡Œçƒ§å½•\n3. é™„å½•:é—®é¢˜è®°å½• vitis 2021å›ºåŒ– zynq 7020å¤±è´¥\næ–°çš„ ide çš„qsip flashæ¨¡å¼ä¸æ”¯æŒ ç»å…¸æ¬¾ zynq 7020èŠ¯ç‰‡ç›¸åº”çš„qsip flashæ¨¡å¼ (qsip-single)ï¼Œ\nç”¨2021é¡¹ç›®ç”Ÿæˆçš„ fsbl+ bit+ elf ç”Ÿæˆ boot.bin\nå†ç”¨vitis 2018 + vtis 2018 hello woldçš„ .fsbl æ–‡ä»¶ çƒ§å½• boot.binå¯ä»¥æˆåŠŸçƒ§å½•+ å¯åŠ¨\nç¨‹åºä¸‹è½½å®Œæˆï¼Œä½†æ²¡æœ‰å¯åŠ¨ï¼Œå¼¹çª—æç¤º mmu section translation fault\nå›ºåŒ–çš„ç¨‹åºçš„MMUä¸­çš„åœ°å€å’Œåœ¨çº¿ jtag å†™å…¥çš„ç³»ç»ŸMMU sectionsä¿¡æ¯ä¸åŒ¹é…ï¼Œé‡æ–°å›ºåŒ–å³å¯\nxilffsæ–‡ä»¶ç³»ç»Ÿåˆ›æ–°æ–‡ä»¶æ—¶æç¤ºæ‰“å¼€å¤±è´¥\nç¡®ä¿å·²ç»æ ¼å¼åŒ–äº†æ–‡ä»¶ç³»ç»Ÿå\næ–‡ä»¶åç§°é™åˆ¶åœ¨8ä¸ªå­—ç¬¦å†…å°±æ²¡é—®é¢˜\nxilffsæ–‡ä»¶ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶åï¼Œç¬¬äºŒæ¬¡æ¬¡è°ƒç”¨f_seekå†™å…¥æ–‡ä»¶å¤±è´¥\nå¯èƒ½æ˜¯å› ä¸ºxilffsæ˜¯ä¸€ä¸ªå¾ˆç®€é™‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥åˆ›å»ºæ–‡ä»¶ååªæ”¯æŒå†™ä¸€æ¬¡ï¼Œå…³é—­\nè¿™ä¸ªä¸å¤ªç¡®å®šï¼Œæš‚æ—¶å¼€ä¸€ä¸ªå¤§bufferç”¨æ¥æ¥æ”¶ä¸²å£å­—èŠ‚æµï¼Œä¸€æ¬¡æ€§å†™å…¥æ–‡ä»¶\nç¨‹åºç¼–è¯‘æ—¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆboot.bin\nåœ¨ project_systemé¡¹ç›®å³é”® ï¼Œ create boot imageï¼Œ\nä¾æ¬¡å¡«å…¥.fsbl .bit .elfåï¼Œ ç”Ÿæˆä¸€æ¬¡boot.binï¼Œä¹‹åæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šç”Ÿæˆ\nç”Ÿæˆçš„boot.binä¸èƒ½çƒ§å½•å›ºåŒ–æˆåŠŸï¼Œä½†ç”¨å¯ä»¥åœ¨çº¿å†™å…¥jtag, åœ¨çº¿è°ƒè¯•\næ£€æŸ¥.bitæ–‡ä»¶æ˜¯ä¸æ˜¯å’Œç”¨æ¥ç”Ÿæˆfsblé¡¹ç›®çš„ FPGAå¯¼å‡ºçš„ .xsaæ˜¯å¯¹åº”çš„ï¼Œå¦‚æœä¸æ˜¯ï¼Œå¯èƒ½ä¼šå‡ºç°å›ºåŒ–å¤±è´¥ï¼Œä½†jtagå¯ä»¥åœ¨çº¿å†™å…¥çš„æƒ…å†µ\n", 
        "url": "\/post\/amd-zynq-freertos-%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/tags\/c\/": {
        "title": "C",
        "tags": [],
        "content": "", 
        "url": "\/tags\/c\/"
    },
    
    "\/tags\/freertos\/": {
        "title": "FreeRTOS",
        "tags": [],
        "content": "", 
        "url": "\/tags\/freertos\/"
    },
    
    "\/tags\/zynq\/": {
        "title": "Zynq",
        "tags": [],
        "content": "", 
        "url": "\/tags\/zynq\/"
    },
    
    "\/tags\/ctags\/": {
        "title": "CTags",
        "tags": [],
        "content": "", 
        "url": "\/tags\/ctags\/"
    },
    
    "\/tags\/vim\/": {
        "title": "VIM",
        "tags": [],
        "content": "", 
        "url": "\/tags\/vim\/"
    },
    
    "\/post\/vim-ctag-%E7%AC%A6%E5%8F%B7%E6%9F%A5%E6%89%BE\/": {
        "title": "vim-ctag-ç¬¦å·æŸ¥æ‰¾",
        "tags": ["C\u002b\u002b","C","VIM","CTags",],
        "content": "0x00 ä¸ºä»€ä¹ˆä½¿ç”¨CTag é•¿ä¹…ä»¥æ¥ï¼Œ æˆ‘ä¸€ç›´åœ¨ideä¸­ä½¿ç”¨VIMæ’ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–åœ¨Bash,Zshä¹Ÿä½¿ç”¨vimä½œä¸ºåŸºæœ¬çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œ æ‰€æœ‰çš„Gitæ“ä½œä¹Ÿéƒ½éƒ½äº¤ç»™äº†VIM+ Shellï¼Œåœ¨æ–‡æœ¬ç¼–è¾‘æ–¹é¢ï¼Œæˆ‘ä½¿ç”¨ç»Ÿä¸€çš„ä¸€å¥—å¿«æ·é”®æ–¹æ¡ˆ\næˆ‘ä½¿ç”¨è¿‡çš„IDEï¼švisual studio , visual studio code , qt creator\nä»–ä»¬éƒ½æœ‰å¾ˆå¥½çš„VIMæ’ä»¶ï¼Œå¹¶ä¸”é›†æˆäº†å¾ˆå¥½çš„ç¬¦å·æŸ¥æ‰¾ï¼Œæ‰€ä»¥ä½œä¸ºå®ç”¨ä¸»ä¹‰è€…ï¼Œæˆ‘ä¸€ç›´è§‰å¾—æ²¡æœ‰ä½¿ç”¨CTag+VIMçš„å¿…è¦\nç›´åˆ°ä¸Šå‘¨ç–¯ç‹‚æ‘¸é±¼åï¼Œè¢«æŠ“å»å†™ C \u0026amp; Embeddedï¼Œ æˆ‘æ¥è§¦åˆ°äº† Xilinx Vitisè¿™æ¬¾AMDæ——ä¸‹çš„IDE,è¿™è´§ç«Ÿç„¶æ²¡æœ‰VIMé”®ç›˜æ–¹æ¡ˆ\næ•´ä¸€å‘¨åœ¨è¿™æ¡è·¯ä¸Šæˆ‘èµ°å¾—åƒä¸€ä¸ªç˜¸å­ï¼Œç—›å®šæ€ç—›ï¼Œæˆ‘è®¤ä¸ºæ˜¯æ—¶å€™ç«¯å‡ºCTagè¿™æ ¹é˜µå¹´ç«è…¿äº†\n0x01 CTagå®‰è£…+ç”Ÿæˆç´¢å¼• 0x0101 å®‰è£… ç”±äºç¼–è¯‘æœåŠ¡å™¨æ˜¯Ubuntuï¼Œæ‰€ä»¥å…ˆåªè®°å½•Ubuntuï¼Œ å…¶ä»–å¹³å°å¤§å·®ä¸å·®\n1 $ sudo apt-get update \u0026amp;\u0026amp; sudo apt-get install -y exuberant-ctags 0x0110 ç”Ÿæˆç´¢å¼• å†™ä¸€ä¸ªç”¨äºç”Ÿæˆc/c++ tagçš„è„šæœ¬ ctag.sh\n1 2 3 4 5 6 7 8 9 #!/bin/bash regex=\u0026#34;^.+.+$\u0026#34; if [[ ! $1 =~ $regex ]]; then echo \u0026#34;éœ€è¦è¾“å…¥ç”Ÿæˆtagçš„ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼Œä¸èƒ½æ˜¯â€˜.â€™\u0026#34; exit 1 fi cd $1 ctags -R --languages=c,c++ --exclude=node_modules --c++-kinds=+p --fields=+iaS --extra=+q . -Rï¼šé€’å½’å¤„ç†å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚\n--languages=c,c++ï¼šæŒ‡å®šè¦å¤„ç†çš„ç¼–ç¨‹è¯­è¨€ä¸º C å’Œ C++ã€‚\n--exclude=node_modulesï¼šæ’é™¤ node_modules ç›®å½•ï¼Œä¸å¤„ç†è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚\n--c++-kinds=+pï¼šåœ¨ C++ ä¸­åŒ…æ‹¬å‡½æ•°åŸå‹ï¼ˆprototypesï¼‰æ ‡ç­¾ã€‚\n--fields=+iaSï¼šä¸ºç”Ÿæˆçš„æ ‡ç­¾æ·»åŠ é¢å¤–çš„ä¿¡æ¯ã€‚\niï¼šåŒ…å«ç»§æ‰¿ä¿¡æ¯ï¼ˆinheritance informationï¼‰ã€‚ aï¼šåŒ…å«ç±»æˆå‘˜çš„è®¿é—®æ§åˆ¶ä¿¡æ¯ï¼ˆaccess control informationï¼‰ï¼Œå¦‚ publicã€protected å’Œ privateã€‚ Sï¼šåŒ…å«æ ‡ç­¾çš„èŒƒå›´ä¿¡æ¯ï¼ˆscope informationï¼‰ï¼Œå³å‡½æ•°ã€ç±»æˆ–ç»“æ„ä½“æ‰€åœ¨çš„èŒƒå›´ã€‚ --extra=+qï¼šä¸ºæ ‡ç­¾æ·»åŠ é¢å¤–çš„æ‰©å±•ä¿¡æ¯ã€‚\nqï¼šåŒ…å«ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚ ä½¿ç”¨è„šæœ¬\n1 2 3 sudo chmod +x ctag.sh cd src ctag.sh $(pwd) 0x10 åœ¨VIMä¸­ä½¿ç”¨CTag ç´¢å¼• åœ¨.vimrc ä¸­é…ç½® tagsçš„è·¯å¾„\n1 set tags=./.tags;$HOME #ä»å½“å‰ç›®å½•å‘ä¸Šé€’å½’æœç´¢.tagsç›®å½•ï¼Œç›´åˆ°åˆ°$HOMEç›®å½• åœ¨ Vim ä¸­æ‰“å¼€ä»»ä½•æºæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹åŸºæœ¬å‘½ä»¤ï¼š\né”®ç›˜å‘½ä»¤ è¡ŒåŠ¨ Ctrl + ] æˆ– æˆ–g] :ta[g] Ctrl+rw ä½¿ç”¨æ ‡ç­¾æ–‡ä»¶ä¸­çš„ä¿¡æ¯è·³è½¬åˆ°å…‰æ ‡ä¸‹æ–¹çš„æ ‡ç­¾ :ts[elect] \u0026lt;tag_name\u0026gt; ä½¿ç”¨æ ‡ç­¾æ–‡ä»¶ä¸­çš„ä¿¡æ¯åˆ—å‡ºåŒ¹é…çš„æ ‡ç­¾ã€‚å¦‚æœæœªç»™å‡ºï¼Œåˆ™ä½¿ç”¨æ ‡ç­¾å †æ ˆä¸­çš„æœ€åä¸€ä¸ªæ ‡ç­¾åç§°\u0026lt;tag_name\u0026gt;``\u0026lt;tag_name\u0026gt; :pts[elect] \u0026lt;tag_name\u0026gt; åœ¨ä¸ç§»åŠ¨å…‰æ ‡çš„æƒ…å†µä¸‹åœ¨â€œé¢„è§ˆâ€çª—å£ï¼ˆæ°´å¹³æ‹†åˆ†ï¼‰ä¸­æ‰§è¡Œå¹¶æ˜¾ç¤ºæ–°æ ‡ç­¾:tselect Ctrl + w } æˆ– :ptag Ctrl+rw æ‰“å¼€ä¸€ä¸ªé¢„è§ˆçª—å£ï¼Œå…¶ä¸­åŒ…å«æ ‡è®°å®šä¹‰çš„ä½ç½®ã€‚å…‰æ ‡ä¸ä¼šæ›´æ”¹å…¶ä½ç½®ï¼Œå› æ­¤ä¸ä¼šæ›´æ–°æ ‡ç­¾å †æ ˆ Ctrl + wz æˆ– :pc å…³é—­å‘½ä»¤åˆ›å»ºçš„é¢„è§ˆçª—å£Ctrl+w } Ctrl + w Ctrl + ] åœ¨æ°´å¹³æ‹†åˆ†ä¸­æ‰“å¼€å®šä¹‰ :tn è·³è½¬åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…æ ‡ç­¾ï¼ˆå¦‚æœæœ‰å¤šä¸ªåŒ¹é…é¡¹ï¼‰ :tp è·³è½¬åˆ°ä¸Šä¸€ä¸ªåŒ¹é…æ ‡ç­¾ï¼ˆå¦‚æœæœ‰å¤šä¸ªåŒ¹é…é¡¹ï¼‰ Ctrl-t åœ¨æ ‡ç­¾å †æ ˆä¸­è·³å› :tags æ˜¾ç¤ºæ ‡ç­¾å †æ ˆçš„å†…å®¹ã€‚æ´»åŠ¨æ¡ç›®æ ‡æœ‰\u0026gt;\u0026lt;br / :tag æ­£åˆ™ ç”¨æ­£åˆ™æœç´¢tag ä¹Ÿå¯ä»¥åœ¨shellä¸­ç›´æ¥ä½¿ç”¨vim æ‰“å¼€ æœç´¢çš„tag\n1 vim -t \u0026#39;/vimregex\u0026#39; 0x11 å…¶ä»–è¡¥å…… éœ€è¦æ³¨æ„ï¼Œä¿®æ”¹ç¨‹åºåéœ€è¦é‡æ–°ç”Ÿæˆctagï¼Œ\n0x1100 ä»£ç è¡¥å…¨ ç”Ÿæˆctagsåä¹Ÿå¯ä»¥ç”¨åœ°ä»£ç è¡¥å…¨ï¼Œ ctrl+n, ctrl+p\n0x1101 å¤´æ–‡ä»¶åˆ‡æ¢ å…‰æ ‡å®šä½äº#include gf å¯ä»¥è·³åˆ°å¤´æ–‡ä»¶ï¼Œ å‰æ˜¯åœ¨.vimrcä¸­é…ç½®äº†path+=path2include\nä¹Ÿå¯ä»¥é…ç½® åœ¨.vimrc ä¸­é…ç½®path+=**\nè¿™æ ·vimä¸­ä½¿ç”¨ :find å°±ä¼šé€’å½’æœç´¢ï¼Œ\nç„¶å\n: find %:r.c åˆ‡æ¢åˆ°å½“å‰headerå¯¹åº”çš„source\næˆ–\n: find %:r.h åˆ‡æ¢åˆ°å½“å‰sourceå¯¹åº”çš„header\n", 
        "url": "\/post\/vim-ctag-%E7%AC%A6%E5%8F%B7%E6%9F%A5%E6%89%BE\/"
    },
    
    "\/tags\/jetson\/": {
        "title": "Jetson",
        "tags": [],
        "content": "", 
        "url": "\/tags\/jetson\/"
    },
    
    "\/tags\/nvidia\/": {
        "title": "Nvidia",
        "tags": [],
        "content": "", 
        "url": "\/tags\/nvidia\/"
    },
    
    "\/post\/nvidia-jetson%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/": {
        "title": "nvidia-jetsonå¼€å‘ç¬”è®°",
        "tags": ["C\u002b\u002b","Nvidia","Jetson",],
        "content": " 2024.05.01 æ›´æ–° jetson orin nx åˆ·nvme\nä¸€å¼€å§‹åªé’ˆå¯¹jetson xavierå†™æ–‡æ¡£,åæ¥å…¬å¸åˆç”¨äº†jetson orin, æ‰€ä»¥å°±ä¸€èµ·å†™ä¸€ä¸ªæ–‡æ¡£é‡Œäº†, jetson orinå¯ä»¥åˆ·æœ€æ–°çš„ jetson linux å’Œ jetpack, ä¸è¿‡ä¸ºäº†åªç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬, æˆ‘å†³å®šä¸ç®¡æ˜¯xavierè¿˜æ˜¯orin éƒ½ä½¿ç”¨ xavierèƒ½ç”¨çš„æœ€æ–°ç‰ˆæœ¬, å³ jetpack 5.1.3+ jeson linux 35.5.0\n1. åˆ·æœº jetson xavier NXå¼€å‘æ¿å®˜æ–¹æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨åˆ·sdå¡çš„æ–¹å¼ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨flash.shè„šæœ¬æˆ–l4t_initrd_flash.shç›´æ¥åˆ·ï¼Œè¿™æ ·å¯ä»¥çœç•¥åˆ¶ä½œé•œåƒçš„æ­¥éª¤\næˆªæ­¢2024.3.26ï¼Œ jetson xavier NXå·²ç„¶åœäº§ï¼Œä¸è¿‡ä»ç„¶å¯ä»¥ä½¿ç”¨ JetPack 5.1.3 å¼€å‘åŒ…è¿›è¡Œå¼€å‘\næˆ‘ä½¿ç”¨æˆ‘çš„ubuntu16.04 å¼€å‘ç¯å¢ƒçš„è™šæ‹Ÿæœºåˆ¶ä½œé•œåƒåŠçƒ§å½•è„šæœ¬çƒ§å½•ï¼Œ\nä¹Ÿå¯ä»¥ä½¿ç”¨å®˜æ–¹çš„guiåˆ·æœºå·¥å…·sdk-managerï¼ˆps åç§°æœ‰ç‚¹å¿˜è®°äº†ï¼Œå¥½åƒæ˜¯è¿™ä¸ªï¼‰ï¼Œä¸è¿‡é‚£éœ€è¦ubuntu18æˆ–ubuntu20\n1.1 å‡†å¤‡å·¥ä½œ åœ¨Jetson Linux | NVIDIA Developerä¸‹è½½è¿™ä¸¤ä¸ª\nTitle Driver Package (BSP) Sample Root Filesystem æœ€å¥½åœ¨linuxä¸­ä¸‹è½½ï¼Œå› ä¸ºwindowsæ–‡ä»¶ç³»ç»Ÿä¸æ”¯æŒç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œæˆ‘æ‹…å¿ƒè§£å‹åä¼šå½±å“æ–‡ä»¶å®Œæ•´æ€§\nä¸‹è½½åå¾—åˆ°\n1 2 3 4 5 6 ~/Downloads/nvidia/Linux_for_Tegra$ ll total 2229716 drwxrwxr-x 3 deepvision deepvision 4096 3æœˆ 26 13:10 ./ drwxr-xr-x 11 deepvision deepvision 4096 3æœˆ 26 12:03 ../ -rwxrw-rw- 1 deepvision deepvision 759217542 3æœˆ 26 11:10 Jetson_Linux_R35.5.0_aarch64.tbz2* -rwxrw-rw- 1 deepvision deepvision 1523988703 3æœˆ 25 11:27 Tegra_Linux_Sample-Root-Filesystem_R35.5.0_aarch64.tbz2* è§£å‹å‡ºLinux_for_Tegraç›®å½•\n1 ~/Downloads/nvidia$ tar xf Jetson_Linux_R35.5.0_aarch64.tbz2 è§£å‹æ ¹ç›®å½•\n1 ~/Downloads/nvidia$ sudo tar xpf Tegra_Linux_Sample-Root-Filesystem_R35.5.0_aarch64.tbz2 -C Linux_for_Tegra/rootfs/ ç»„è£…\n1 ~/Downloads/nvidia/Linux_for_Tegra$ sudo ./apply_binaries.sh ä¸ºæ‰§è¡Œè„šæœ¬åšå‡†å¤‡\n1 ~/Downloads/nvidia/Linux_for_Tegra$ sudo ./tools/l4t_flash_prerequisites.sh æ‰§è¡Œè¿‡ç¨‹å¯èƒ½ä¼šæç¤ºéœ€è¦å®‰è£…ä¸€äº›åŒ…ï¼ŒæŒ‰ç…§æç¤ºå®‰è£…å°±è¡Œäº†\n1.2 jetson xavier 1.2.1 åˆ·sdå¡ åˆ¶ä½œåˆ·æœºç”¨çš„é•œåƒåŒ…\n1 ~/Downloads/nvidia/Linux_for_Tegra/tools$ ./jetson-disk-image-creator.sh -o \u0026lt;blob_name\u0026gt; -b \u0026lt;board\u0026gt; \u0026lt;blob_name\u0026gt; ä¸ºè¾“å‡ºçš„é•œåƒåç§°\n\u0026lt;board\u0026gt; åˆ™é€šè¿‡æŸ¥è¡¨çš„æ–¹å¼è·å– jetson-modules-and-configurations\næœ€ç»ˆæˆ‘éœ€è¦æ‰§è¡Œçš„æ˜¯\n1 ~/Downloads/nvidia/Linux_for_Tegra/tools$ sudo ./jetson-disk-image-creator.sh -o sd-blob.img -b jetson-xavier-nx-devkit -d SD æ‰§è¡Œè¿‡ç¨‹å¯èƒ½ä¼šæç¤ºéœ€è¦å®‰è£…ä¸€äº›åŒ…ï¼ŒæŒ‰ç…§æç¤ºå®‰è£…å°±è¡Œäº†\nå¦‚pythonç¼ºå°‘yamlæ¨¡å—\n1 $python3 -m pip install pyyaml 1.2.2 åˆ·eMMCå’Œsdå¡ å¦‚æœä¹‹å‰ç”¨çš„ç³»ç»Ÿæ˜¯å®‰è£…åœ¨NVMe m2ä¸Šï¼Œ ä½†åˆ‡æ¢å›sdå¡ï¼Œç”¨ä¸Šé¢çš„æ–¹å¼å¯èƒ½ä¼šå¤±è´¥ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºè¿™ç§æ–¹å¼åªåˆ·ç³»ç»Ÿåˆ°å¡ä¸Šï¼Œ ä¸ä¼šåˆ·QSPI-NOR/eMMCä¸­çš„å¼•å¯¼\nå¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œéœ€è¦å¼ºåˆ¶åˆ·æœºï¼ŒæŠŠæ¿å­ç”µæ–­åï¼ŒçŸ­æ¥æ¿å­çš„ GNDå’ŒFC REC(9,10 ç®¡è„š)ï¼Œå†ä¸Šç”µï¼Œè¿›å…¥recoveryæ¨¡å¼ï¼ˆè¿™æ—¶å¯ä»¥å–ä¸‹çŸ­æ¥çº¿ï¼Œå®æµ‹ä¸å–ä¹Ÿä¸å½±å“ï¼‰ï¼Œé€šè¿‡Usbçº¿åˆ·æœºï¼Œæ‰§è¡Œ\n1 sudo ./flash.sh jetson-xavier-nx-devkit internal æ³¨æ„ï¼Œä»¥ä¸Šè¯´çš„éƒ½æ˜¯jetson-xavier-nx å…¶ä»–æ¿å­æœ‰å¼ºåˆ¶æ¢å¤æŒ‰é’®\n1.2.3 åˆ· nvme ç†è®ºä¸Šåº”è¯¥ä½¿ç”¨sdkmanageå®‰è£…ï¼Œä½†æˆ‘çš„å¼€å‘ç¯å¢ƒæ˜¯ubuntu16ï¼Œæ‰€ä»¥ä»ç„¶ä½¿ç”¨è„šæœ¬\nå®˜ç½‘çš„èµ„æ–™å¾ˆå°‘ï¼Œåªæ˜¯æåˆ°éœ€è¦å…ˆåˆ·emmcï¼Œæ‰èƒ½ä»nvmeå¯åŠ¨ï¼Œ\næˆ‘è¯•äº†å¥½å‡ æ¬¡ï¼Œæœ€å¥½çš„ç»“æœåªæ˜¯å®Œæˆäº†1.3ï¼Œå†æŠŠnvme é€šè¿‡systemctlæŠŠ/æŒ‚è½½ä»¥m2 ssdä¸Šï¼Œ\nä½†è¿™ä»ç„¶æ˜¯ä»sdå¡å¯åŠ¨ï¼Œåªæ˜¯æå‡äº†ç³»ç»Ÿç©ºé—´ï¼Œå¯¹å¯åŠ¨åŠ é€Ÿæ²¡æœ‰ä»€ä¹ˆæå‡ï¼Œå¹¶ä¸”sdå¡éœ€è¦ä¸€ç›´æ’ç€æ‰èƒ½ç”¨\næ‰€å¹¸githubä¸Šæœ‰ä¸éœ€è¦sdå¡çš„æ–¹æ¡ˆ\nä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨æ²¡æœ‰sdå¡çš„æ–¹å¼ä¸‹åˆ·nvme,å¹¶ä¸”å¯åŠ¨æ—¶ä¹Ÿæ˜¯ç›´æ¥ä»nvmeå¯åŠ¨\næŠŠæ¿å­ç”µæ–­åï¼ŒçŸ­æ¥æ¿å­çš„ GNDå’ŒFC REC(9,10 ç®¡è„š)ï¼Œå–ä¸‹sdå¡ï¼Œåªæ¥nvme M2ï¼Œè¿æ¥Usbï¼Œ è¿è¡Œè„šæœ¬ ï¼Œç­‰åˆ°è„šæœ¬æç¤ºï¼Œå–ä¸‹çŸ­æ¥è·³çº¿ï¼Œä¹‹åè„šæœ¬å°±ä¼šä¸€ç›´è‡ªåŠ¨æ‰§è¡Œï¼Œæ‰§è¡Œå®Œåï¼Œæ¿å­ä¼šé‡å¯åï¼Œè¿æ¥Hostçš„ssh serverï¼Œ éœ€è¦è¾“å…¥hostå¯†ç ï¼Œ\n1.3 jetson orin 1.3.1 åˆ· nvme ç”±äºxavier å®˜æ–¹æ–‡æ¡£ä¸Šå…³äºæ— sdå¡åˆ·nvmeçš„æ–¹æ³•è¯­ç„‰ä¸è¯¦,æ‰€ä»¥å€ŸåŠ©äº†githubä¸Šçš„è„šæœ¬, ä½†å…¶å®é‚£ä¸ªè„šæœ¬ä¹Ÿæ˜¯ä½¿ç”¨äº†å®˜æ–¹çš„åˆ·æ–°è„šæœ¬,åªæ˜¯å‚æ•°è®©äººçœ¼èŠ±ç¼­ä¹±,\njetson orin å®˜æ–¹æ–‡æ¡£ä¸Šæœ‰æ˜ç¡®çš„æŒ‡ç¤ºåº”è¯¥æ€ä¹ˆæŠŠ jetson linux + jetpack ä¸€èµ·åˆ·åˆ°nvmeä¸Šçš„æ–¹æ³•\n1 sudo ./flash.sh jetson-orin-nano-devkit-nvme internal 2. æ— ç•Œé¢æ¨¡å¼ï¼ˆå¯é€‰ï¼‰ 2.1 ç”µæºæ¨¡å¼ åœ¨æˆ‘ä»¬çš„éœ€æ±‚ä¸­ï¼Œ xavier nxåªæœ‰åœ¨å‡ºå‚å‰çš„è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæ‰éœ€è¦æœ‰ç•Œé¢ï¼Œå…¶ä»–æ—¶é—´ä¸éœ€è¦\næ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­åˆ‡æ¢ç”µæºæ¨¡å¼\n1 sudo nvpmodel -m 8 //20w 8æ ¸ å› ä¸ºéœ€è¦sudo æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠä»–æ”¾åˆ°2.2å¯åŠ¨æœåŠ¡çš„å¯åŠ¨è„šæœ¬run.shä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥æœ‰rootæƒé™äº†\né€šè¿‡uname -ræŸ¥çœ‹kernelåç§°æ˜¯å¦åŒ…å«tegraæ¥åˆ¤æ–­æ˜¯å¦æ˜¯nividaçš„æ¿ï¼Œå¦‚æœæ˜¯å°±è®¾ç½®nvpmodel\n1 2 3 4 5 6 7 ... shopt -s nocasematch #åŒ¹é…æ—¶å¿½ç•¥å¤§å°å†™ string=\u0026#34;$(uname -r)\u0026#34; if [[ $string =~ .*tegra.* ]]; then nvpmodel -m 8 fi ... éªŒè¯vnpmodelæ˜¯å¦è®¾ç½®æˆåŠŸ\n1 2 3 dv@dv-desktop:~$ sudo nvpmodel -q NV Power Mode: MODE_15W_2CORE 0 2.2 æœåŠ¡å®‰è£…/å¸è½½è„šæœ¬ install.sh\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #!/bin/bash cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/systemd/system/dv_app.service [Unit] Description=dv app After=network.target [Service] Type=simple ExecStart=/opt/dv_app/run.sh WorkingDirectory=/opt/dv_app/ Restart=always RestartSec=3 [Install] WantedBy=multi-user.target EOF systemctl enable dv_app systemctl start dv_app uninstall.sh\n1 2 3 4 5 #!/bin/bash systemctl stop dv_app systemctl disable dv_app rm /etc/systemd/system/dv_app.service systemctl daemon-reload 2.3 qtç¨‹åºä¿®æ”¹æ— ç•Œé¢ æ³¨æ„ï¼Œè®°å¾—æŠŠqtç¨‹åºå¯åŠ¨æ—¶çš„qpa è®¾ç½®ä¸ºå’Œvncæˆ–å…¶ä»–æ”¯æŒä»…å‘½ä»¤è¡Œç¯å¢ƒçš„æ¨¡å¼ï¼Œ\n1 export QT_QPA_PLATFORM=vnc å¹¶æŠŠqtç¨‹åºä¸­å¯åŠ¨çª—å£çš„ä»£ç å»æ‰ï¼Œåªæ‰§è¡Œ\n1 2 3 4 5 6 int main() { QApplication app; //ä¸è¦å¯åŠ¨çª—å£ app.exec(); } å¦‚æœä»£ç ç»“æ„æ²¡æœ‰è®¾è®¡å¥½ï¼Œä¼°è®¡éœ€è¦æœ‰ä¸€äº›é‡æ„å·¥ä½œï¼Œå¥½åœ¨æˆ‘ä½¿ç”¨mvvmè®¾è®¡æ¨¡å¼ï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥åœ¨æ²¡æœ‰uiçš„æƒ…å†µä¸‹è¿è¡Œä¸šåŠ¡é€»è¾‘\n2.4 linuxè®¾ç½®æ— ç•Œé¢ linuxå¯ä»¥ç”¨ runlevel æ¥æŒ‡å®šç³»ç»Ÿå¯åŠ¨æ—¶è¿›å…¥å“ªä¸€ç§æ¨¡å¼ï¼Œå¸¸è§çš„æ˜¯å‘½ä»¤è¡Œ3å’Œå›¾å½¢ç•Œé¢5ï¼Œ\nä¸åŒçš„ç³»ç»Ÿè®¾è®¡æ–¹æ³•ä¸ä¸€æ ·ï¼Œå› ä¸ºæˆ‘ç»™xavier nxå®‰è£…äº†æœ€æ–°çš„jet packï¼Œæ‰€ä»¥ä»–çš„ç³»ç»Ÿæ˜¯ubuntu20\nubuntu20 å·²ç»ä¸å†ä½¿ç”¨ç¼–etc/inittabçš„æ–¹å¼è®¾ç½®runlevel,è€Œæ˜¯ä½¿ç”¨systemctl\næŸ¥çœ‹å¯ç”¨çš„é€‰é¡¹\n1 2 3 dv@dv-desktop:~$ systemctl list-units --type=target|grep -E \u0026#39;multi-user.target|graphical.target\u0026#39; graphical.target loaded active active Graphical Interface multi-user.target loaded active active Multi-User System graphical.target æ˜¯å›¾å½¢æ¨¡å¼\nmulti-user.target æ˜¯å‘½ä»¤è¡Œæ¨¡å¼\n1 2 3 4 5 6 7 dv@dv-desktop:~$ systemctl status graphical.target â— graphical.target - Graphical Interface Loaded: loaded (/lib/systemd/system/graphical.target; indirect; vendor preset: enabled) Active: active since Mon 2024-04-01 15:05:11 CST; 2h 3min ago Docs: man:systemd.special(7) 4æœˆ 01 15:05:11 dv-desktop systemd[1]: Reached target Graphical Interface. è®¾ç½®ä¸ºå‘½ä»¤è¡Œæ¨¡å¼\n1 2 3 4 dv@dv-desktop:~$ sudo systemctl set-default multi-user.target [sudo] password for dv: Removed /etc/systemd/system/default.target. Created symlink /etc/systemd/system/default.target â†’ /lib/systemd/system/multi-user.target. è®¾ç½®å®Œé‡å¯ä¸€ä¸‹\n1 reboot 3. cudaäº¤å‰ç¼–è¯‘è®¾ç½® ä¸ºäº†è®©jetson orin nxå’Œjetson xavier nxä½¿ç”¨ä¸€æ ·çš„ç³»ç»Ÿ(ç»´æŠ¤æˆæœ¬æ¯”è¾ƒå°‘)ï¼Œ\næœ€æ–°çš„ç‰ˆæœ¬æ˜¯ Jetson linux 36.2 + Jetpack 6.0 DP(dpå¼€å‘é¢„è§ˆç‰ˆæœ¬)\næˆ‘ä»¬åˆ·çš„æ˜¯ Jetson linux 35.5.0 + Jetpack 5.1.3\nç‰ˆæœ¬å…¼å®¹éµå‘åå…¼å®¹ï¼Œå‘å‰å…¼å®¹ï¼Œå’Œå°ç‰ˆæœ¬å…¼å®¹\njetpack 5.1.3 çš„cudaç‰ˆæœ¬æ˜¯11.4ï¼Œ å¯ä»¥å‡çº§ï¼Œä¸è¿‡æˆ‘ä»¬ç®—æ³•ç”¨çš„æ˜¯11.3ï¼Œæ‰€ä»¥æˆ‘å†³å®šæš‚æ—¶ä¸å‡çº§\nä¸‹é¢æ˜¯cuda 11.4çš„æ–‡æ¡£\nInstallation Guide Linux :: CUDA Toolkit Documentation (nvidia.com)\n3.1 å®‰è£…cudaç¼–è¯‘å™¨nvcc CUDA Toolkit 11.4 Update 4 Downloads | NVIDIA Developer\nlocalæ–¹å¼ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œ networkçš„æ–¹å¼ä¸é¢å¤–è®¾ç½®apt sourceé•œåƒå¾ˆæ…¢\n1 2 3 4 5 6 7 wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600 wget https://developer.download.nvidia.com/compute/cuda/11.4.4/local_installers/cuda-repo-wsl-ubuntu-11-4-local_11.4.4-1_amd64.deb sudo dpkg -i cuda-repo-wsl-ubuntu-11-4-local_11.4.4-1_amd64.deb sudo apt-key add /var/cuda-repo-wsl-ubuntu-11-4-local/7fa2af80.pub sudo apt-get update sudo apt-get -y install cuda-nvcc-11-4 3.2 cuda-cross-aarch64 ä»3.1çš„é¡µé¢ä¸‹è½½ä¸åˆ° cuda-cross-aarch64ï¼Œåªèƒ½ä¸‹è½½åˆ°cuda sbsa aarch64,æ‰€ä»¥åªèƒ½ä»è¿™ä¸ªä½ç½®ä¸‹è½½\nIndex (nvidia.cn)\nä¸‹è½½éœ€æ±‚è¦åŒ…å\n1 2 3 4 5 dpkg -i --force-all *.deb \u0026amp;\u0026amp; \\ apt-get update \u0026amp;\u0026amp; \\ apt-get install -y -f \u0026amp;\u0026amp; \\ apt-get install -y cuda-cross-aarch64 cuda-cross-aarch64-10-2 \u0026amp;\u0026amp; \\ rm -rf /var/lib/apt/lists/* 3.3 æµ‹è¯•CUDAç¨‹åº ç¼–è¯‘ cuda samples\nNVIDIA/cuda-samples: Samples for CUDA Developers which demonstrates features in CUDA Toolkit (github.com)\ncmake+cudaï¼Œ å¯ä»¥ç”¨äºéªŒè¯cmake+cudaæ˜¯å¦é…ç½®æˆåŠŸ\nBuilding Cross-Platform CUDA Applications with CMake | NVIDIA Technical Blog\ncode-samples/posts/cmake at master Â· robertmaynard/code-samples (github.com)\n1 2 3 4 5 set(CUDA_TOOLKIT_ROOT_DIR /usr/local/cuda-11.4/) set(CUDA_NVCC_EXECUTABLE /usr/local/cuda-11.4/bin/nvcc) set(CMAKE_CUDA_COMPILER /usr/local/cuda-11.4/bin/nvcc) set(CMAKE_CUDA_ARCHITECTURES 87) #jetson orin nx devicequery set(CMAKE_CUDA_FLAGS \u0026#34;-ccbin ${CMAKE_CXX_COMPILER} -Xcompiler -fPIC\u0026#34; CACHE STRING \u0026#34;\u0026#34; FORCE) 4. äº¤å‰ç¼–è¯‘ VTK 9.3 jetpack 5.3.1 å·¥å…·é“¾éœ€è¦é¢å¤–çš„è®¾ç½®\nhttps://forums.developer.nvidia.com/t/question-about-cross-compilation-link-errors/238711/10\nå…ˆç¼–è¯‘æœ¬æœºçš„ compile tools\n1 2 cmake -GNinja -DVTK_BUILD_COMPILE_TOOLS_ONLY=ON .. cmake --build . --target install å†äº¤å‰ç¼–è¯‘\nç¼–è¯‘é€‰é¡¹ VTK_REQUIRE_LARGE_FILE_SUPPORTéœ€è¦æ‰“å¼€,å¦åˆ™cmakeä¸äº†\nDVTK_MODULE_ENABLE_VTK_libproj:STRING= ä¹Ÿéœ€è¦å…³æ‰ï¼Œå¦åˆ™äº¤å‰ç¼–è¯‘ä¼šå› ä¸ºsqliteæ•°æ®åº“å¤±è´¥ï¼Œè¿™ä¸ªåº“ç”¨äºåœ°å›¾ä¿¡æ¯è§†é¢‘ç¼–ç ç›¸å…³æ–¹é¢çš„ï¼Œæˆ‘ä»¬ç”¨ä¸åˆ°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 cmake \\ -DCMAKE_TOOLCHAIN_FILE=/repos/vcpkg/toolchains/arm64-jetson-xavier-nx.cmake \\ -DQMLPLUGINDUMP_EXECUTABLE=/build/xavier-nx/bin/qmake \\ -GNinja \\ -DVTK_REQUIRE_LARGE_FILE_SUPPORT=ON \\ -DVTK_MODULE_ENABLE_VTK_RenderingQt:STRING=YES \\ -DVTK_MODULE_ENABLE_VTK_ViewsQt:STRING=YES \\ -DVTK_GROUP_ENABLE_Qt:STRING=YES \\ -DVTK_MODULE_ENABLE_VTK_GUISupportQt:STRING=YES \\ -DVTK_MODULE_ENABLE_VTK_GUISupportQtQuick:STRING=YES \\ -DVTK_MODULE_ENABLE_VTK_libproj:STRING=NO \\ -DVTK_USE_CUDA:BOOL=ON \\ -DOPENGL_glx_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libGLX.so \\ -DOPENGL_opengl_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libOpenGL.so \\ -DX11_X11_LIB=/sysroot/usr/lib/aarch64-linux-gnu/libX11.so \\ .. #-DVTK_OPENGL_USE_GLES=OFF \\ #-DVTK_OPENGL_HAS_EGL=ON \\ #-DVTK_USE_X=OFF \\ #-DOPENGL_gles3_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libGLESv2.so \\ #-DOPENGL_egl_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libEGL.so \\ å› ä¸ºqmlplugindump ä¸æ”¯æŒäº¤å‰ç¼–è¯‘ï¼Œä½†æ˜¯vtkç”¨å®ƒæ¥å¯¼å‡ºæ’ä»¶\næ‰€ä»¥å…ˆç»™DQMLPLUGINDUMP_EXECUTABLEéšä¾¿è®¾ç½®ä¸€ä¸ªè·¯å¾„ï¼Œ ç„¶åç¼–è¯‘\nç¼–è¯‘æ—¶ä¼šåœ¨æœ€åå¯¼å‡ºqml pluginæ—¶å¤±è´¥ï¼Œ è¿™æ—¶ç¼–è¾‘ç”Ÿæˆçš„ninjaæ–‡ä»¶ï¼Œå±è”½æ‰ ç”Ÿæˆqmlæ’ä»¶ï¼Œç›´æ¥å¼ºåˆ¶ç¼–è¯‘å®‰è£…\nä½†å‘ç°é™¤äº†qmltypesæ–‡ä»¶æ²¡æœ‰ï¼Œå…¶ä»–çš„æ–‡ä»¶éƒ½ä»ç„¶å­˜åœ¨ï¼Œ å»ä¹‹å‰ç¼–è¯‘çš„x86_64çš„ç‰ˆæœ¬ä¸Šå¤åˆ¶qmltypesè¿‡æ¥å°±okäº†\n5. äº¤å‰ç¼–è¯‘PCL 1.13 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 cmake \\ -GNinja \\ -DWITH_LIBUSB=OFF \\ -DBUILD_tools=OFF \\ -DBoost_CONTEXT_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_context.so.1.71.0 \\ -DBoost_DATE_TIME_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_date_time.so.1.71.0 \\ -DBoost_DIR:PATH=/sysroot/usr/lib/aarch64-linux-gnu/cmake/Boost-1.71.0 \\ -DBoost_FIBER_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_fiber.so.1.71.0 \\ -DBoost_FILESYSTEM_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_filesystem.so.1.71.0 \\ -DBoost_IOSTREAMS_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_iostreams.so.1.71.0 \\ -DBoost_SERIALIZATION_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_serialization.so.1.71.0 \\ -DBoost_SYSTEM_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_system.so.1.71.0 \\ -DBoost_THREAD_LIBRARY_RELEASE:STRING=/sysroot/usr/lib/aarch64-linux-gnu/libboost_thread.so.1.71.0 \\ -DCMAKE_TOOLCHAIN_FILE=/repos/vcpkg/toolchains/arm64-jetson-xavier-nx.cmake \\ -DOPENGL_opengl_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libOpenGL.so \\ -DOPENGL_glx_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libGLX.so \\ -DX11_X11_LIB=/sysroot/usr/lib/aarch64-linux-gnu/libX11.so \\ -DFLANN_LIBRARY_TYPE=SHARED \\ -DFLANN_LIBRARY=/sysroot/usr/lib/aarch64-linux-gnu/libflann.so \\ .. å…³æ‰ä¸€äº›ä¸éœ€è¦çš„ä¸œè¥¿ vtk9.3 + pcl1.13 ,è¶³ä»¥è®©æˆ‘ä»¬åœ¨qt quickä¸­å¿«ä¹çš„å¼€å‘ç‚¹äº‘ç›¸å…³çš„åŠŸèƒ½äº† æœ‰æ—¶é—´å†å¦å¤–å†™ä¸€ç¯‡ qt quick + vtk + pcl çš„åšå®¢,è¿™é‡Œä¸å†å±•å¼€\n3. I^2C å¼€å‘ ä»æ‰‹å†Œä¸Šçœ‹ï¼Œ æœ‰ä¸¤å¯¹é»˜è®¤çš„i2c, æŠŠè®¾å¤‡æ¥ä¸Š pin3 SDA pin5 SCL GNDåï¼Œå¯ä»¥ä½¿ç”¨i2cdetectå·¥å…·æŸ¥çœ‹ï¼Œç³»ç»Ÿå†…ç½®äº†\n1 2 3 4 5 6 7 # æŸ¥çœ‹æ‰€æœ‰i2c æ€»çº¿ i2cdetect -l # æŸ¥çœ‹æ€»çº¿ä¸Šçš„è®¾å¤‡åœ°å€ i2cdetect -y -r \u0026#34;name\u0026#34; #æˆ– i2cdetect -y -r n # /dev/i2c-n ç»å®æµ‹ï¼Œ xavier XNçš„ 3 5ç®¡è„šçš„i2c ï¼Œåœ¨/dev/i2c-8\nc++ ç¼–ç å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„raspberry pi 5çš„i2c åšå®¢\nraspberry-pi5-i2c-gpio-qt-cppç¼–ç¨‹/#23-ç¼–ç  | hbb\u0026rsquo;s blog (nocanstillbb.github.io)\n4. é™„å½• 4.1 cmake toolchain file 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 set(CMAKE_SYSTEM_NAME Linux) set(CMAKE_SYSTEM_PROCESSOR arm64) set(CMAKE_STAGING_PREFIX /repos/installed) set(CMAKE_INSTALL_PREFIX /repos/installed) set(rootfs /sysroot) set(CMAKE_SYSROOT ${rootfs}) set(target_arch /usr/bin/aarch64-linux-gnu) set(CMAKE_C_COMPILER ${target_arch}-gcc) set(CMAKE_CXX_COMPILER ${target_arch}-g++) set(CMAKE_AR ${target_arch}-ar CACHE FILEPATH \u0026#34;\u0026#34; FORCE) set(CMAKE_RANLIB ${target_arch}-ranlib) set(CMAKE_LINKER ${target_arch}-ld) set(CUDA_TOOLKIT_ROOT_DIR /usr/local/cuda-11.4/) set(CUDA_NVCC_EXECUTABLE /usr/local/cuda-11.4/bin/nvcc) set(CMAKE_CUDA_COMPILER /usr/local/cuda-11.4/bin/nvcc) set(CMAKE_CUDA_ARCHITECTURES 87) #jetson orin nx devicequery set(CMAKE_CUDA_FLAGS \u0026#34;-ccbin ${CMAKE_CXX_COMPILER} -Xcompiler -fPIC\u0026#34; CACHE STRING \u0026#34;\u0026#34; FORCE) set(ENV{QT_DIR} /build/xavier-nx/lib/cmake/Qt5) set(ENV{Qt5_DIR} /build/xavier-nx/lib/cmake/Qt5) set(ENV{Qt_DIR} /build/xavier-nx/lib/cmake/Qt5) set(QT_DIR /build/xavier-nx/lib/cmake/Qt5) set(Qt5_DIR /build/xavier-nx/lib/cmake/Qt5) set(Qt_DIR /build/xavier-nx/lib/cmake/Qt5) set(QT_QMAKE_EXECUTABLE /build/xavier-nx/bin/qmake) set(Qt5Core_DIR /build/xavier-nx/lib/cmake/Qt5Core) set(Qt5Gui_DIR /build/xavier-nx/lib/cmake/Qt5Gui) set(Qt5Widgets_DIR /build/xavier-nx/lib/cmake/Qt5Widgets) set(Qt5Quick_DIR /build/xavier-nx/lib/cmake/Qt5Quick) set(Qt5QuickControls2_DIR /build/xavier-nx/lib/cmake/Qt5QuickControls2) set(Qt5QmlModels_DIR /build/xavier-nx/lib/cmake/Qt5QmlModels) set(Qt5Qml_DIR /build/xavier-nx/lib/cmake/Qt5Qml) set(Qt5Network_DIR /build/xavier-nx/lib/cmake/Qt5Network) set(Qt5LinguistTools_DIR /build/xavier-nx/lib/cmake/Qt5LinguistTools) set(Qt5Sql_DIR /build/xavier-nx/lib/cmake/Qt5Sql) set(Qt5OpenGL_DIR /build/xavier-nx/lib/cmake/Qt5OpenGL) set(Boost_INCLUDE_DIR ${rootfs}/usr/include) set(Boost_LIBRARY_DIR ${rootfs}/usr/lib/aarch64-linux-gnu) set(VTKCompileTools_DIR /usr/local/lib/cmake/vtkcompiletools-9.3) set(Protobuf_DIR /repos/dv_app_solution/vcpkg_installed/x64-linux/share/protobuf) #set(VTK_DIR /repos/vtk9.3/lib/cmake/vtk-9.3) #set(PCL_DIR /repos/pcl1.13/share/pcl-1.13/) # #set(Genicam_DIR /repos/rc_genicam_api/genicam) #set(OpenCV_DIR ${rootfs}/usr/lib/aarch64-linux-gnu/cmake/opencv4 ) #set(zlog_Dir /repos/installed/share/zlog) #set(Eigen3_DIR ${rootfs}/usr/lib/cmake/eigen3) #set(Flann_DIR /repos/installed/share/flann/) set(CMAKE_FIND_ROOT_PATH /sysroot/usr /sysroot/usr/lib/aarch64-linux-gnu /repos/installed ) set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER) set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY) set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY) 4.2 ~/.bashrc 1 export LD_PRELOAD=/usr/lib/aarch64-linux-gnu/libgomp.so.1:/usr/local/Qt/5.15.11/gcc_arm64/plugins/xcbglintegrations/libqxcb-glx-integration.so:$LD_PRELOAD 5.å‚è€ƒ Jetson Software å…¥é—¨ |NVIDIA å¼€å‘äººå‘˜\nJetson Linux | NVIDIA Developer\nJetson Xavier NX å¼€å‘è€…å¥—ä»¶ - å…¥é—¨ |NVIDIA å¼€å‘äººå‘˜\nFlashing Support â€” NVIDIA Jetson Linux Developer Guide 1 documentation\n", 
        "url": "\/post\/nvidia-jetson%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/"
    },
    
    "\/post\/cpp%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E8%BF%9B%E7%A8%8B%E9%80%9A%E8%AE%AF\/": {
        "title": "cppè·¨å¹³å°å…±äº«å†…å­˜è¿›ç¨‹é€šè®¯",
        "tags": ["C\u002b\u002b","SharedMemory","IPC",],
        "content": "1. Linuxçš„ä¸¤ç§å…±äº«å†…å­˜æœºåˆ¶ï¼ŒåŠé€‰ç”¨ shmget å’Œ shm_open æ˜¯ä¸¤ç§ä¸åŒçš„å…±äº«å†…å­˜æœºåˆ¶ï¼Œå®ƒä»¬åœ¨ä½¿ç”¨æ–¹å¼å’Œæœ¬è´¨ä¸Šæœ‰æ‰€ä¸åŒã€‚\n1.1 System V å…±äº«å†…å­˜ shmget æ˜¯ POSIX æ ‡å‡†ä¸­å®šä¹‰çš„ System V å…±äº«å†…å­˜çš„æ¥å£å‡½æ•°ã€‚ System V å…±äº«å†…å­˜æ˜¯ä¸€ç§ä¼ ç»Ÿçš„ UNIX å…±äº«å†…å­˜æœºåˆ¶ï¼Œä½¿ç”¨ shmget å‡½æ•°åˆ›å»ºçš„å…±äº«å†…å­˜å¯¹è±¡è¢«æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œè¿›ç¨‹å¯ä»¥ç›´æ¥è®¿é—®å…±äº«å†…å­˜åŒºåŸŸï¼Œè€Œæ— éœ€é€šè¿‡æ–‡ä»¶ç³»ç»Ÿã€‚ System V å…±äº«å†…å­˜éœ€è¦ä½¿ç”¨é”®å€¼æ¥å”¯ä¸€æ ‡è¯†å…±äº«å†…å­˜å¯¹è±¡ï¼Œè¿›ç¨‹å¯ä»¥ä½¿ç”¨è¯¥é”®å€¼æ¥è·å–æˆ–åˆ›å»ºå…±äº«å†…å­˜å¯¹è±¡ã€‚ System V å…±äº«å†…å­˜éœ€è¦ä½¿ç”¨é¢å¤–çš„ä¿¡å·é‡è¿›è¡ŒåŒæ­¥å’Œäº’æ–¥æ“ä½œï¼Œä»¥é¿å…ç«äº‰æ¡ä»¶å’Œæ•°æ®æŸåã€‚ 1.2 æ˜ å°„æ–‡ä»¶å…±äº«å†…å­˜ shm_open æ˜¯ POSIX æ ‡å‡†ä¸­å®šä¹‰çš„å¦ä¸€ç§å…±äº«å†…å­˜æœºåˆ¶ï¼Œå±äº POSIX å…±äº«å†…å­˜å¯¹è±¡ã€‚ POSIX å…±äº«å†…å­˜æ˜¯ä¸€ç§åŸºäºæ–‡ä»¶çš„å…±äº«å†…å­˜æœºåˆ¶ï¼Œä½¿ç”¨ shm_open å‡½æ•°åˆ›å»ºçš„å…±äº«å†…å­˜å¯¹è±¡å®é™…ä¸Šå¯¹åº”ç€æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ã€‚ ä¸ System V å…±äº«å†…å­˜ä¸åŒï¼ŒPOSIX å…±äº«å†…å­˜å¯ä»¥ç›´æ¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®å’Œç®¡ç†ï¼Œè¿›ç¨‹å¯ä»¥åƒæ“ä½œæ™®é€šæ–‡ä»¶ä¸€æ ·æ¥æ“ä½œå…±äº«å†…å­˜å¯¹è±¡ã€‚ POSIX å…±äº«å†…å­˜ä¸éœ€è¦ä½¿ç”¨é”®å€¼æ¥æ ‡è¯†å…±äº«å†…å­˜å¯¹è±¡ï¼Œè€Œæ˜¯ä½¿ç”¨æ–‡ä»¶è·¯å¾„æ¥å”¯ä¸€æ ‡è¯†å…±äº«å†…å­˜å¯¹è±¡ï¼Œè¿™æ ·æ›´åŠ ç®€æ´å’Œç›´è§‚ã€‚ POSIX å…±äº«å†…å­˜ä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„ä¿¡å·é‡è¿›è¡ŒåŒæ­¥å’Œäº’æ–¥æ“ä½œï¼Œè€Œæ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ–‡ä»¶é”æœºåˆ¶æ¥å®ç°å¹¶å‘è®¿é—®çš„åŒæ­¥ã€‚ ç”±äºè¦è€ƒè™‘è·¨å¹³å°å°è£…ï¼Œwindowsä¸Šå…±äº«å†…å­˜æ˜ å°„ä¹Ÿæ˜¯æ–‡ä»¶ç³»ç»Ÿç›¸å…³ï¼Œæ‰€ä»¥é€‰æ‹©æ˜ å°„æ–‡ä»¶çš„è¿™ä¸ªå¥—æœºåˆ¶\n2. æŸ¥çœ‹å…±äº«å†…å­˜åˆ†é…æƒ…å†µ 2.1 POSIX - System V è™½ç„¶æˆ‘ä»¬é€‰ç”¨äº†æ˜ å°„æ–‡ä»¶å…±äº«å†…å­˜çš„æ–¹å¼ï¼Œä½†æ˜¯è¿˜æ˜¯ç®€å•æä¸€ä¸‹system vå…±äº«å†…å­˜æœºåˆ¶æŸ¥çœ‹å·²åˆ†é…å†…å­˜çš„æ–¹å¼\n1 2 3 4 5 6 7 8 9 huangbinbin@cs-bj:~$ ipcs -m ------ Shared Memory Segments -------- key shmid owner perms bytes nattch status 0x00000000 557056 chenyan 600 524288 2 dest 0x00000000 557057 chenyan 600 2097152 2 dest 0x00000000 491523 hanhaopeng 600 8388608 2 dest 0x00000000 1146884 huangbinbi 600 67108864 2 dest ... 2.2 POSIX - æ˜ å°„æ–‡ä»¶å…±äº«å†…å­˜ 1 2 3 4 5 6 7 8 9 10 [huangbinbin@dv-srv01 ~]$ ll /dev/shm/ total 10924 -rwx------ 1 renyanan algr 65536 Mar 12 16:27 3289461crawl10r0 -rwx------ 1 renyanan algr 65536 Mar 12 16:27 3289461crawl10s0 -rwx------ 1 renyanan algr 65536 Mar 12 16:30 3289461crawl11r0 -rwx------ 1 renyanan algr 65536 Mar 12 16:30 3289461crawl11s0 -rwx------ 1 renyanan algr 65536 Mar 12 16:31 3289461crawl12r0 -rwx------ 1 renyanan algr 65536 Mar 12 16:31 3289461crawl12s0 -rwx------ 1 renyanan algr 65536 Mar 12 16:34 3289461crawl13r0 ... 2.3 Windows windowsæ— æ³•åƒlinuxé‚£æ ·åˆ—å‡ºæ‰€æœ‰ç³»ç»Ÿä¸­çš„å…±äº«å†…å­˜æ–‡ä»¶ï¼Œåªèƒ½é€šç”¨å¾®è½¯çš„è¿ç»´å·¥å…·process exploreræŸ¥çœ‹sectionç±»å‹çš„å¥æŸ„\n3. å°è£…ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 #include \u0026lt;iostream\u0026gt; #ifdef _WIN32 // Windows #include \u0026lt;windows.h\u0026gt; class SharedMemory { public: SharedMemory(const char* name, size_t size):size(size) { handle = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, size, name); if (handle == NULL) { std::cerr \u0026lt;\u0026lt; \u0026#34;Failed to create shared memory\u0026#34; \u0026lt;\u0026lt; std::endl; } } ~SharedMemory() { CloseHandle(handle); } void* map() { return MapViewOfFile(handle, FILE_MAP_ALL_ACCESS, 0, 0, 0); } void unmap(void* addr) { UnmapViewOfFile(addr); } private: HANDLE handle; }; #else // Linux and macOS #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;sys/mman.h\u0026gt; #include \u0026lt;sys/stat.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; class SharedMemory { public: SharedMemory(const char* name, size_t size):size(size) { fd = shm_open(name, O_CREAT | O_RDWR, S_IRUSR | S_IWUSR); if (fd == -1) { std::cerr \u0026lt;\u0026lt; \u0026#34;Failed to create shared memory\u0026#34; \u0026lt;\u0026lt; std::endl; } ftruncate(fd, size); } ~SharedMemory() { close(fd); // Unlink shared memory object // shm_unlink(name); // Uncomment this if you want to remove shared memory object after use } void* map() { return mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0); } void unmap(void* addr) { munmap(addr, size); } private: int fd; size_t size; }; #endif ä½¿ç”¨ç¤ºä¾‹ï¼Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 int main() { SharedMemory shm(\u0026#34;MySharedMemory\u0026#34;, 1024); void* addr = shm.map(); if (addr == MAP_FAILED) { std::cerr \u0026lt;\u0026lt; \u0026#34;Failed to map shared memory\u0026#34; \u0026lt;\u0026lt; std::endl; return 1; } // do stuff shm.unmap(addr); return 0; } 4. æ³¨æ„äº‹é¡¹ 4.1 é“¾æ¥åº“ linuxä¸‹éœ€è¦é“¾æ¥rtåº“\n1 $ g++ -o main main.cpp -lrt 4.2 æƒé™é—®é¢˜ linuxä¸Š ï¼Œæ‰§è¡Œsub_opençš„è¿›ç¨‹å¦‚æœæ˜¯rootï¼Œé‚£ä¹ˆè¦æ‰“å¼€è¿™ä¸ªå…±äº«å†…å­˜æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦æ˜¯ä»¥rootå¯åŠ¨çš„è¿›ç¨‹\nå¦åˆ™ mapè¿”å›çš„addrå¯èƒ½ä¼šæ˜¯ MAP_FAILED ï¼Œæ³¨æ„ï¼Œmapå¤±è´¥ä¸æ˜¯è¿”å›nullptrï¼Œæ˜¯MAP_FAILED ä¹Ÿå°±æ˜¯ (void*)-1\nå‚è€ƒ ChatGPT (openai.com)\nCreating Named Shared Memory - Win32 apps | Microsoft Learn\n", 
        "url": "\/post\/cpp%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E8%BF%9B%E7%A8%8B%E9%80%9A%E8%AE%AF\/"
    },
    
    "\/tags\/ipc\/": {
        "title": "IPC",
        "tags": [],
        "content": "", 
        "url": "\/tags\/ipc\/"
    },
    
    "\/tags\/sharedmemory\/": {
        "title": "SharedMemory",
        "tags": [],
        "content": "", 
        "url": "\/tags\/sharedmemory\/"
    },
    
    "\/tags\/boost-asio\/": {
        "title": "Boost Asio",
        "tags": [],
        "content": "", 
        "url": "\/tags\/boost-asio\/"
    },
    
    "\/post\/boost-asio-udp-%E5%90%8C%E6%AD%A5%E8%B6%85%E6%97%B6%E9%99%B7%E9%98%B1\/": {
        "title": "boost-asio-udp-åŒæ­¥è¶…æ—¶é™·é˜±",
        "tags": ["C\u002b\u002b","Boost Asio",],
        "content": "2024/03/24 é˜´ï¼Œ çº¦äº†è®¸ä¹…æ²¡è§é¢çš„å¦¹å¦¹åƒäº†ä¸€ä¸ªé¥­ï¼Œå¥¹å»æ‰¾ä»–åŒå­¦ç©äº†ï¼Œæˆ‘åˆ°å’–å•¡åº—æ‰¾ç‚¹ä¸‹å‘¨è¦å¼€å‘çš„nvidia jetson xavierçš„èµ„æ–™ï¼Œ ç”±äºæ¿å­æ²¡åœ¨èº«è¾¹ï¼Œå…·ä½“å‹å·ä¹Ÿä¸è®°å¾—ï¼Œæ‰€ä»¥æœ‰æ—¶é—´è®°å½•ä¸€ä¸‹å»å¹´é‡åˆ°çš„ä¸€ä¸ªboost asio åŒæ­¥é€šè®¯ä¸­ï¼Œå®¢æˆ·ç«¯è®¾ç½®è¶…æ—¶çš„å‘ï¼Œ é¡ºä¾¿è®°å½•ä¸€ä¸‹boost udp å®¢æˆ·ç«¯ é€šè®¯çš„exampleï¼Œ åŒæ­¥ï¼Œå¼‚æ­¥åº”è¯¥æ˜¯å¤§åŒå°å¼‚ï¼Œ æˆ‘ä½¿ç”¨çš„boost ç‰ˆæœ¬æ˜¯1.83\n0. boost udp åŒæ­¥è¶…æ—¶é™·é˜± é‡åˆ°è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘åœ¨å¼€å‘ä¸€ä¸ªgige åè®®çš„å®¢æˆ·ç«¯ï¼Œç”¨äºwindowså’Œlinuxç¯å¢ƒï¼Œä½¿ç”¨gigeç›¸æœºã€‚gigeä¸­é€šè¿‡gvcpå’Œgvspæ¥å¯¹ç›¸æœºè¿›è¡Œäº¤äº’å’Œå–æµï¼Œgvcpæ˜¯udpåè®®ï¼Œæ‰€ä»¥æˆ‘ç”¨çš„æ˜¯udp socketã€‚å¼€å§‹æ—¶ï¼Œæˆ‘åœ¨windowsä¸Šå¼€å‘ï¼Œ ä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç è®¾ç½®è¶…æ—¶æ—¶é—´ ï¼Œå®ƒå¯ä»¥æ­£å¸¸çš„å·¥ä½œ ï¼Œå½“è¶…æ—¶å‘ç”Ÿæ—¶ï¼Œè¿”å›è¶…æ—¶çš„ç»“æœã€‚\nä»£ç ä¸­å…ˆåˆ›å»ºäº†endpointå’Œudp socketï¼Œç„¶åæŠŠå®ƒä»¬ç»‘å®šåœ¨ä¸€èµ·ï¼Œç„¶åè®¾ç½®socketçš„è¶…æ—¶æ—¶é—´ ä¸º5000æ¯«ç§’\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 void foo() { try { boost::asio::io_service io_service; boost::asio::ip::udp::socket socket(io_service); socket.open(boost::asio::ip::udp::v4()); boost::asio::ip::udp::endpoint if_endpoint(boost::asio::ip::address::from_string(\u0026#34;0.0.0.0\u0026#34;), 0); socket.bind(if_endpoint); boost::asio::ip::udp::endpoint endpoint(boost::asio::ip::address::from_string(devIp), 3956); boost::array\u0026lt;unsigned char,16\u0026gt; hex_data = {/* ... */ }; socket.send_to(boost::asio::buffer(hex_data), endpoint); // set timeout 5000ms socket.set_option(boost::asio::detail::socket_option::integer\u0026lt;SOL_SOCKET, SO_RCVTIMEO\u0026gt;{ 5000 }); boost::array\u0026lt;char, 600\u0026gt; recv_buffer; boost::asio::ip::udp::endpoint remote_endpoint; boost::system::error_code error; size_t bytes_received = socket.receive_from(boost::asio::buffer(recv_buffer), remote_endpoint, 0, error); Q_UNUSED(bytes_received) if (!error) { // do stuff } } else { std::cerr \u0026lt;\u0026lt; \u0026#34;Error receiving message: \u0026#34; \u0026lt;\u0026lt; error.message() \u0026lt;\u0026lt; std::endl; } } catch (const boost::system::system_error\u0026amp; e) { // timeout if (e.code() == boost::asio::error::timed_out) { std::cerr \u0026lt;\u0026lt; \u0026#34;Timeout: No response received within 1 second.\u0026#34; \u0026lt;\u0026lt; std::endl; } else { std::cerr \u0026lt;\u0026lt; \u0026#34;Error receiving message: \u0026#34; \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; std::endl; } } catch (const std::exception\u0026amp; e) { std::cerr \u0026lt;\u0026lt; \u0026#34;Exception: \u0026#34; \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; std::endl; } return \u0026#34;\u0026#34;; } ä½†æ˜¯å½“æˆ‘æŠŠè¿™æ®µä»£ç æ”¾åˆ°linuxä¸Šè¿è¡Œæ—¶ï¼Œå½“è¶…æ—¶å‘ç”Ÿæ—¶ï¼Œä¼šå¯¼è‡´receive_fromæ°¸è¿œä¸ä¼šè¿”å›ã€‚\n1. windowè®¾ç½®è¶…æ—¶æœ‰æ•ˆçš„åŸå›  windowå’Œ linuxçš„receive_fromåœ¨ç»è¿‡å¹³å°é€‚é…å±‚åï¼Œåˆ†å‘åˆ°å¹³å°ç³»ç»Ÿapi,\nwindowsçš„apiåœ¨boost socket_ops.ippä¸­ä¸ºsync_recvfrom1ä¸­,apiä¸ºWSARecvFrom\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 signed_size_type recvfrom(socket_type s, buf* bufs, size_t count, int flags, void* addr, std::size_t* addrlen, boost::system::error_code\u0026amp; ec) { #if defined(BOOST_ASIO_WINDOWS) || defined(__CYGWIN__) // Receive some data. DWORD recv_buf_count = static_cast\u0026lt;DWORD\u0026gt;(count); DWORD bytes_transferred = 0; DWORD recv_flags = flags; int tmp_addrlen = (int)*addrlen; int result = ::WSARecvFrom(s, bufs, recv_buf_count, \u0026amp;bytes_transferred, //è°ƒç”¨ window api \u0026amp;recv_flags, static_cast\u0026lt;socket_addr_type*\u0026gt;(addr), \u0026amp;tmp_addrlen, 0, 0); get_last_error(ec, true); *addrlen = (std::size_t)tmp_addrlen; if (ec.value() == ERROR_NETNAME_DELETED) ec = boost::asio::error::connection_reset; else if (ec.value() == ERROR_PORT_UNREACHABLE) ec = boost::asio::error::connection_refused; else if (ec.value() == WSAEMSGSIZE || ec.value() == ERROR_MORE_DATA) result = 0; if (result != 0) return socket_error_retval; boost::asio::error::clear(ec); return bytes_transferred; #else // defined(BOOST_ASIO_WINDOWS) || defined(__CYGWIN__) //...çœç•¥ #endif // defined(BOOST_ASIO_WINDOWS) || defined(__CYGWIN__) } å¯ä»¥é€šè¿‡è®¾ç½®SO_RCVTIMEO æ¥ä½¿ WSARecvFrom ,recvfromç­‰é˜»å¡å¼çš„è¯»æ•°æ®çš„å‡½æ•°è¶…æ—¶è¿”å›\n1 2 3 4 5 6 7 8 9 10 11 12 13 int main() { int iSock = socket(AF_INET, SOCK_DGRAM, 0); char szBuf[1024] = {0}; struct timeval tv; tv.tv_sec = 1; tv.tv_usec = 0; setsockopt(iSock, SOL_SOCKET, SO_RCVTIMEO, \u0026amp;tv, sizeof(tv)); int iRet = recvfrom(iSock, szBuf, sizeof(szBuf) - 1, 0, NULL, NULL); printf(\u0026#34;iRet is [%d]\\n\u0026#34;, iRet); close(iSock); } å› ä¸ºæˆ‘ä»¬é€šè¿‡boostçš„æ–¹å¼è®¾ç½®äº†SO_RCVTIMEOï¼Œ\n1 socket.set_option(boost::asio::detail::socket_option::integer\u0026lt;SOL_SOCKET, SO_RCVTIMEO\u0026gt;{ 5000 }); 2. linuxè®¾ç½®è¶…æ—¶æ— æ•ˆçš„åŸå›  è€Œlinuxè°ƒç”¨ç³»ç»Ÿapiçš„ä½ç½®åœ¨ boost socket_ops.ippæ–‡ä»¶ä¸­çš„poll_readä¸­ï¼Œå¤–éƒ¨ä¼ å…¥çš„è¶…æ—¶æ—¶é—´ä¸ºå¸¸é‡-1ï¼Œå³æ— é™ç­‰å¾…\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 int poll_read(socket_type s, state_type state, int msec, boost::system::error_code\u0026amp; ec) { if (s == invalid_socket) { ec = boost::asio::error::bad_descriptor; return socket_error_retval; } #if defined(BOOST_ASIO_WINDOWS) //widnowsé€»è¾‘ //ç•¥ #else // linuxé€»è¾‘ pollfd fds; fds.fd = s; fds.events = POLLIN; fds.revents = 0; int timeout = (state \u0026amp; user_set_non_blocking) ? 0 : msec; int result = ::poll(\u0026amp;fds, 1, timeout); //timeoutå®å‚å¸¸æ•°-1 get_last_error(ec, result \u0026lt; 0); #endif if (result == 0) if (state \u0026amp; user_set_non_blocking) ec = boost::asio::error::would_block; return result; } 3. è§£æ³• ä¸€ç§å³è¾¾åˆ°åŒæ­¥ç­‰ç­‰ï¼Œwindowså’Œlinuxåˆä¸éœ€è¦ç»´æŠ¤ä¸¤ä¸ªç‰ˆæœ¬çš„æ–¹æ³•,æ˜¯ä½¿ç”¨å¼‚æ­¥æ¥å£å†™åŒæ­¥ç­‰å¾… åŒæ­¥ç­‰å¾…ä¸å¿…éå¾—ç”¨åŒæ­¥æ¥å£,asio æ“…é•¿çš„æœ¬èº«å°±æ˜¯å¼‚æ­¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 void foo() { std::string result; boost::asio::io_service io_service; boost::asio::io_service::work work(io_service); std::thread thread([\u0026amp;io_service](){ io_service.run(); }); boost::asio::ip::udp::socket socket(io_service); socket.open(boost::asio::ip::udp::v4()); boost::asio::ip::udp::endpoint if_endpoint(boost::asio::ip::address::from_string(\u0026#34;0.0.0.0\u0026#34;), 0); socket.bind(if_endpoint); boost::asio::ip::udp::endpoint endpoint(boost::asio::ip::address::from_string(devIp), 3956); // send datas boost::array\u0026lt;unsigned char,16\u0026gt; hex_data = { /* ... */ }; // send std::future\u0026lt;size_t\u0026gt; bytes_send = socket.async_send_to(boost::asio::buffer(hex_data), endpoint,boost::asio::use_future); boost::array\u0026lt;char, 600\u0026gt; recv_buffer; boost::asio::ip::udp::endpoint remote_endpoint; bytes_send.get(); std::future\u0026lt;size_t\u0026gt; bytes_received = socket.async_receive_from(boost::asio::buffer(recv_buffer), remote_endpoint,boost::asio::use_future); std::future_status status = bytes_received.wait_for(std::chrono::milliseconds(5000)); if (std::future_status::timeout == status) { socket.cancel(); // timeout } else if (status == std::future_status::ready) { //do stuff } else { //other errors } } ", 
        "url": "\/post\/boost-asio-udp-%E5%90%8C%E6%AD%A5%E8%B6%85%E6%97%B6%E9%99%B7%E9%98%B1\/"
    },
    
    "\/tags\/drone\/": {
        "title": "Drone",
        "tags": [],
        "content": "", 
        "url": "\/tags\/drone\/"
    },
    
    "\/tags\/forgejo\/": {
        "title": "Forgejo",
        "tags": [],
        "content": "", 
        "url": "\/tags\/forgejo\/"
    },
    
    "\/post\/forgejo-drone-ci-cd\/": {
        "title": "forgejo-drone-ci-cd",
        "tags": ["Forgejo","Drone",],
        "content": "ç›¸å…³æœåŠ¡ forgejo : æºç ç‰ˆæœ¬æ§åˆ¶ï¼Œ å‰èº«æ˜¯giteaï¼Œ ç”±äº giteaæœ‰é—­æºé£é™©ï¼Œ ç¤¾åŒºä¸å†ä¿¡ä»»ï¼Œforkå‡ºforgejoç»§ç»­å¼€å‘å¼€æºç‰ˆæœ¬ï¼Œ ps giteaä¹Ÿæ˜¯ä»å…¶ä»–é¡¹ç›®ç»§ç»­è¿‡æ¥å¼€å‘çš„\ndrone : ci/cd\ndroneæœåŠ¡ é€šè¿‡ weebhook ç›‘å¬git ä»“åº“äº‹ä»¶ï¼Œåˆ†å‘ä»»åŠ¡ç»™runneræ‰§è¡ŒCI/CD\nCI/CD éœ€è¦æ‰§è¡Œä»€ä¹ˆï¼Œ å–å†³äºæ·»åŠ åˆ°droneé…ç½®æ–‡ä»¶ï¼Œé€šå¸¸åä¸º .drone.yml\næœåŠ¡ç›¸å…³çš„docker composeæ”¾åœ¨é™„å½•ä¹‹ä¸­äº†\nä¸Šä¼ å·²æœ‰gitä»“åº“åˆ°forgejo å…ˆåœ¨forgejoä¸Šåˆ›å»ºä»“åº“\nåˆ›å»ºæ—¶ï¼Œéœ€è¦å…³æ³¨å‡ ä¸ªä»“åº“çš„å±æ€§\næ‹¥æœ‰è€…ï¼Œ è®¾ç½®ç»„ç»‡ï¼Œå¦‚SWç»„ç»‡ï¼Œ å¯è§æ€§ï¼Œ ä¸€èˆ¬éƒ½è®¾ç½®ç§æœ‰ä»“åº“ï¼Œ å†æ·»åŠ åä½œè€… é»˜è®¤åˆ†æ”¯ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºmaster ,å’Œgitlabä¿æŒä¸€è‡´ åˆ›å»ºå®ŒåæŠŠdrone ç”¨æˆ·æ·»åŠ åˆ°gitä»“åº“åä½œè€…ï¼Œ ciçš„dockerç¯å¢ƒä¼šè®¾ç½®droneçš„sshä»£ç†ï¼Œè®©droneæœ‰æƒé™è®¿é—®ä»£ç \nå†æœ¬åœ°çš„ä»£ç åº“ä¸­è®¾ç½®è¿œç¨‹åº“ç›´æ¥æ¨é€\n1 2 git remote add forgejo ssh://git@git3.deepvision-tech.net:222/SW/ci_demo_0.git git push æ¿€æ´»gitä»“åº“çš„drone æ¿€æ´»ä¹‹å‰ï¼Œgité¡¹ç›®ä¸ä¼šåˆ›å»ºwebhook,\néœ€è¦ç™»å½•drone æ¿€æ´» drone : http://10.1.8.129\nä¸éœ€è¦å¡«å†™ç”¨æˆ·åå¯†ç ï¼Œç‚¹ç™»å½•åè‡ªåŠ¨ä»¥forgejoç™»å½•ä¿¡æ¯ç™»å½•drone\nç‚¹å‡»å³ä¸Šè§’åŒæ­¥é¡¹ç›®ä¿¡æ¯,åŒæ­¥å®Œä¼šçœ‹åˆ°åˆšæ‰æ–°å»ºçš„é¡¹ç›®\nç‚¹å‡»é¡¹ç›®è¿›åˆ¶é…ç½®ç•Œé¢ï¼Œç‚¹å‡»\né»˜è®¤è®¾ç½®ç‚¹å‡»ä¿å­˜\nä¿å­˜åforgejoä¸Šçš„é¡¹ç›®ä¼šç”Ÿæˆä¸€ä¸ªwebhook\nå¯ä»¥è¿™weebhookä¸­è®¾ç½®éœ€è¦å…³æ³¨çš„gitäº‹ä»¶ç±»å‹å’Œgit åˆ†æ”¯\né€šå¸¸æ˜¯åªæœ‰å…³é”®åˆ†æ”¯æ‰éœ€è¦ci/cdï¼Œ å¼€å‘åˆ†æ”¯ä¸éœ€è¦ï¼Œ\nå¼€å‘åˆ†æ”¯ åˆåˆ°å…³é”®åˆ†æ”¯ï¼Œéœ€è¦æäº¤åˆå¹¶è¯·æ±‚æˆ–æ‹‰å–ç”³è¯·ï¼Œå¾…å®¡æ ¸ååˆå¹¶åè‡ªåŠ¨è§¦å‘ æŒç»­é›†æˆ\nweebookè¿˜å¯ä»¥è¯•è§¦å‘ï¼Œ åœ¨è°ƒè¯•ci/cdæ—¶å¾ˆæ–¹ä¾¿\n.drone.yml example\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 kind: pipeline type: docker name: build # https://github.com/devth/drone-docs/blob/master/content/usage/cloning.md clone: disable: true # ç¦æ­¢è‡ªåŠ¨æ‹‰å–ä»£ç  steps: - name: build-all image: dv_ci_qt5.15:0.1 environment: PKG_VERSION: \u0026#34;1.0.0\u0026#34; PKG_NAME: \u0026#34;dv_algorithm\u0026#34; #https://docs.drone.io/pipeline/environment/reference/ DRONE_BRANCH: $DRONE_BRANCH DRONE_BUILD_CREATED: $DRONE_BUILD_CREATED DRONE_BUILD_EVENT: $DRONE_BUILD_EVENT DRONE_BUILD_FINISHED: $DRONE_BUILD_FINISHED DRONE_COMMIT: $DRONE_COMMIT DRONE_COMMIT_AFTER: $DRONE_COMMIT_AFTER DRONE_COMMIT_AUTHOR: $DRONE_COMMIT_AUTHOR DRONE_COMMIT_AUTHOR_AVATAR: $DRONE_COMMIT_AUTHOR_AVATAR DRONE_COMMIT_AUTHOR_EMAIL: $DRONE_COMMIT_AUTHOR_EMAIL DRONE_COMMIT_AUTHOR_NAME: $DRONE_COMMIT_AUTHOR_NAME DRONE_COMMIT_BEFORE: $DRONE_COMMIT_BEFORE DRONE_COMMIT_BRANCH: $DRONE_COMMIT_BRANCH DRONE_COMMIT_LINK: $DRONE_COMMIT_LINK DRONE_COMMIT_MESSAGE: $DRONE_COMMIT_MESSAGE DRONE_COMMIT_REF: $DRONE_COMMIT_REF DRONE_COMMIT_SHA: $DRONE_COMMIT_SHA DRONE_STAGE_ARCH: $DRONE_STAGE_ARCH DRONE_STAGE_FINISHED: $DRONE_STAGE_FINISHED DRONE_STAGE_OS: $DRONE_STAGE_OS DRONE_STAGE_MACHINE: $DRONE_STAGE_MACHINE settings: detach: false entrypoint: [\u0026#34;\u0026#34;] commands: - cd /source/repos - bash -c \u0026#34;rm -rf dv_app_solution\u0026#34; - bash -c \u0026#34;git clone ssh://git@git1.deepvision-tech.net:222/SW/dv_app_solution.git\u0026#34; - cd /source/repos/dv_app_solution - bash -c \u0026#34;rsync -ah ../vcpkg_installed . \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026#34; - bash -c \u0026#34;git submodule update --init --recursive\u0026#34; - git c -t origin/$DRONE_BRANCH | true - git frsm \u0026#34;git c -t origin/$DRONE_BRANCH | true\u0026#34; - bash -c \u0026#34;./clear.sh \u0026amp;\u0026amp; ./build.sh\u0026#34; # 129æ²¡æœ‰éƒ¨ç½²exec runner --- kind: pipeline type: exec name: upload clone: disable: true steps: - name: upload_to_ftp environment: DRONE_BRANCH: $DRONE_BRANCH commands: - cd /root/source/repos/dv_app_solution/bin/x86_64/ - /root/ftp_upload.sh \u0026#34;/ci/$DRONE_BRANCH\u0026#34; libdv_algorithm.do depends_on: - build æ‰‹åŠ¨æ·»åŠ æ„å»ºæµæ°´çº¿ä»»åŠ¡ å¦‚æœå¸Œæœ›ä½¿å›¾ä¸­çš„PKG_VERSIONè¦†ç›–.drone.ymlä¸­çš„åŒåå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨goæ¨¡æ¿è¯­æ³•\n${å‚æ•°:-é»˜è®¤å€¼}\nå¦‚æœæ²¡æœ‰paramete å°±æ˜¾ç¤ºä¸ºé»˜è®¤å€¼ï¼Œ\n1 2 environment: PKG_VERSION: ${PKG_VERSION:-1.0.0} #å¦‚æœæ²¡æœ‰ä¼ é€’PKG_VERSIONå˜é‡ï¼Œé»˜è®¤å€¼ä¸º1.0.0 server é»˜è®¤çš„ui dashboard æ¯”è¾ƒç®€é™‹ï¼Œå¦‚æœéœ€è¦å®šåˆ¶uiï¼Œå¯ä»¥è‡ªå·±å†™appï¼Œç›¸é€çš„api åœ¨å®˜ç½‘éƒ½å¯ä»¥æ‰¾åˆ° å¯ä»¥ä½¿ç”¨http postçš„æ–¹å¼åˆ›å»º æ„å»ºä»»åŠ¡\næŒ‚è½½åˆ°docerå®¹å™¨ä¸Šçš„ç›®å½• æºç æœ¬æ¥ä¸åº”è¯¥æŒ‚è½½åˆ°dockerä¸­ï¼Œä½†è€ƒè™‘åˆ°äºŒè¿›åˆ¶ä½“ç§¯è¾ƒå¤§çš„æƒ…å†µ,æŒ‚äº†ä¸¤ä¸ªç›®å½•åˆ°å®¹å™¨ä¸Š\nåªåœ¨dockerä¸­æœ‰è®¿é—®æƒé™çš„\n/home/drone/source/repos : /repos\næ‰€æœ‰äººæœ‰è®¿é—®æƒé™çš„\n/storage/sw_ci/ : /sw_ci\nä¹Ÿå¯ä»¥å†™è„šæœ¬ä¸Šä¼ åˆ°å…¶ä»–æœåŠ¡å™¨\nssh-agent å®¹å™¨ä¸­ä¼šè‡ªåŠ¨è®¾ç½®sshä»£ç†ï¼Œ\nå¯ä»¥ä½¿ç”¨droneç”¨æˆ·çš„ssh id è¿›è¡Œsshçš„è®¤è¯ï¼Œä¾‹å¦‚git cloneï¼Œ\n1 ssh-add -l #å¯ä»¥æŸ¥çœ‹å·²ç»ä»£ç†çš„å¯†é’¥ç­¾å é™„å½•ï¼šdocker compose forjejo server 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 version: \u0026#34;3\u0026#34; networks: forgejo: external: false services: server: image: codeberg.org/forgejo/forgejo:1.20 container_name: forgejo environment: - USER_UID=1001 - USER_GID=1001 - FORGEJO__database__DB_TYPE=postgres - FORGEJO__database__HOST=db:5432 - FORGEJO__database__NAME=forgejo - FORGEJO__database__USER=forgejo - FORGEJO__database__PASSWD=123456 restart: always networks: - forgejo volumes: - type: volume source: nfs-forgejo-data target: /data volume: nocopy: true - /etc/timezone:/etc/timezone:ro - /etc/localtime:/etc/localtime:ro ports: - \u0026#34;80:3000\u0026#34; - \u0026#34;222:22\u0026#34; depends_on: - db db: image: postgres:14 restart: always environment: - POSTGRES_USER=forgejo - POSTGRES_PASSWORD=123456 - POSTGRES_DB=forgejo networks: - forgejo volumes: - type: volume source: nfs-forgejo-postgres target: /var/lib/postgresql/data volume: nocopy: true volumes: nfs-forgejo-data: driver_opts: type: \u0026#34;nfs\u0026#34; o: \u0026#34;addr=10.1.8.83,nolock,soft,rw\u0026#34; device: \u0026#34;:/volume1/repo-03/forgejo\u0026#34; nfs-forgejo-postgres: driver_opts: type: \u0026#34;nfs\u0026#34; o: \u0026#34;addr=10.1.8.83,nolock,soft,rw\u0026#34; device: \u0026#34;:/volume1/repo-03/postgres\u0026#34; drone server 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 version: \u0026#34;3\u0026#34; services: drone: image: drone/drone:2 container_name: drone environment: - DRONE_GITEA_SERVER=http://forgejo.net - DRONE_GITEA_CLIENT_ID=1660a088-d5d7-4aee-951e-cae874282f13 - DRONE_GITEA_CLIENT_SECRET=gto_a4uwqotic2oenrx6ez6b4triae7hpphirviqsdxyq5unyj5smfrq - DRONE_RPC_SECRET=78d59e651522607da0f7242e6965ce26 - DRONE_SERVER_HOST=10.1.8.129 - DRONE_SERVER_PROTO=http restart: always volumes: - ./drone:/data ports: - 80:80 DRONE_GITEA_CLIENT_ID å’ŒDRONE_GITEA_CLIENT_IDç”¨äº drone oauth2 ç™»å½•ï¼Œ éœ€è¦åœ¨giteaæˆ–forgejo è®¾ç½®é¢æ¿è®¾ç½®ä¸­åˆ›å»º oauth2 åº”ç”¨ åè·å–ä»¥å¡«å……\ndrone docker runner 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 version: \u0026#34;3\u0026#34; services: runner: image: drone/drone-runner-docker:1 container_name:runner environment: - DRONE_RPC_PROTO=http - DRONE_RPC_HOST=server_host - DRONE_RPC_SECRET=78d59e651522607da0f7242e6965ce26 - DRONE_RUNNER_CAPACITY=1 - DRONE_RUNNER_NAME=drone-runner - DRONE_RUNNER_VOLUMES=/home/drone/.ssh/known_hosts:/root/.ssh/known_hosts,/home/drone/source:/source,/storage/sw_ci:/sw_ci,/tmp/ssh-n0ryHZ9GmCn5/agent.2507215:/tmp/ssh-n0ryHZ9GmCn5/agent.2507215 - DRONE_RUNNER_ENVIRON=SSH_AUTH_SOCK:/tmp/ssh-n0ryHZ9GmCn5/agent.2507215 restart: always volumes: - /var/run/docker.sock:/var/run/docker.sock ports: - 3000:3000 ", 
        "url": "\/post\/forgejo-drone-ci-cd\/"
    },
    
    "\/tags\/gcc\/": {
        "title": "GCC",
        "tags": [],
        "content": "", 
        "url": "\/tags\/gcc\/"
    },
    
    "\/tags\/ubuntu\/": {
        "title": "Ubuntu",
        "tags": [],
        "content": "", 
        "url": "\/tags\/ubuntu\/"
    },
    
    "\/post\/ubuntu%E5%AE%89%E8%A3%85nvidia%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8\/": {
        "title": "ubuntuå®‰è£…nvidiaæ˜¾å¡é©±åŠ¨",
        "tags": ["Ubuntu","Nvidia",],
        "content": "0. å¤§çº² æŸ¥çœ‹æ˜¾å¡é©±åŠ¨ æ·»åŠ apt ä»“åº“ è‡ªåŠ¨æ£€æµ‹å®‰è£…(å¯¹äºè¾ƒæ–°å‹å·æ— æ•ˆ) æ‰‹åŠ¨å®‰è£… 0.æŸ¥çœ‹æ˜¾å¡é©±åŠ¨ 1 lscpi |grep -i vga è¾“å‡º\nç¡®è®¤æ˜¯NVIDIA æ˜¾å¡åï¼Œ ç»§ç»­åé¢çš„æ­¥éª¤ï¼Œå¦‚æœä¸æ˜¯ï¼Œå¯ä»¥è¯•è¯• 3ï¼Œä¸ä¸€å®šæœ‰æ•ˆï¼Œ 2å’Œ4å°±ä¸éœ€è¦æ‰§è¡Œäº†\n1.ç¦ç”¨nouveau æ˜¾å¡é©±åŠ¨ nouveauæ˜¯é¢„ç½®çš„é€šç”¨æ˜¾å¡,å¦‚æœè¦å®‰è£…nvidiaçš„æ˜¾å¡é©±åŠ¨,éœ€è¦å…ˆç¦ç”¨å®ƒ\n1 2 3 4 5 6 7 8 9 10 11 sudo cat \u0026lt;\u0026lt; EOF \u0026gt; /etc/modprobe.d/blacklist-nouveau.conf blacklist nouveau options nouveau modeset=0 EOF #å»ºè®®åœ¨æ‰§è¡Œè¿™è¡Œä¹‹å‰,å†æ¬¡æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯å·²ç»æŠŠæ–‡ä»¶æ­£ç¡®å†™å…¥äº†,å¦åˆ™é‡å¯åæ²¡æ­£å¸¸æˆåŠŸè¿˜è¦æ£€æŸ¥ä¸€æ¬¡ sudo update-initramfs -u #é‡å¯ç”Ÿæ•ˆ reboot 2. æ·»åŠ apt æº æ·»åŠ Ubuntuå›¾å½¢é©±åŠ¨ä»“åº“PPAã€‚åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n1 2 sudo add-apt-repository ppa:graphics-drivers/ppa sudo apt update 3. è‡ªåŠ¨æ£€æµ‹å®‰è£…ï¼ˆå¯¹è¾ƒæ–°å‹å·æ— æ•ˆï¼‰ 1 sudo ubuntu-drivers autoinstall å¦‚æœæ²¡æœ‰è‡ªåŠ¨å®‰è£…ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œæ‰§è¡Œç¬¬4æ­¥\n4. æ‰‹åŠ¨å®‰è£… æ ¹æ®æ­¥éª¤1 æŸ¥åˆ°çš„å‹å· 1e04ï¼Œåˆ°è¿™é‡Œè½¬æ¢ä¸ºå…·ä½“çš„å‹å·\nç‚¹å‡»jumpå\næŸ¥åˆ°NVIDIA å‹å·ä¸º RTX 2080 Tiï¼Œå†åˆ°è‹±ä¼Ÿè¾¾å®˜ç½‘ä¸‹è½½é¡µé¢ä¸‹è½½\nä¸‹è½½å ç”¨root æƒé™å®‰è£…\n1 sudo NVIDIA-***.run --no-x-check --no-nouveau-check -s å®‰è£…å®Œåé‡å¯ä¸€ä¸‹\n1 reboot \u0026mdash;-end\u0026mdash;-\n", 
        "url": "\/post\/ubuntu%E5%AE%89%E8%A3%85nvidia%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8\/"
    },
    
    "\/post\/ubuntu%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAgcc%E7%89%88%E6%9C%AC\/": {
        "title": "ubuntuå®‰è£…å¤šä¸ªgccç‰ˆæœ¬",
        "tags": ["Ubuntu","GCC",],
        "content": "ubuntu 16.04 å®‰è£…å¤šä¸ªgccç‰ˆæœ¬ 1.èƒŒæ™¯ ç”±äºæˆ‘ä»¬è½¯ä»¶å¼€å‘æ—¶ï¼Œé€šå¸¸åœ¨ubuntu16.04ç³»ç»Ÿä¸­è¿è¡Œï¼Œè€Œubuntu16.04 ä¸­ç³»ç»Ÿè‡ªå¸¦çš„gccç‰ˆæœ¬ä¸º5.4.\nubuntu16.04 ä»2016å¹´å‘å¸ƒä»¥æ¥ï¼Œå°±å®éªŒæ€§çš„æ”¯æŒäº†c++17çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å·¥ç¨‹ä¸­ä¹Ÿéƒ¨åˆ†çš„ä½¿ç”¨äº†c++17çš„åŠŸèƒ½ã€‚\næœ€è¿‘ï¼Œåœ¨windowsä¸Šä½¿ç”¨msvcå†™äº†ä¸€éƒ¨åˆ†ä»£ç ï¼Œåœ¨ä¸linuxç‰ˆæœ¬åˆå¹¶çš„æ—¶å€™ï¼Œå‡ºç°å¾ˆå¤šç¼–è¯‘é”™è¯¯ï¼Œæ‰æ¥äº†è§£gccå¯¹c++17çš„æ”¯æŒæƒ…å†µ\ngcc 5ï¼Œéƒ¨åˆ†çš„ï¼Œå®éªŒæ€§çš„æ”¯æŒäº†c++17çš„è¯­æ³•\ngcc 7, åœ¨è¯­æ³•å±‚é¢ï¼Œå®Œæ•´çš„å…¼å®¹äº†c++17æ ‡å‡†\ngcc 9, c++17 ABIå±‚é¢å®Œæ•´çš„å…¼å®¹(æ„å‘³ç€å¯ä»¥å®‰å…¨çš„äº¤å‰ç¼–è¯‘)\nä¿¡æ¯æ¥æº\nè€ƒè™‘åˆ°ubuntu16å·²ç»äº2021å¹´ç»“æŸæ ‡å‡†æ”¯æŒï¼Œ2026å¹´å°†ç»“æŸç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠä½¿ç”¨æ›´å¤šçš„c++17çš„ç‰¹æ€§\næˆ‘å†³å®šåœ¨æˆ‘çš„å¼€å‘ç¯å¢ƒå®‰è£…å¤šä¸ªgccç‰ˆæœ¬ï¼Œè¸©ä¸€ä¸‹å‡çº§gccå‘ï¼Œ\nå…ˆè®¾å®šä¸€ä¸ªå°ç›®æ ‡ï¼šå®‰è£…å¯ä»¥åœ¨gcc 5 å’Œgcc7ä¹‹é—´æ¥å›åˆ‡æ¢çš„å¼€å‘ç¯å¢ƒ\n2.å‡çº§ä¹‹å‰ å¤‡ä»½è™šæ‹Ÿæœºç¯å¢ƒ ï¼ŒåŸºæ“\n3. å‡çº§ æˆ‘ä»¬ä¸»è¦é€šè¿‡build-essential è¿™ä¸ªåŸºç¡€è®¾æ–½æ¥ å®‰è£…ï¼Œç®¡ç† gcc ï¼Œ æ‰€ä»¥é¦–å…ˆå®‰è£…å®ƒ\n1 sudo apt install build-essential ä¸‹é¢ä¸‰ä¸ªé•œåƒä»»é€‰ä¸€ä¸ª\n1 2 3 4 5 6 #æ¸…å sudo sed -i \u0026#39;s/http:\\/\\/archive.ubuntu.com\\/ubuntu\\//http:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/ubuntu\\//g\u0026#39; /etc/apt/sources.list #é˜¿é‡Œäº‘ sudo sed -i \u0026#39;s/http:\\/\\/archive.ubuntu.com\\/ubuntu\\//http:\\/\\/mirrors.aliyun.com\\/ubuntu\\//g\u0026#39; /etc/apt/sources.list #åä¸ºäº‘ sudo sed -i \u0026#39;s/http:\\/\\/archive.ubuntu.com\\/ubuntu\\//https:\\/\\/mirrors.huaweicloud.com\\/ubuntu\\//g\u0026#39; /etc/apt/sources.list å®‰è£…gccç‰ˆæœ¬\n1 sudo apt -y install gcc-5 g++-5 gcc-7 g++-7 1 2 3 4 sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 5 sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 5 sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 7 sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 7 é…ç½®gccç‰ˆæœ¬\n1 /etc/apt$ sudo update-alternatives --config gcc æŒ‰2å†æŒ‰å›è½¦å°±ä¼šåˆ‡æ¢åˆ°gcc7\n1 2 3 4 5 6 7 8 9 10 deepvision@sw-008:/etc/apt$ sudo update-alternatives --config gcc There are 2 choices for the alternative gcc (providing /usr/bin/gcc). Selection Path Priority Status ------------------------------------------------------------ 0 /usr/bin/gcc-7 7 auto mode * 1 /usr/bin/gcc-5 5 manual mode 2 /usr/bin/gcc-7 7 manual mode Press \u0026lt;enter\u0026gt; to keep the current choice[*], or type selection number: å¯ä»¥æ‰“å°å‡ºç‰ˆæœ¬æ¥çœ‹æ˜¯å¦åˆ‡æ¢æˆåŠŸ\n1 2 gcc --version g++ --version end\n", 
        "url": "\/post\/ubuntu%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAgcc%E7%89%88%E6%9C%AC\/"
    },
    
    "\/tags\/arm64\/": {
        "title": "Arm64",
        "tags": [],
        "content": "", 
        "url": "\/tags\/arm64\/"
    },
    
    "\/tags\/cmake\/": {
        "title": "CMake",
        "tags": [],
        "content": "", 
        "url": "\/tags\/cmake\/"
    },
    
    "\/post\/cmake_vcpkg_meson%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91arm64_raspberry_pi%E7%A8%8B%E5%BA%8F\/": {
        "title": "cmake_vcpkg_mesonäº¤å‰ç¼–è¯‘arm64_raspberry_piç¨‹åº",
        "tags": ["C\u002b\u002b","VCPKG","CMake","Meson","RaspberryPI","Arm64","Cross-comple",],
        "content": "0. èƒŒæ™¯ å¤§æ¦‚æ˜¯ä¸Šä¸ªæœˆå·¦å³ï¼ŒååŠ©éŸ©åšæŠŠæˆ‘å†™çš„è¿™å¥—ç½‘å£ç›¸æœºæ¡†æ¶è¿è¡Œåˆ°æ ‘è“æ´¾ä¸Šï¼Œä¸€ç›´æƒ³æ‰¾æ—¶é—´ è®°å½•ä¸€ä¸‹ï¼Œç»ˆäºæœ‰æ—¶é—´ äº†ã€‚\né™¤äº†äº¤å‰ç¼–è¯‘æˆ‘ä»¬è‡ªå·±çš„ä»£ç ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¾èµ–çš„3æ–¹çš„æ¡†æ¶ä¹Ÿéœ€è¦ç¼–è¯‘ä¸ºarm64çš„åº“ï¼Œå¤§æ¦‚ä¼šæŒ‰æˆ‘ä¸‹é¢åˆ—çš„è¿™å‡ ç‚¹ä¸ºå¤§çº²è¿›è¡Œè®°å½•\nvcpkgç”¨äºå®‰è£…å¤§éƒ¨åˆ†ç‰ˆæœ¬ç¨³å®šçš„ä¸‰æ–¹æ¡†æ¶ï¼Œå°‘éƒ¨åˆ†ä¸‰æ–¹æ¡†æ¶ç”¨vcpkgå®‰è£…ä¹Ÿä¸ä¸€å®šç¼–è¯‘å¾—äº†ï¼Œå› ä¸ºå®˜æ–¹åªç»´æŠ¤å‡ ç§å¸¸ç”¨çš„tripletsï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰å¤ªé«˜çš„ç¼–è¯‘å·¥ä½œï¼Œå°†ä¸å¾—ä¸ä½¿ç”¨ç¤¾åŒºç‰ˆæœ¬çš„tripletsï¼Œå°†ä½¿vcpkgé‡åˆ°æ¯”å¹³æ—¶æ›´å¤šçš„ç¼–è¯‘é—®é¢˜ï¼Œå½“ç„¶å¦‚æœæœ‰æ—¶é—´ +æœ‰èƒ½åŠ›çš„è¯ï¼Œå¯ä»¥fixè¿™äº›bugä¸ºvcpkgæäº¤pr ï¼Œè¿™éƒ¨åˆ†å·¥ä½œé€šå¸¸ç”±å¾®è½¯çš„vcpkgå°ç»„å’Œç¤¾åŒºå¼€å‘è€…ä¸€åŒç»´æŠ¤\næ¥ä¸‹æ¥æˆ‘ä¸ä¼šå¾ˆè¯¦ç»†çš„ä»‹ç»æŸä¸ªå…·ä½“çš„åº“æ˜¯æ€ä¹ˆç¼–è¯‘çš„ï¼Œç”šè‡³ä¼šè·³è¿‡ï¼Œä¸»è¦ä»‹ç»äº¤å‰ç¼–è¯‘çš„å¤§è‡´è¿‡ç¨‹\nç›®å½•\nå‡†å¤‡å·¥ä½œ\narm64 gccå·¥å…·é“¾ä¸‹è½½\nå¤åˆ¶æ ‘è“æ´¾ systemrootåº“ç›®å½•ï¼Œç”¨äºäº¤å‰ç¼–è¯‘æ—¶ç¨‹åºé“¾æ¥\nç¼–è¯‘ç¯å¢ƒdockeråˆ¶ä½œ\nç¼–è¯‘arm64 Qt5.15\ncmakeäº¤å‰ç¼–è¯‘æ ‘è“æ´¾çš„å·¥å…·é“¾é…ç½®\nmesonäº¤å‰ç¼–è¯‘é…ç½®\nvcpkgé…ç½®\nç»•è¿‡qtä¸‹è½½ç¼–è¯‘ï¼Œä½¿ç”¨æœ¬åœ°å·²æœ‰çš„Qt cmakeäº¤å‰ç¼–è¯‘é…ç½® mesonäº¤å‰ç¼–è¯‘é…ç½® 1. å‡†å¤‡å·¥ä½œ 1.1 arm64 gcc ä¸‹è½½ ç•¥\n1.2 å¤åˆ¶æ ‘è“æ´¾ systemrootåº“ç›®å½•ï¼Œç”¨äºäº¤å‰ç¼–è¯‘æ—¶ç¨‹åºé“¾æ¥ ç•¥ ,éŸ©åšåšçš„é•œåƒ host:rpi4-1ä¸­å·²ç»æœ‰åšè¿™ä¸ªæ“ä½œäº†ï¼Œ/sysroot è¿™ä¸ªç›®å½•\n1.3 ç¼–è¯‘ç¯å¢ƒdockeråˆ¶ä½œ SW/dv-qt-dev: Dockerfiles and scripts for QT development with containers. - dv-qt-dev (deepvision-tech.net)\nä¹‹å‰éŸ©åšå†™çš„è¿™ä¸ªdockerfileé‡Œï¼Œæ˜¯ä»qt å®‰è£…åŒ…å®‰è£…qt çš„.runå®‰è£…åŒ…+æå–å®‰è£…åŒ…è„šæœ¬ å®‰è£…qt 5.12.6ï¼Œ\nä½†qt 5.15æ²¡æœ‰.runå®‰è£…åŒ…ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±ç¼–è¯‘\næ‰€ä»¥å¦‚æœä½ æƒ³ç¼–è¯‘çš„æ˜¯5.12.6ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªdocker file\nå¦‚æœæƒ³ç”¨5.15ï¼Œå¯ä»¥å‚è€ƒæˆ‘åœ¨éŸ©åšçš„å¸®åŠ©ä¸‹ï¼Œåˆ›å»ºçš„è¿™ä¸ªdockerfileï¼Œå®ƒæ²¡æœ‰åŒ…å«qtçš„ç¼–è¯‘ï¼Œæˆ‘ä»¬ä»¥å®ƒåšæˆçš„å®¹å™¨ä¸ºç¯å¢ƒï¼Œåœ¨å®¹å™¨ä¸­ç¼–è¯‘qtåˆ°æˆ‘ä»¬æŒ‚è½½çš„å·ä¸Š\nbuild_dev_env.docker\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 FROM --platform=linux/amd64 ubuntu:16.04 ENV DEBIAN_FRONTEND=noninteractive #RUN touch /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb http://ftp.cn.debian.org/debian bookworm main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb http://ftp.cn.debian.org/debian-security/ bookworm-security main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb http://ftp.cn.debian.org/debian bookworm-updates main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb-src http://ftp.cn.debian.org/debian bookworm main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb-src http://ftp.cn.debian.org/debian-security/ bookworm-security main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ #echo \u0026#34;deb-src http://ftp.cn.debian.org/debian bookworm-updates main contrib non-free non-free-firmware\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list \u0026amp;\u0026amp; \\ COPY set_aptsource.sh /etc/apt RUN chmod +x /etc/apt/set_aptsource.sh \u0026amp;\u0026amp; bash /etc/apt/set_aptsource.sh \u0026amp;\u0026amp;\\ apt update \u0026amp;\u0026amp; \\ apt install -y \\ autoconf \\ libtool \\ autoconf-archive \\ automake \\ bison \\ build-essential \\ cmake \\ cowsay \\ ethtool \\ figlet \\ flex \\ freeglut3-dev \\ g++-aarch64-linux-gnu \\ gawk \\ gcc-aarch64-linux-gnu \\ gcc \\ gdb-multiarch \\ gfortran \\ git \\ gperf \\ libatspi2.0-dev \\ libavcodec-dev \\ libavformat-dev \\ libcap-dev \\ libcap2 \\ libclang-dev \\ libdc1394-22-dev \\ libfontconfig1-dev \\ libfreetype6-dev \\ libgl1-mesa-dev \\ libglade2-0 \\ libglade2-dev \\ libglu1-mesa-dev \\ libgstreamer-plugins-base0.10-dev \\ libgtk-3-dev \\ libjasper-dev \\ libjpeg-dev \\ liblapack-dev \\ libncurses-dev \\ libpcap0.8 \\ libpng12-dev \\ libsndio-dev \\ libssh2-1 \\ libswscale-dev \\ libtiff-dev \\ libva-dev \\ libva-drm1 \\ libva-egl1 \\ libva-glx1 \\ libva1 \\ libx11-dev \\ libx11-xcb-dev \\ libxcb-glx0-dev \\ libxcb-icccm4-dev \\ libxcb-image0-dev \\ libxcb-keysyms1-dev \\ libxcb-randr0-dev \\ libxcb-render-util0-dev \\ libxcb-shape0-dev \\ libxcb-shm0-dev \\ libxcb-sync-dev \\ libxcb-sync0-dev \\ libxcb-util-dev \\ libxcb-xfixes0-dev \\ libxcb-xinerama0-dev \\ libxcb-xkb-dev \\ libxcb1-dev \\ libxext-dev \\ libxfixes-dev \\ libxi-dev \\ libxkbcommon-dev \\ libxkbcommon-x11-0 \\ libxkbcommon-x11-dev \\ libxrender-dev \\ libxslt1-dev \\ lsb-release \\ make \\ mesa-common-dev \\ ninja-build \\ openssl \\ pigz \\ pkg-config \\ python3-pip \\ python3 \\ rsync \\ subversion \\ tar \\ texinfo \\ unzip \\ vim \\ wget \\ x11vnc \\ xauth \\ zlib1g-dev \u0026amp;\u0026amp; \\ mkdir /build \u0026amp;\u0026amp; \\ mkdir /src \u0026amp;\u0026amp; \\ mkdir /repos \u0026amp;\u0026amp; \\ apt-get clean CMD [\u0026#34;/usr/bash\u0026#34;] #pip3 install openpyxl==2.6.4 \u0026amp;\u0026amp; \\ #pip3 install xlrd==1.2.0 \u0026amp;\u0026amp; \\ #libgli-mesa-dev \\ #libglul-mesa-dev \\ ä¸Šé¢dockerfileç”¨åˆ°çš„æ›¿æ¢aptæºçš„è„šæœ¬ï¼Œç”¨äºæŠŠé•œåƒçš„aptæºæ›¿æ¢ä¸ºæˆ‘ä»¬å…¬å¸çš„aptç¼“å­˜\nset_aptsource.sh\n1 2 3 4 5 6 7 8 9 10 11 12 #!/bin/bash OldSource=`grep ^deb /etc/apt/sources.list|awk \u0026#39;{print $2}\u0026#39;|sort |uniq |sed \u0026#39;/security.ubuntu.com/d\u0026#39;` NewSource=\u0026#34;-apt.deepvision-tech.net/repository/apt-\u0026#34; OsVer=`cat /etc/issue|awk -F\u0026#39;[ .]+\u0026#39; \u0026#39;{print $2}\u0026#39;` cp -f /etc/apt/sources.list /etc/apt/sources.list.bak echo \u0026#34;\u0026#34; echo -e \u0026#34;${YELOW}** Old apt sources backup to [/etc/apt/sources.list.bak] **${RES}\u0026#34; sed -i \u0026#34;s#${OldSource}#http://hz${NewSource}${OsVer}/#g\u0026#34; /etc/apt/sources.list echo -e \u0026#34;${YELOW}** new apt source replaced by [http://hz${NewSource}${OsVer}] **${RES}\u0026#34; echo -e \u0026#34;${YELOW}** Please run command [sudo apt update],Let config become effective **${RES}\u0026#34; æŠŠå®ƒä»¬ä¿©æ”¾åœ¨åŒä¸€ç›®å½•ï¼Œç„¶ååœ¨è¿›å…¥ç›®å½•ï¼Œæ‰§è¡Œ\n1 docker build build_dev_env.docker . -t dockerRepoName:tag è¿™æ ·å°±èƒ½æ„å»ºdockeré•œåƒäº†\n2. ç¼–è¯‘arm64 Qt5.15.11 2.1 Qt5.15 æºç è·å– å¦‚æœä½ å¯¹qtçš„ç‰ˆæœ¬å†å²ç†Ÿæ‚‰çš„è¯ï¼Œåº”è¯¥çŸ¥é“ï¼Œä»å®˜æ–¹ç½‘ç«™ä¸Šèƒ½ä¸‹è½½åˆ°çš„æœ€åä¸€ä¸ªå¼€æºç‰ˆæœ¬çš„å®‰è£…åŒ…æ˜¯æ˜¯Qt 5.14,å†å¾€åï¼Œéœ€è¦ä¸‹è½½Qtçš„åœ¨çº¿å®‰è£…å™¨ï¼Œåœ¨çº¿å®‰è£…ï¼Œ ç”±äºæˆ‘ä»¬å°†åœ¨ç¼–è¯‘æœåŠ¡å™¨çš„dockerå®¹å™¨ä¸­è¿›è¡Œç¼–è¯‘,é»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰guiæ”¯æŒçš„ ï¼Œæ‰€ä»¥ç”¨å›¾å½¢åŒ–çš„å®‰è£…ä¼šå¤šåšä¸€äº›æ­¥éª¤ï¼Œè™½ç„¶éŸ©åšå·²ç»æœ‰å†™è¿‡ç›¸å…³çš„æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥åšåˆ°ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯æ›´å€¾å‘äºä½¿ç”¨æºç ç¼–è¯‘Qt5.15ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æœåŠ¡å™¨160æ ¸çš„åŠ æŒä¸‹ï¼Œç¼–è¯‘ä¸€ä¸ªQt5åªéœ€è¦å¤§æ¦‚ååˆ†é’Ÿå·¦å³\næ‰€ä»¥éœ€è¦è·å–Qt5.15çš„æºç ï¼Œ\nä»vcpkgæºç ä¸­å¯ä»¥è·å–åˆ°qt5çš„æºç ä¸‹è½½è·¯å¾„ï¼Œ(ä¸ç›´æ¥ä½¿ç”¨vcpkgæ˜¯å› ä¸ºqtç¼–è¯‘é€‰é¡¹æ¯”è¾ƒå¤šï¼Œç›´æ¥ç¼–è¯‘æ¯”è¾ƒçµæ´»)\nåœ¨qt_download_submodule.cmakeè¿™ä¸ªæ–‡ä»¶ä¸­è¿™å‡ è¡Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–åˆ°ä¼¯å…‹åˆ©å¤§å­¦æä¾›çš„qtæºç \n1 2 3 4 5 6 set(FULL_VERSION \u0026#34;${QT_MAJOR_MINOR_VER}.${QT_PATCH_VER}\u0026#34;) set(ARCHIVE_NAME \u0026#34;${NAME}-everywhere-opensource-src-${FULL_VERSION}.tar.xz\u0026#34;) set(URLS \u0026#34;https://download.qt.io/archive/qt/${QT_MAJOR_MINOR_VER}/${FULL_VERSION}/submodules/${ARCHIVE_NAME}\u0026#34; \u0026#34;https://mirrors.ocf.berkeley.edu/qt/archive/qt/${QT_MAJOR_MINOR_VER}/${FULL_VERSION}/submodules/${ARCHIVE_NAME}\u0026#34; ) ä¹Ÿå¯ä»¥ä»æµè§ˆå™¨ç›´æ¥è¿›å…¥ OCF Mirrors (berkeley.edu)\nå¦‚æœè¦å®Œæ•´çš„æºç ï¼Œä¸‹è½½singleç›®å½•ä¸‹çš„taråŒ…\nå¦‚æœåªæ˜¯è¦ç¼–è¯‘æŸä¸ªå­æ¨¡å—ï¼Œä¸‹è½½submodulesé‡Œçš„å…·ä½“æ¨¡å—çš„taråŒ…\n2.2 é…ç½®ç¼–è¯‘é€‰é¡¹ æ ‘è“ä¸Šæœ‰ä¸¤ç§guiæ¨¡å¼ï¼Œä¸€ç§æ˜¯ç³»ç»Ÿåªæœ‰ä¸€ä¸ªçª—å£ï¼Œéœ€è¦qtç¼–è¯‘é€‰é¡¹egflsï¼Œä¸€ç§ä¼ ç»Ÿæ¡Œé¢ç³»ç»Ÿï¼Œéœ€è¦qtå¯¹åº”çš„ç¼–è¯‘é€‰é¡¹æ˜¯x11æˆ–waylandæ¨¡å¼\neglfsçš„ç‰¹ç‚¹æ˜¯ç³»ç»Ÿé™¤äº†å‘½ä»¤è¡Œçª—å£ï¼Œè¿™ç§æƒ…å†µä¸‹é€‚åˆä½¿ç”¨qt quick controls 2 + opengl eså¼€å‘ï¼Œå› ä¸ºqt quick controls 2æœ¬èº«å°±æ˜¯æ··åˆæ¸²æŸ“çš„ï¼Œæ§ä»¶ä¸ä¼šåˆ›å»ºç³»ç»ŸåŸç”Ÿçª—å£,\nç›¸å¯¹äºeglfsï¼Œ x11æˆ–wayland é€šå¸¸æ¯ä¸ªæ§ä»¶éƒ½ä¼šåˆ›å»ºå•ç‹¬çš„ç³»ç»ŸåŸç”Ÿçª—å£ï¼Œ qt quick controls 1 å’Œ qt widgetéƒ½æ˜¯è¿™ä¸ªæ¨¡å¼ï¼Œ\né…ç½®qtçš„æ ‘éœ‰äº¤å‰ç¼–è¯‘é€‰é¡¹æ—¶ï¼Œä¸»è¦è¿™ä¸ªéœ€è¦æ³¨æ„\n-device\n-device-option\n-sysroot\n-platform\n-xplatform\nå…¶ä¸­ -platfrom å’Œ -xplatformåœ¨äº¤å‰ç¼–è¯‘rasp-piæ—¶å¥½åƒä¸æ˜¯å¿…è¦çš„\nåœ¨æºç ç›®å½•ï¼Œqt5/qtbase/mkspecsä¸­å¯ä»¥æŸ¥çœ‹è¿™äº›å¯é€‰é¡¹\nå…¶ä»–çš„éƒ½æ˜¯æ¨¡å—é€‰é¡¹ï¼Œå®‰è£…ç›®å½•ä¹‹ç±»çš„ï¼Œè¿™é‡Œä¸»è¦è¿˜æ˜¯å‚è€ƒéŸ©åšä¹‹å‰å†™çš„æ–‡æ¡£çš„è„šæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 #!/bin/bash # vim: tabstop=4 shiftwidth=4 softtabstop=4 # -*- sh-basic-offset: 4 -*- set -exuo pipefail BUILD_TARGET=/build SRC=/src # Note: If changing the QT_BRANCH to a lower version, modify line 43 for the correct path QT_BRANCH=\u0026#34;5.15.11\u0026#34; DEBIAN_VERSION=$(lsb_release -cs) MAKE_CORES=64 /usr/games/cowsay -f tux \u0026#39;Building QT version $QT_BRANCH.\u0026#39; function patch_qt () { local QMAKE_FILE=\u0026#39;/src/qt5/qtbase/mkspecs/devices/linux-rasp-pi4-v3d-g++/qmake.conf\u0026#39; echo \u0026#34;\u0026#34; \u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;include(../common/linux_device_pre.conf)\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QMAKE_INCDIR_OPENGL_ES2 = $${QMAKE_INCDIR_EGL}\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QMAKE_LIBS_OPENGL_ES2 = $${VC_LINK_LINE} -lGLESv2\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QMAKE_LIBS_EGL = $${VC_LINK_LINE} -lEGL -lGLESv2\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; #echo \u0026#39;QMAKE_LIBDIR_BCM_HOST = $$VC_LIBRARY_PATH\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; #echo \u0026#39;QMAKE_INCDIR_BCM_HOST = $$VC_INCLUDE_PATH\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; #echo \u0026#39;QMAKE_LIBS_BCM_HOST = -lbcm_host\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QMAKE_CFLAGS = -march=armv8-a\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QMAKE_CXXFLAGS = $$QMAKE_CFLAGS\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;QT_QPA_DEFAULT_PLATFORM = xcb\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; #echo \u0026#39;EGLFS_DEVICE_INTEGRATION= eglfs_kms\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; echo \u0026#39;load(qt_config)\u0026#39; \u0026gt;\u0026gt; \u0026#34;$QMAKE_FILE\u0026#34; } function fetch_qt5 () { pushd /src if [ ! -d \u0026#34;qt5\u0026#34; ]; then mkdir qt5 tar xf /src/qt-everywhere-opensource-src-\u0026#34;$QT_BRANCH\u0026#34;.tar.xz -C ./qt5 --strip-components=1 fi popd\t} function build_qt () { local SRC_DIR=\u0026#34;/src/$1\u0026#34; if [ ! -f \u0026#34;$BUILD_TARGET/qt5-$QT_BRANCH-$DEBIAN_VERSION-$1.tar.gz\u0026#34; ]; then /usr/games/cowsay -f tux \u0026#34;Building QT for $1\u0026#34; fetch_qt5 mkdir -p \u0026#34;$SRC_DIR\u0026#34; pushd \u0026#34;$SRC_DIR\u0026#34; patch_qt /src/qt5/configure \\ -device linux-rasp-pi4-v3d-g++ \\ -opengl es2 \\ -egl \\ -qpa xcb \\ -xcb \\ -eglfs \\ -opensource \\ -confirm-license \\ -device-option CROSS_COMPILE=aarch64-linux-gnu- \\ -extprefix \u0026#34;$SRC_DIR/qt5pi\u0026#34; \\ -pkg-config \\ -qt-pcre \\ -no-pch \\ -evdev \\ -system-freetype \\ -fontconfig \\ -glib \\ -make libs \\ -no-compile-examples \\ -no-cups \\ -no-gtk \\ -no-use-gold-linker \\ -nomake examples \\ -nomake tests \\ -prefix /usr/local/qt5pi \\ -release \\ -skip qtwebengine \\ -skip qtandroidextras \\ -skip qtgamepad \\ -skip qtlocation \\ -skip qtlottie \\ -skip qtmacextras \\ -skip qtpurchasing \\ -skip qtscxml \\ -skip qtsensors \\ -skip qtserialbus \\ -skip qtserialport \\ -skip qtspeech \\ -skip qttools \\ -skip qttranslations \\ -skip qtvirtualkeyboard \\ -skip qtwayland \\ -skip qtwebview \\ -skip qtwinextras \\ -skip wayland \\ -sysroot /sysroot \\ -no-feature-eglfs_brcm \\ -recheck \\ -platform linux-g++-64 \\ -L/sysroot/lib/aarch64-linux-gnu \\ -L/sysroot/usr/lib/aarch64-linux-gnu \\ -I/sysroot/usr/include/ \\ -L/sysroot/lib/mesa-diverted/aarch64-linux-gnu \\ -I/sysroot/usr/include/GLES2 \\ -I/sysroot/usr/include/GLES /usr/games/cowsay -f tux \u0026#34;Making Qt...\u0026#34; make -j\u0026#34;$MAKE_CORES\u0026#34; /usr/games/cowsay -f tux \u0026#34;Installing Qt...\u0026#34; make install pushd \u0026#34;$SRC_DIR\u0026#34; tar cfz \u0026#34;$BUILD_TARGET/qt5-$QT_BRANCH-$DEBIAN_VERSION-$1.tar.gz\u0026#34; qt5pi popd pushd \u0026#34;$BUILD_TARGET\u0026#34; sha256sum \u0026#34;qt5-$QT_BRANCH-$DEBIAN_VERSION-$1.tar.gz\u0026#34; \u0026gt; \u0026#34;qt5-$QT_BRANCH-$DEBIAN_VERSION-$1.tar.gz.sha256\u0026#34; popd else echo \u0026#34;QT Build already exist.\u0026#34;q fi } # Fix relative paths for Raspberry Pi Sysroot build_qt \u0026#34;pi5\u0026#34; 3. cmakeäº¤å‰ç¼–è¯‘æ ‘è“æ´¾çš„å·¥å…·é“¾é…ç½® toolchain-arm64-raspberrypie.cmake\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #å‚è€ƒæ–‡æ¡£ https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html#cross-compiling-for-linux set(CMAKE_SYSTEM_NAME Linux) set(CMAKE_SYSTEM_PROCESSOR arm64) #æ ‘è“æ´¾sysrootç›®å½• set(CMAKE_SYSROOT /sysroot) #å®‰è£…ç›®å½• set(CMAKE_STAGING_PREFIX /repos/dv_app_solution/vcpkg_installed/arm64-linux) #æŒ‡å®šç¼–è¯‘å™¨ set(tools /usr) set(CMAKE_C_COMPILER ${tools}/bin/aarch64-linux-gnu-gcc) set(CMAKE_CXX_COMPILER ${tools}/bin/aarch64-linux-gnu-g++) #æ‰‹åŠ¨æŒ‡å®šarm64çš„qt cmakeæ¨¡å— set(QT_DIR /src/pi5/qt5pi/lib/cmake/Qt5) set(Qt5_DIR /src/pi5/qt5pi/lib/cmake/Qt5) set(ENV{QT_DIR} /src/pi5/qt5pi/lib/cmake/Qt5) set(ENV{QT_DIR} /src/pi5/qt5pi/lib/cmake/Qt5) set(QT_QMAKE_EXECUTABLE /src/pi5/qt5pi/bin/qmake) set(Qt5Core_DIR /src/pi5/qt5pi/lib/cmake/Qt5Core) set(Qt5Gui_DIR /src/pi5/qt5pi/lib/cmake/Qt5Gui) set(Qt5Widgets_DIR /src/pi5/qt5pi/lib/cmake/Qt5Widgets) set(Qt5Quick_DIR /src/pi5/qt5pi/lib/cmake/Qt5Quick) set(Qt5QuickControls2_DIR /src/pi5/qt5pi/lib/cmake/Qt5QuickControls2) set(Qt5QmlModels_DIR /src/pi5/qt5pi/lib/cmake/Qt5QmlModels) set(Qt5Qml_DIR /src/pi5/qt5pi/lib/cmake/Qt5Qml) set(Qt5Network_DIR /src/pi5/qt5pi/lib/cmake/Qt5Network) set(Qt5LinguistTools_DIR /src/pi5/qt5pi/lib/cmake/Qt5LinguistTools) #å› ä¸ºæ˜¯äº¤å‰ç¼–è¯‘ï¼Œæ‰€ä»¥ä¸»æœºé‡Œæœ‰arm64çš„åº“ä¹Ÿæœ‰amd64çš„åº“ï¼Œä¸‹é¢è¿™å‡ è¡Œè®¾ç½®ä¸è®©cmakeè‡ªå·±åœ¨ç›®å½•ä¸­æœç´¢åº“ï¼Œ #è€Œæ˜¯é€šè¿‡æ‰‹åŠ¨è®¾ç½®åº“çš„è·¯å¾„ï¼Œé˜²æ­¢ç¼–è¯‘é”™è¯¯ set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER) set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY) set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY) #cmake prefix set(CMAKE_PREFIX_PATH /src/pi5/qt5pi;/repos/dv_app_solution/vcpkg_installed/arm64-linux) 4.mesonäº¤å‰ç¼–è¯‘é…ç½® toolchain-arm64-raspberrypie-messon.cross\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #å‚è€ƒæ–‡æ¡£1 https://mesonbuild.com/Cross-compilation.html #å‚è€ƒæ–‡æ¡£2 https://github.com/mesonbuild/meson/blob/master/docs/markdown/Reference-tables.md#cpu-families [binaries] c = \u0026#39;/usr/bin/aarch64-linux-gnu-gcc\u0026#39; cpp = \u0026#39;/usr/bin/aarch64-linux-gnu-g++\u0026#39; ar = \u0026#39;/usr/bin/aarch64-linux-gnu-ar\u0026#39; strip = \u0026#39;/usr/bin/aarch64-linux-gnu-strip\u0026#39; [properties] sys_root = \u0026#39;/sysroot\u0026#39; c_args = [\u0026#39;-march=armv8-a\u0026#39;, \u0026#39;-mtune=cortex-a53\u0026#39;, \u0026#39;-marm\u0026#39;] # cpp_args = [\u0026#39;-std=c++17\u0026#39;,\u0026#39;-march=armv8-a\u0026#39;, \u0026#39;-mtune=cortex-a53\u0026#39;, \u0026#39;-marm\u0026#39;] # #pkg_config_libdir = \u0026#39;/repos/dv_app_solution/vcpkg_installed/arm64-linux\u0026#39; #sizeof_int = 4 #sizeof_wchar_t = 4 #sizeof_void* = 4 # #alignment_char = 1 #alignment_void* = 4 #alignment_double = 4 # #has_function_printf = true #c_args = [\u0026#39;-march=armv8-a\u0026#39;, \u0026#39;-mtune=cortex-a53\u0026#39;, \u0026#39;-marm\u0026#39;,\u0026#39;-I/src/pi5/qt5pi/include\u0026#39;,\u0026#39;-I/repos/dv_app_solution/vcpkg_installed/arm64-linux/include\u0026#39;] # #cpp_args = [\u0026#39;-march=armv8-a\u0026#39;, \u0026#39;-mtune=cortex-a53\u0026#39;, \u0026#39;-marm\u0026#39;,\u0026#39;-I/src/pi5/qt5pi/include\u0026#39;,\u0026#39;-I/repos/dv_app_solution/vcpkg_installed/arm64-linux/include\u0026#39;] # #library_dirs = [\u0026#39;/src/pi5/qt5pi/lib\u0026#39;,\u0026#39;/repos/dv_app_solution/vcpkg_installed/arm64-linux/lib\u0026#39;] #/repos/dv_app_solution/vcpkg_installed/arm64-linux/include/glib-2.0/glib-object.h [build_machine] system = \u0026#39;linux\u0026#39; cpu_family = \u0026#39;x86_64\u0026#39; cpu = \u0026#39;x86_64\u0026#39; endian = \u0026#39;little\u0026#39; [host_machine] system = \u0026#39;linux\u0026#39; cpu_family = \u0026#39;x86_64\u0026#39; cpu = \u0026#39;x86_64\u0026#39; endian = \u0026#39;little\u0026#39; [target_machine] system = \u0026#39;linux\u0026#39; cpu_family = \u0026#39;aarch64\u0026#39; cpu = \u0026#39;aarch64\u0026#39; endian = \u0026#39;little\u0026#39; 5. vcpkgé…ç½® 5.1 ä½¿ç”¨æœ¬åœ°çš„qtï¼Œç»•è¿‡ä¸‹è½½qt,ç¼–è¯‘qtçš„æ­¥éª¤ ä½¿ç”¨custom-ports\nä¾‹å¦‚ï¼Œæƒ³ç”¨vcpkgå®‰è£…vtkï¼Œä½†vtkä¸­ä¾èµ–äº†qtï¼Œè¿™æ—¶å¯ä»¥å¤åˆ¶ä¸€ä»½vtkåœ¨vcpkgä¸­çš„é…ç½®\n1 cp -rf path2vcpkg/ports/vtk/ ~/my-custom-vtk-port ç„¶åæŠŠ ~/my-custom-vtk-port/vcpkg.json ä¸­çš„dependency json æ•°ç»„ ç»“ç‚¹ä¸­çš„qtç›¸å…³çš„æ¡ç›®åˆ é™¤æ‰\nç„¶å vcpkg installçš„æ—¶å€™åŠ ä¸Š --overlay-ports=~/my-custom-vtk-port\næˆ–è€…ç›´æ¥ä¿®æ”¹vcpkgçš„æºç ï¼Œåœ¨åŸæ¥çš„port/vcpkg.jsonä¸­ç›´æ¥åˆ é™¤qtç›¸å…³çš„æ¡ç›®\nå®‰è£…æ—¶ä¸ç”¨--overlay-portsä¹Ÿä¸ä¼šä¸‹è½½ ç¼–è¯‘ qt\n5.2 ä¸ºvcpkgè®¾ç½®äº¤å‰ç¼–è¯‘å·¥å…·é“¾ ä½¿ç”¨custom-triplet\nå¤åˆ¶ä¸€ä»½vcpkgæºç ä¸‹çš„triplet\n1 cp -rf path2vcpkg/triplits ~/my-custom-triplets ç„¶åä¿®æ”¹~/my-custom-triplets/community/arm64-linux.cmake\nå†…å®¹æ”¹ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 set(VCPKG_TARGET_ARCHITECTURE arm64) set(VCPKG_CRT_LINKAGE dynamic) set(VCPKG_LIBRARY_LINKAGE static) set(VCPKG_CMAKE_SYSTEM_NAME Linux) set(VCPKG_BUILD_TYPE release) set(QT_DIR /src/pi5/qt5pi/lib/cmake) set(ENV{QT_DIR} /src/pi5/qt5pi/lib/cmake) set(Qt5_DIR /src/pi5/qt5pi/lib/cmake) set(ENV{Qt5_DIR} /src/pi5/qt5pi/lib/cmake) set(VCPKG_ENV_PASSTHROUGH QT_DIR Qt5_DIR) set(CMAKE_TOOLCHAIN_FILE /repos/vcpkg/toolchains/arm64-raspberrypie.cmake) set(ENV{CMAKE_TOOLCHAIN_FILE} /repos/vcpkg/toolchains/arm64-raspberrypie.cmake) set(VCPKG_MESON_CROSS_FILE /repos/vcpkg/toolchains/arm64-raspberrypie-meson.cross) ç”±äºæˆ‘ä»¬åœ¨5.1ä¸­å·²ç» è®¾ç½®äº†vcpkgä¸ä¸‹è½½ç¼–è¯‘qt5ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ä¸ªtripletæ–‡ä»¶ä¸­ï¼Œè®¾ç½®äº†qt5çš„æœ¬åœ°è·¯å¾„ï¼Œç„¶å\nç„¶åè®¾ç½®CMAKE_TOOLCHAIN_FILEä¸ºæ­¥éª¤3ä¸­å†™çš„cmake å·¥å…·é“¾\nè®¾ç½®VCPKG_MESON_CROSS_FILEä¸ºæ­¥éª¤4ä¸­çš„mesonäº¤å‰ç¼–è¯‘é…ç½®æ–‡ä»¶\nç„¶ååœ¨ä½¿ç”¨ä½¿ç”¨é…ç½®å¥½çš„äº¤å‰ç¼–è¯‘çš„tripletè¿›è¡Œå®‰è£…\n1 vcpkg install --overlay-triplets=~/my-custom-triplets --triplet=arm64-linux --host-triplet=x64-linux è¿™æ ·æ‰€å®‰è£…çš„åº“å°±ä¼šæŒ‰é…ç½®è¿›è¡Œäº¤å‰ç¼–è¯‘äº†\n6 ç¼–è¯‘æˆ‘ä»¬è‡ªå·±çš„cmakeå·¥ç¨‹ 1 2 3 4 5 6 7 cd dv_app_solution #è¿›å…¥æˆ‘ä»¬çš„å·¥ç¨‹ mkdir build \u0026amp;\u0026amp; cd build cmake -DCMAKE_TOOLCHAIN_FILE=~/path/to/toolchain-arm64-raspberrypie.cmake \\ -DCMAKE_PREFIX_PATH=/path/to/pi5/qt5pi/lib/cmake;/repos/dv_app_solution/vcpkg_installed/arm64-linux \\ .. cmake --build . --target=install å…¶ä¸­/repos/dv_app_solution/vcpkg_installed/arm64-linux ä¸ºvcpkg åº“å®‰è£…çš„ç›®å½•ï¼Œå†™åœ¨æ­¥éª¤3ä¸­çš„toolchain-arm64-raspberrypie.cmakeä¸­\næ³¨æ„\ndv_app_solutioné¦–æ¬¡ç¼–è¯‘æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŠŠæ‰€æœ‰å­æ¨¡å—å‘å¸ƒåˆ°vcpkgï¼Œé€šè¿‡vcpkgå®‰è£…ä¾èµ–é¡¹ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨é€ä¸ªç¼–è¯‘å­æ¨¡å—ï¼Œ\nå¦åˆ™ä¼šå› ä¸ºcmake çš„find_packageæ‰¾ä¸åˆ°ä¾èµ–ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ ï¼Œç¼–è¯‘å®‰è£…é¡ºåºä¸º\nprism prism_container prism_qt_modular prism_qt_core prism_qt_ui dv_algorithm dv_tools dv_common dv_camera dv_app åç»­ä¼šå‚è€ƒå…¶ä»–å¼€æºé¡¹ç›®çš„å¸¸ç”¨åšæ³•ï¼Œç¼–å†™bashå’Œpowershellçš„åˆå§‹åŒ–ç¼–è¯‘è„šæœ¬\n", 
        "url": "\/post\/cmake_vcpkg_meson%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91arm64_raspberry_pi%E7%A8%8B%E5%BA%8F\/"
    },
    
    "\/tags\/cross-comple\/": {
        "title": "Cross-comple",
        "tags": [],
        "content": "", 
        "url": "\/tags\/cross-comple\/"
    },
    
    "\/tags\/meson\/": {
        "title": "Meson",
        "tags": [],
        "content": "", 
        "url": "\/tags\/meson\/"
    },
    
    "\/tags\/raspberrypi\/": {
        "title": "RaspberryPI",
        "tags": [],
        "content": "", 
        "url": "\/tags\/raspberrypi\/"
    },
    
    "\/tags\/vcpkg\/": {
        "title": "VCPKG",
        "tags": [],
        "content": "", 
        "url": "\/tags\/vcpkg\/"
    },
    
    "\/tags\/core\/": {
        "title": "Core",
        "tags": [],
        "content": "", 
        "url": "\/tags\/core\/"
    },
    
    "\/tags\/dump\/": {
        "title": "Dump",
        "tags": [],
        "content": "", 
        "url": "\/tags\/dump\/"
    },
    
    "\/post\/ubuntu16.04%E8%AE%BE%E7%BD%AEcore-dump\/": {
        "title": "ubuntu16.04è®¾ç½®core dump",
        "tags": ["Ubuntu","Core","Dump",],
        "content": "0. ä¹‹å‰åŒäº‹å†™è¿‡è¿™ä¸ªä¸»é¢˜ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è½¯ä»¶ç»™æŠ€æœ¯æ”¯æŒçš„pdfé‡Œä¹Ÿæœ‰è¿™ä¸ªè¯´æ˜ï¼Œä½†éƒ½è¯·å¾—æ¯”è¾ƒæŠ½è±¡ï¼Œæ‰€ä»¥é‡æ–°å†™ä¸€ä¸ªè¯¦ç»†ç‰ˆæœ¬\n1. è®¾ç½®core dumpèµ„æºé™åˆ¶ é€šè¿‡ulimit -aå¯ä»¥æŸ¥çœ‹å„ç±»èµ„æºé™åˆ¶ï¼Œå…¶ä¸­-cç±»è¡¨ç¤ºcore\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 deepvision@ubuntu:~/source/repos/dv_app_solution/bin/x86_64(master)$ ulimit -a core file size (blocks, -c) 0 data seg size (kbytes, -d) unlimited scheduling priority (-e) 0 file size (blocks, -f) unlimited pending signals (-i) 31574 max locked memory (kbytes, -l) 64 max memory size (kbytes, -m) unlimited open files (-n) 1024 pipe size (512 bytes, -p) 8 POSIX message queues (bytes, -q) 819200 real-time priority (-r) 0 stack size (kbytes, -s) 8192 cpu time (seconds, -t) unlimited max user processes (-u) 31574 virtual memory (kbytes, -v) unlimited file locks (-x) unlimited é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”è¯¥çœ‹åˆ°core file size é™åˆ¶ä¸º0ï¼Œubuntu 16.04ç¨³å®šç‰ˆæœ¬å‘å¸ƒåçš„é»˜è®¤è®¾ç½®\nå°†å®ƒè®¾ç½®ä¸ºunlimitedæ˜¯ç”Ÿæˆcore dumpçš„å¿…è¦ä¸å……åˆ†æ¡ä»¶\n1.1 ä¸´æ—¶è®¾ç½® åœ¨ç»ˆç«¯è®¾ç½®ulimit -c unlimitedï¼Œè¿™ç§æ–¹å¼ï¼Œå¦å¯åŠ¨ä¸€ä¸ªç»ˆç«¯å°±æ¢å¤ç³»ç»Ÿé»˜è®¤è®¾ç½®äº†ï¼Œè€Œä¸”ä¼šå—åˆ°1.2ä¸­ç¬¬äºŒåˆ—é…ç½®å€¼çš„å½±å“ï¼Œå¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥å¦‚æœåªæ˜¯å†™åˆ° ~/bashrcæˆ–~/profileï¼Œ å½“ç¨‹åºä¸ä½¿ç”¨bashè¿è¡Œ ï¼Œå¯èƒ½ä¸ä¼šç”Ÿæ•ˆ\n1.2 æŒä¹…åŒ–è®¾ç½® ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€/etc/security/limits.config\nå¹¶å†™å…¥\n1 * hard core ulimited å…¶ä¸­hardå¯ä»¥ç”¨softæ›¿ä»£ï¼Œ åŒºåˆ«æ˜¯hard æ™®é€šç”¨æˆ·ä¸å¯ä»¥é€šè¿‡ulimit å‘½ä»¤ä¸´æ—¶æ”¹å˜èµ„æºé™åˆ¶é…é¢ï¼Œsoftç›¸å\nä¿®æ”¹åè®©å®ƒç«‹å³ç”Ÿæ•ˆ\n1 su - deepvision åˆ‡æ¢ä¸€ä¸‹å½“å‰ç”¨æˆ·ä¸ºå½“å‰ç”¨æˆ·ï¼Œä¼šé‡è½½é…ç½®ï¼Œå†ulimit -aæŸ¥çœ‹é…ç½®ï¼Œåº”è¯¥çœ‹åˆ°coreå·²ç»æ˜¯unlimited\n2. è®¾ç½®bug, crashåå¤„ç†çš„ç®¡é“ 2.1 æŸ¥çœ‹ç³»ç»Ÿå¤„ç†bug,å´©æºƒçš„é»˜è®¤é…ç½® å¯ä»¥åœ¨/proc/sys/kernal/core_pattern æ–‡ä»¶ä¸­æŸ¥çœ‹åˆ°è®¾ç½®çš„å¤„ç†æ–¹å¼\nåˆšè£…å¥½çš„ubuntu16.04åº”è¯¥æ˜¯è¿™æ ·çš„\n1 2 root@681e5135949f:/# cat /proc/sys/kernel/core_pattern |/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h %e æé”™äº†ï¼Œè¿™ä¸ªæ˜¯æˆ‘åœ¨129ç¼–è¯‘æœåŠ¡å™¨ä¸Šçš„ubuntu 16.04 docker å®¹å™¨ä¸­æ‰“å°çš„ï¼Œç”±äºdockerå®¹å™¨ä¼šä½¿ç”¨hostçš„å†…æ ¸ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯129æœåŠ¡å™¨çš„é»˜è®¤è®¾ç½®,å³ä¸ºcentos 8\nubuntu16.04å†…æ ¸åº”è¯¥æ˜¯\n1 2 deepvision@ubuntu:/# cat /proc/sys/kernel/core_pattern |/usr/share/apport/apport %p %s %c %d %P %E å¯ä»¥çœ‹å‡ºï¼Œubuntu16.04 é»˜è®¤ä½¿ç”¨apport æŠ¥å‘Šé”™è¯¯ï¼Œè€Œcentos8é€šè¿‡coredumpæœåŠ¡æ¥å¤„ç†bug,å´©æºƒ\n2.2. ä¿®æ”¹ubuntu16.04 å¤„ç†bug,crashä¸ºç”Ÿæˆdump å…ˆåœæ­¢æ‰apportæœåŠ¡\n1 sudo service apport stop ä½¿ç”¨sudo ç¼–è¾‘ /etc/sysctl.configï¼Œ ä½¿æ‰“å°åæœ‰kernal.core_pattern çš„é…ç½®\n1 2 3 4 5 6 7 8 9 10 deepvision@ubuntu:~/source/repos/dv_app_solution(master)$ cat /etc/sysctl.conf |head -n 10 çœç•¥ . . . kernel.core_pattern = core.%e_%p_%h_%t . . . çœç•¥ %e å¯æ‰§è¡Œæ–‡ä»¶åç§°\n%p è¿›ç¨‹å·\n%h ä¸»æœºåç§°\n%tæ—¶é—´æˆ³è¡¨ç¤º , (unix epoch + ç”Ÿæˆçš„msæ•°å¾—åˆ°å½“å‰æ—¶é—´)\nå¯ä»¥åœ¨core.%e_%p_%h_%tå‰é¢åŠ ç»å¯¹è·¯å¾„ï¼Œä¸åŠ è¡¨ç¤ºç”Ÿæˆåœ¨å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•\nç„¶åæ›´æ–°ä¸€ä¸‹é…ç½®\n1 sudo sysctl -p è¿™æ¡å‘½ä»¤åº”è¯¥ä¼šæŠŠé…ç½®åˆ·æ–°åˆ°/proc/sys/kernal ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ\næµ‹è¯•ç”Ÿæˆcore dump\nåœ¨ç¨‹åºmainå‡½æ•°ä¸­åŠ å…¥å´©æºƒä»£ç \n1 2 3 int zero = 0; int exception_num = 1/zero; qDebug() \u0026lt;\u0026lt; exception_num; å¦‚æœæ˜¯releaseé…ç½®ï¼Œä¸è¦çœç•¥ç¬¬3è¡Œï¼Œå› ä¸ºæ²¡æœ‰ä½¿ç”¨çš„å˜é‡ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰ï¼Œå¯¼è‡´æ²¡æœ‰å´©æºƒ\n1 2 3 4 deepvision@ubuntu:~/source/repos/dv_app_solution/bin/x86_64(master)$ ./dv_app Floating point exception (core dumped) deepvision@ubuntu:~/source/repos/dv_app_solution/bin/x86_64(master)$ ll|grep core -rw------- 1 deepvision deepvision 2174976 1æœˆ 13 15:18 core.dv_app_107389_ubuntu_1705130336 ç”ŸæˆdumpæˆåŠŸ\n", 
        "url": "\/post\/ubuntu16.04%E8%AE%BE%E7%BD%AEcore-dump\/"
    },
    
    "\/post\/%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%8A%A8%E6%80%81%E5%BA%93%E5%8F%8A%E5%BA%93%E5%86%85c%E9%A3%8E%E6%A0%BC%E6%96%B9%E6%B3%95\/": {
        "title": "åŠ¨æ€åŠ è½½åŠ¨æ€åº“ï¼ŒåŠåº“å†…cé£æ ¼æ–¹æ³•",
        "tags": ["C\u002b\u002b",],
        "content": "1 èƒŒæ™¯ ã€Šæ–°çš„ç½‘å£ç›¸æœºè½¯ä»¶å·¥ç¨‹ã€‹ï¼Œè®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼Œå¯¹äºä¸åŒäº§å“ï¼Œä¸åŒçš„é¡¹ç›®æ¥è¯´ï¼Œ\nä»£ç å…¨éƒ½æ”¶æ•›åˆ°åŒä¸€ä¸ªä»£ç åº“ï¼ŒåŒä¸€ä¸ªåˆ†æ”¯ã€‚ä¸åŒçš„äº§å“ä¹Ÿåªä¸è¿‡æ˜¯ä¸åŒçš„æ’ä»¶è€Œå·²ï¼Œ\nå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„é¡¹ç›®ç±»å‹ï¼Œè¿‡æ»¤ä¸éœ€è¦åŠ è½½çš„æ’ä»¶\nè¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ï¼Œ\nå¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œä»å„ä¸ªåŠ¨æ€åº“ä¸­å–å‡ºUIå’Œé€»è¾‘ï¼Œ æ‹¼å‡‘æˆä¸€ä¸ªapp å‡å°‘é‡å¤çš„ä»£ç ï¼Œæé«˜ä»£ç é‡ç”¨ç‡ å‡å°‘ç»´æŠ¤æˆæœ¬ï¼Œbugçš„ä¿®å¤ï¼Œåªéœ€è¦ä¸€æ¬¡ï¼Œä¸éœ€è¦è·¨åˆ†æ”¯ï¼Œè·¨äº§å“çš„åˆ°å¤„åˆfixåˆ†æ”¯å’Œè¡¥ä¸ å‡å°‘ä»£ç åˆ†æ”¯æ•°é‡ï¼Œæ‰€æœ‰ä½¿ç”¨æ¡†æ¶çš„äººå›´ç»•ç€masteråˆ†æ”¯å±•å¼€å·¥ä½œ æ–¹ä¾¿è¿›è¡Œé‡æ„ï¼Œå¥½çš„ä»£ç éƒ½æ˜¯é‡æ„å‡ºæ¥çš„ï¼Œå½“æ‰€æœ‰ä»£ç éƒ½åœ¨äº‹ä¸€ä¸ªåˆ†æ”¯ä¸Šæ—¶ï¼Œé‡æ„æ—¶åªè¦æŠŠæ—§çš„æ¥å£ä¿ç•™ï¼Œå¹¶æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œå¢åŠ æ–°çš„é‡æ„æ–¹æ³•ï¼Œæ…¢æ…¢è¿­ä»£æ‰è¿‡æ—¶æ–¹æ³•å°±è¡Œäº†ï¼Œå¦‚æœåˆ†æ”¯å¾ˆå¤šçš„è¯ï¼Œé‡æ„å¾€å¾€é˜»åŠ›é‡é‡ 2 é‡åˆ°ä»€ä¹ˆé—®é¢˜ ç®—æ³•åº“ï¼ŒæŒ‰äº§å“åˆ’åˆ†åˆ†æ”¯ï¼Œ ä¸åŒçš„äº§å“ï¼Œæœ‰ä¸åŒçš„å¤´æ–‡ä»¶\nè¿™å¯¼è‡´ä¸€ä¸ªé—®é¢˜\nå½“è½¯ä»¶ä¸ä¸åŒçš„ç®—æ³•äº§å“æ­é…ä½¿ç”¨æ—¶ï¼ŒæŒ‰ä»¥å¾€çš„æ–¹å¼ï¼Œæ·»åŠ å¤´æ–‡ä»¶ï¼Œé“¾æ¥ç®—æ³•åº“ï¼Œ ç”±äºç®—æ³•å¤´æ–‡ä»¶ä¸åŒï¼Œå°†å¯¼è‡´è½¯ä»¶ä¹Ÿéœ€è¦å¼€å’Œç®—æ³•ä¸€æ ·å¤šçš„åˆ†æ”¯æ‰èƒ½ä¿è¯é“¾æ¥ç®—æ³•åº“ä¸ä¼šå› ä¸ºæ‰¾ä¸åˆ°ç¬¦å·å¯¼è‡´ç¼–è¯‘å¤±è´¥\nè¿™æ ·ä¸€æ¥ï¼Œè½¯ä»¶ä¹Ÿä¸å¾—ä¸æ¯ä¸€ä¸ªå®šåˆ¶é¡¹ç›®å¼€ä¸€ä¸ªåˆ†æ”¯å»å’Œç®—æ³•é€‚é…äº†ã€‚\n3 è§£å†³æ–¹æ³• æˆ‘æ›¾å‘ç®—æ³•éƒ¨æ²Ÿé€šå»ºè®®è¿‡ï¼Œè®©ä»–ä»¬ç»™å‡ºä¸€ä¸ªåˆå¹¶ç‰ˆæœ¬çš„å¤´æ–‡ä»¶ï¼Œ ä¸åŒçš„äº§å“ï¼ŒæŒ‰åç§°ç©ºé—´åˆ’åˆ†å¥½ï¼Œä¾‹å¦‚äºŒç»´ç ç®—æ³•é¡¹ç›®æœ‰è‡ªå·±çš„æ¥å£ï¼Œä¹Ÿæœ‰3dæ¿€å…‰çº¿æ‰«çš„æ¥å£ï¼Œä½†3dæ¿€å…‰çº¿æ‰«çš„æ¥å£åªæ”¾ç©ºå®ç°ï¼Œ è¿™ä¸ªå»ºè®®å®Œé©³å›äº†ï¼Œå› ä¸ºç®—æ³•è®¤ä¸ºè¿™æ ·ä¼šæ±¡æŸ“å¤´æ–‡ä»¶\næ‰€ä»¥æˆ‘å°è¯•äº†å¦ä¸€ç§åŠ¨æ€åº“è°ƒç”¨çš„æ–¹å¼ï¼Œ é€šè¿‡ç³»ç»Ÿapi åŠ¨æ€åŠ è½½åŠ¨æ€åº“ï¼Œå¹¶æŸ¥æ‰¾å·²çŸ¥çš„ç¬¦å·ï¼Œè½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆï¼Œ è°ƒç”¨å‡½æ•°æŒ‡é’ˆã€‚\nç»æµ‹è¯•ï¼Œ windowsä¸Šå’Œlinuxä¸Šéƒ½å¯ä»¥æ­£å¸¸çš„è°ƒç”¨ï¼Œä¸è¿‡éœ€è¦ç®—æ³•æä¾›Cé£æ ¼çš„å‡½æ•°å¯¼å‡ºã€‚\n4 ç¤ºä¾‹ä»£ç  4.1 çº¯cé£æ ¼å¯¼å‡º å¤´æ–‡ä»¶ purecpplib.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #ifndef PURECPPLIB_H #define PURECPPLIB_H #ifdef _WIN32 #define HBBEXPORT __declspec(dllexport) #else #define HBBEXPORT #endif #ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif HBBEXPORT int avg(int a, int b); #ifdef __cplusplus } #endif #endif // PURECPPLIB_H ä½¿ç”¨__cplusplusè¿™ä¸ªå®åŠ äº†ä¸€å¯¹\n1 2 3 extern \u0026#34;C\u0026#34; { } æŠŠæƒ³å¯¼å‡ºçš„æ–¹æ³•åŒ…ä½ï¼Œå½“ç„¶windowsä¸‹ä»ç„¶è¦åŠ å¯¼å‡ºçš„ä¿®é¥°ç¬¦__declspec(dllexport)\nCPP purecpplib.cpp\n1 2 3 4 5 #include \u0026#34;purecpplib.h\u0026#34; int avg(int a, int b) { return (a + b) / 2; } 4.2 windows/linux åŠ¨æ€è°ƒç”¨ç®€å•å°è£… å¤´æ–‡ä»¶ danymic_lib_caller.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #ifndef DANYMIC_LIB_CALLER_H #define DANYMIC_LIB_CALLER_H #include \u0026#34;prism_qt_modular_global.h\u0026#34; #ifdef _WIN32 #include \u0026lt;Windows.h\u0026gt; #endif #ifdef __linux #include \u0026lt;dlfcn.h\u0026gt; #endif #include \u0026lt;iostream\u0026gt; #include \u0026lt;filesystem\u0026gt; class PRISM_QT_MODULAR_EXPORT dynamic_lib_caller { public: dynamic_lib_caller(); //åŠ è½½åŠ¨æ€åº“ static void* loadLib(std::string path); //é€šè¿‡ç¬¦å·è·å–å‡½æ•°æŒ‡é’ˆ static void* getFunctionAddr(void *lib, const char* funName); //å¸è½½åŠ¨æ€åº“ static void unloadLib(void *lib); }; #endif // DANYMIC_LIB_CALLER_H CPP danymic_lib_caller.cpp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 #include \u0026#34;include/prism/qt/modular/dynamic_lib_caller.h\u0026#34; #include \u0026lt;sstream\u0026gt; dynamic_lib_caller::dynamic_lib_caller() { } #ifdef _WIN32 void *dynamic_lib_caller::loadLib(std::string path) { HMODULE lib = LoadLibrary(path.c_str()) ; return static_cast\u0026lt;void*\u0026gt;(lib); } void *dynamic_lib_caller::getFunctionAddr(void *lib, const char* funName) { HMODULE library = static_cast\u0026lt;HMODULE\u0026gt;(lib); // è·å–å‡½æ•°åœ°å€ FARPROC functionAddr = GetProcAddress(library, funName); if (!functionAddr) { return nullptr; } return static_cast\u0026lt;void*\u0026gt;(functionAddr); } void dynamic_lib_caller::unloadLib(void *lib) { if(lib) { HMODULE library = static_cast\u0026lt;HMODULE\u0026gt;(lib); FreeLibrary(library); } } #endif #ifdef __linux void *dynamic_lib_caller::loadLib(std::string path) { void* library = dlopen(path.c_str(), RTLD_NOW); return library; } void *dynamic_lib_caller::getFunctionAddr(void *lib, const char* funName) { void* functionAddr = dlsym(lib, funName); // è·å–å‡½æ•°åœ°å€ if (!functionAddr) { return nullptr; } return functionAddr; } void dynamic_lib_caller::unloadLib(void *lib) { if(lib) { dlclose(lib); } } #endif è¿™ä¸ªcppæ–‡ä»¶é€šè¿‡ _WIN32 å’Œ __linux ä¸¤ä¸ªç¼–è¯‘å™¨è‡ªå¸¦çš„å®ï¼Œå…¼å®¹äº†windowså’Œlinuxä¸‹çš„ åŠ¨æ€åŠ è½½åº“ï¼Œè·å–å‡½æ•°æŒ‡é’ˆï¼Œå¸è½½åŠ¨æ€åº“çš„æ–¹æ³•.\n4.3 ä½¿ç”¨ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 #include \u0026lt;prism/qt/modular/dynamic_lib_caller.h\u0026gt; #include \u0026lt;catch2/catch_all.hpp\u0026gt; #include \u0026lt;catch2/catch_all.hpp\u0026gt; #define CATCH_CONFIG_RUNNER TEST_CASE(\u0026#34;åŠ¨æ€åº“è°ƒç”¨\u0026#34;) { #ifdef _WIN32 void* lib =dynamic_lib_caller::loadLib(R\u0026#34;(...\\pureCppLib.dll)\u0026#34;); #else void* lib =dynamic_lib_caller::loadLib(R\u0026#34;(.../libpureCppLib.so.1.0.0)\u0026#34;); #endif if(lib) { //[1] æŸ¥æ‰¾pureCppLibåŠ¨æ€åº“ä¸­çš„avgå‡½æ•°åœ°å€ void* func = dynamic_lib_caller::getFunctionAddr(lib,\u0026#34;avg\u0026#34;); if(func) { double value = -1; typedef int (*avgFuc)(int, int); // [2] è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆ avgFuc f = (avgFuc)(func); if(f) { value = f(6,15); // [3] è°ƒç”¨ dynamic_lib_caller::unloadLib(lib); } std::cout \u0026lt;\u0026lt; value; } } } int main(int argc, const char** argv) { #ifdef _MSC_VER SetConsoleOutputCP(CP_UTF8); SetConsoleCP(CP_UTF8); #endif int result = Catch::Session().run(argc, argv); return result; } åœ¨windowså’Œlinuxä¸‹æµ‹è¯•ï¼Œå‡½æ•°éƒ½æ­£å¸¸è¾“å‡º10, (6å’Œ15)çš„å¹³å‡å€¼\nå¦‚æ­¤ä¸€ä¸‹ï¼Œåªéœ€è¦ç®—æ³•ç»™å‡ºcé£æ ¼çš„æ¥å£ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨ä¸é“¾æ¥çš„æƒ…å†µä¸‹è°ƒç”¨äº†ã€‚\nç”šè‡³å¯ä»¥åœ¨æœ‰gccçš„ç¯å¢ƒï¼Œä½¿ç”¨å­—ç¬¦ä¸²å†™ä¸€ä¸ªc++çš„æ–¹æ³•ï¼Œç”¨å‘½ä»¤è¡Œè°ƒç”¨gccç¼–è¯‘ååŠ¨æ€çš„åŠ è½½åˆ°ç¨‹åºé‡Œç›´æ¥è°ƒç”¨ï¼Œè¾¾åˆ°ç±»ä¼¼è„šæœ¬çš„ç›®çš„\n", 
        "url": "\/post\/%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%8A%A8%E6%80%81%E5%BA%93%E5%8F%8A%E5%BA%93%E5%86%85c%E9%A3%8E%E6%A0%BC%E6%96%B9%E6%B3%95\/"
    },
    
    "\/tags\/qml\/": {
        "title": "Qml",
        "tags": [],
        "content": "", 
        "url": "\/tags\/qml\/"
    },
    
    "\/tags\/qt5\/": {
        "title": "Qt5",
        "tags": [],
        "content": "", 
        "url": "\/tags\/qt5\/"
    },
    
    "\/post\/qt5-cmake-qml%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5\/": {
        "title": "qt5-cmake-qmlå¤šè¯­è¨€å®è·µ",
        "tags": ["Qt5","CMake","Qml","Translator",],
        "content": "1. ç¼–ç  1.1 CMake 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # æ·»åŠ å¼•ç”¨Qtçš„åä¸ºLinguistToolsçš„component find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Core LinguistTools) find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Gui Widgets Quick Qml QuickControls2 LinguistTools) #å®šä¹‰éœ€è¦ç”Ÿæˆçš„.ts ,æ”¾åˆ°TS_FILESè¿™ä¸ªcmakeå˜é‡ä¸­ set(TS_FILES src/translations/zh_CN.ts src/translations/en_US.ts src/translations/ja_JP.ts ) #æ‰«æè¿™dv_app,dv_camera, dv_commonè¿™ä¸‰ä¸ªç›®å½•ï¼ŒæŠŠéœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²æ‰«æè¿›.tsæ–‡ä»¶ä¸­ qt5_create_translation(QM_FILES ${CMAKE_SOURCE_DIR}/dv_app ${CMAKE_SOURCE_DIR}/dv_camera ${CMAKE_SOURCE_DIR}/dv_common ${TS_FILES} ) #åœ¨ç”Ÿæˆ xxxå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼ŒæŠŠæ‰§è¡Œæ‰«æç”Ÿæˆ.ts ï¼Œå†æŠŠ.tsç”Ÿæˆ.qmç¿»è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ add_library(xxx SHARED ${TS_FILES} #è¿™ä¸€è¡Œåªæ˜¯ä¸ºäº†åœ¨qt creatorä¸­çœ‹åˆ°.tsæ–‡ä»¶ ${QM_FILES} ) #å¤åˆ¶ç¿»è¯‘æ–‡ä»¶.qmåˆ° ç”Ÿæˆç›®å½•çš„translationsæ–‡ä»¶å¤¹ add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy ${QM_FILES} $\u0026lt;TARGET_FILE_DIR:dv_common\u0026gt;/translations ) 1.2. c++ 1.2.1 ç®€å•å°è£…åŠ è½½qmç¿»è¯‘æ–‡ä»¶çš„é€»è¾‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 bool cpp_utility::load_language_qm(QString filePath) { try { std::shared_ptr\u0026lt;QTranslator\u0026gt; translator = prism::Container::get()-\u0026gt;resolve_object\u0026lt;QTranslator\u0026gt;(); if(!translator) { if(!QCoreApplication::removeTranslator(translator.get())) { std::shared_ptr\u0026lt;QTranslator\u0026gt; empty ; prism::Container::get()-\u0026gt;register_instance(empty); } else throw std::string(\u0026#34;å¸è½½å¤šè¯­è¨€ç¿»è¯‘å™¨å¤±è´¥\u0026#34;); } if(!filePath.isEmpty()) { std::shared_ptr\u0026lt;QTranslator\u0026gt; tr = std::make_shared\u0026lt;QTranslator\u0026gt;(); if(tr-\u0026gt;load(filePath)) { if(QCoreApplication::installTranslator(tr.get())) prism::Container::get()-\u0026gt;register_instance(tr); else throw std::string(\u0026#34;å®‰è£…å¤šè¯­è¨€ç¿»è¯‘å™¨å¤±è´¥\u0026#34;); } else throw std::string(\u0026#34;åŠ è½½å¤šè¯­è¨€æ–‡ä»¶å¤±è´¥:\u0026#34;) + filePath.toStdString(); } else { qInfo()\u0026lt;\u0026lt;\u0026#34;æ­£åœ¨å¸è½½éä¸­æ–‡çš„å¤šè¯­è¨€ç¿»è¯‘å™¨\u0026#34;; } //é€šçŸ¥qml engineï¼Œå¦‚æœæœ‰çš„è¯ std::shared_ptr\u0026lt;QQmlApplicationEngine\u0026gt; engine = Container::get()-\u0026gt;resolve_object\u0026lt;QQmlApplicationEngine\u0026gt;(); if(engine) engine-\u0026gt;retranslate(); } catch(std::string \u0026amp; mes) { qCritical()\u0026lt;\u0026lt; QString::fromStdString(mes); return false; } return true; } ä¸Šé¢è¿™ä¸ªc++æ–¹æ³•ï¼Œå³è¢«æ”¾åˆ°iocå®¹å™¨ä¸­ï¼Œåˆè¢«æ³¨å†Œåˆ°qml engineï¼Œæ‰€ä»¥c++å’Œqmlä¸­éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªqmçš„æ–‡ä»¶è·¯å¾„ï¼Œå°±å¯ä»¥åŠ è½½ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåé€šçŸ¥qml engineåˆ·æ–°ui ã€‚\né€šçŸ¥çš„è¿™æ®µé€»è¾‘éœ€è¦qtç‰ˆæœ¬è‡³å°‘qt 5.10\n1.3 è°ƒç”¨ ç¨‹åºåŠ è½½æ—¶ ç”¨æˆ·é€‰æ‹©åˆ‡æ¢è¯­è¨€æ—¶ 3.æ€ä¹ˆè®©é¡¹ç›®ä¸­çš„å­—ç¬¦ä¸²è¢«æ‰«æåˆ° .tsæ–‡ä»¶ä¸­ åœ¨qmlä¸­\n1 2 3 Text{ text: qsTr(\u0026#34;æƒ¨æƒ¨å­—å­—ï¼Œå°†è¢«æ‰«æåˆ°.tsæ–‡ä»¶ä¸­ï¼Œä»»äººç¿»è¯‘\u0026#34;) } åœ¨c++ä¸­\n1 qDebug() \u0026lt;\u0026lt; QObject::tr(\u0026#34;å‘å¾®å­—å­—ï¼Œå°†è¢«æ‰«æåˆ°.tsæ–‡ä»¶ä¸­ï¼Œä»»äººç¿»è¯‘\u0026#34;); 4. æ€ä¹ˆä½¿ç”¨qt å°å·¥å…·ç¿»è¯‘ æ²¡æœ‰ç¿»è¯‘å®Œï¼Œè½¯ä»¶ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ä¼šåœ¨åˆ‡æ¢è¯­è¨€æ—¶ï¼Œä¸ä¼šå˜æ›´ç›¸å…³çš„ç¿»è¯‘\nä¾‹å¦‚æœ‰ä¸€ä¸ªéœ€è¦ç¿»è¯‘çš„æ–‡å­—[\u0026ldquo;é»„æ»¨æ»¨\u0026rdquo;]ä¸­æ–‡ç¿»è¯‘ä¸º[\u0026ldquo;é“ä»”\u0026rdquo;]ï¼Œè‹±è¯­ç¿»è¯‘ä¸º[\u0026ldquo;huangbinbin\u0026rdquo;]å®Œäº†ï¼Œä½†æ˜¯æ—¥è¯­æ²¡æœ‰ç¿»è¯‘ï¼Œ\nè¿™æ—¶ä¸­æ–‡æƒ…å†µä¸‹æ˜¾ç¤º[\u0026ldquo;é“ä»”\u0026rdquo;]ï¼Œ\nåˆ‡æ¢è‹±æ–‡ååº”ä¼šæ˜¾ç¤º[\u0026ldquo;huangbinbin\u0026rdquo;]\nåˆ‡æ¢æ—¥è¯­åï¼Œç”±äº æ²¡æœ‰ç¿»è¯‘ï¼Œä¼šå¯¼è‡´ä»ç„¶æ˜¾ç¤º[\u0026ldquo;huangbinbin\u0026rdquo;]ï¼Œ\nå¹¶ä¸æ˜¯åƒä½ ç›´è§‰çš„é‚£æ ·ï¼Œä»ç„¶æ˜¾ç¤º[\u0026ldquo;é»„æ»¨æ»¨\u0026rdquo;]\n*. æ³¨æ„äº‹é¡¹ *.1 é¦–æ¬¡ç”Ÿæˆ .tsï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹è¯­è¨€ ç¬¬ä¸‰è¡Œä¸­ï¼Œ languageéœ€è¦æ­£ç¡®è®¾ç½®ä¸ºBCP 47è§„èŒƒä¸­çš„\u0026lt;å°å†™å›½å®¶\u0026gt;_\u0026lt;å¤§å†™åœ°åŒº\u0026gt;ï¼Œä¹‹åç”Ÿæˆçš„.qmæ–‡ä»¶ï¼Œæ‰èƒ½è¢«åŠ è½½åˆ°qt ç¨‹åºä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™.\nå¸¸ç”¨çš„è¯­è¨€\nè‹±è¯­ en_US ä¸­æ–‡ zh_CN æ—¥è¯­ ja_JP æ›´å¤šå‚é˜… Language Tags (BCP 47)\n", 
        "url": "\/post\/qt5-cmake-qml%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%B7%B5\/"
    },
    
    "\/tags\/translator\/": {
        "title": "Translator",
        "tags": [],
        "content": "", 
        "url": "\/tags\/translator\/"
    },
    
    "\/tags\/qt-creator\/": {
        "title": "Qt Creator",
        "tags": [],
        "content": "", 
        "url": "\/tags\/qt-creator\/"
    },
    
    "\/post\/ubuntu16.04%E7%BC%96%E8%AF%91qt5.15%E7%9A%84qt-creator\/": {
        "title": "ubuntu16.04ç¼–è¯‘qt5.15çš„qt creator",
        "tags": ["Qt5","Qt Creator",],
        "content": "1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå·±ç¼–è¯‘ ç›¸æœºè½¯ä»¶ ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„qt å¼€æºç‰ˆæœ¬ 5.15.2ï¼Œä»¥åŠcmakeï¼Œqmlæ¥ç»„ç»‡å·¥ç¨‹ï¼Œ\né‡åˆ°å‡ ä¸ªé—®é¢˜\n1.1 Qt5.15.2é¢„è£…çš„Qt Creatorä¸æ”¯æŒåœ¨Ubuntu16.04ç¯å¢ƒè¿è¡Œ qt 5.15.2é¢„è£…ç‰ˆæœ¬çš„qt creatoræ˜¯åœ¨ubuntu20ä¸‹ä½¿ç”¨qt 6å’Œgcc9ç¼–è¯‘çš„ï¼Œubuntu16.04 ä¸‹ä¸èƒ½ä½¿ç”¨ï¼Œæˆ‘æ›¾å°è¯•å‡çº§ubuntu16çš„libcï¼Œæœ€ç»ˆæŠŠubuntu16 ç¯å¢ƒæå´©æºƒï¼Œé‡å¯ä¹‹åå¾ˆå¤šç³»ç»Ÿè½¯ä»¶éƒ½ä¸èƒ½è¿è¡Œäº†ï¼Œaptå‡çº§ä¹Ÿå‡çº§ä¸äº†ï¼Œä¾èµ–æ ‘äº§ç”Ÿé—®é¢˜ã€‚é™¤éä½ æ·»åŠ 18æˆ–20çš„æºæ‰èƒ½æ­£ç¡®çš„å‡çº§ï¼Œæ‰€ä»¥ä¸å¾—ä¸é‡åšå¼€å‘ç¯å¢ƒï¼Œ å…ˆç”¨qt 5.12.6é¢„è£…çš„qt creator 4.10.2è¿›è¡Œå¼€å‘\n1.2 Qt Creator 4.10.2çš„é—®é¢˜ åŠ è½½Qt 5.15.2çš„qml æ§åˆ¶åº“ï¼Œå¾ˆå¤šè¯¯æŠ¥ï¼Œä¸ç®¡æ˜¯åœ¨cmakeè¿è¡Œï¼Œè¿˜æ˜¯IDEé‡Œçš„ä»£ç æç¤ºï¼Œéƒ½å¾ˆå¤šå™ªéŸ³\ncmake å­æ¨¡å—ä»£ç å˜æ›´åï¼Œ æ£€æµ‹ä¸åˆ°å˜æ›´ï¼Œåªèƒ½æ•´ä¸ªå·¥ç¨‹rebuildæ‰èƒ½æ­£å¸¸\ncmakeåŠŸèƒ½æ”¯æŒæ¯”è¾ƒç²—ç³™ï¼Œ è®¾ç½®cmakeæ¯”è¾ƒä¸æ–¹ä¾¿\ncmakeå¾ªç¯ä¾èµ–é—®é¢˜(åœ¨æ–°çš„ç‰ˆæœ¬ä¸Šä¸æ˜¯é—®é¢˜)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 CMake Warning at CMakeLists.txt:176 (add_executable): Cannot generate a safe runtime search path for target tst_dv_camera because there is a cycle in the constraint graph: dir 0 is [/home/deepvision/source/repos/dv_app_solution/build-dv_camera-Desktop_Qt_5_15_2_GCC_64bit-Debug] dir 4 must precede it due to runtime library [libdv_zlog.so] dir 5 must precede it due to runtime library [libdv_zlog.so] dir 1 is [/home/deepvision/source/repos/dv_app_solution/vcpkg_installed/x64-linux-dynamic/debug/lib] dir 2 must precede it due to runtime library [librc_genicam_api.so.2.6] dir 4 must precede it due to runtime library [libdv_zlog.so] dir 5 must precede it due to runtime library [libdv_zlog.so] dir 2 is [/home/deepvision/source/repos/dv_app_solution/vcpkg_installed/x64-linux-dynamic/lib] dir 0 must precede it due to runtime library [libdv_camera.so] dir 1 must precede it due to runtime library [libminizip.so] dir 4 must precede it due to runtime library [libdv_zlog.so] dir 3 is [/home/deepvision/Qt/5.15.2/gcc_64/lib] dir 4 is [/home/deepvision/source/repos/zlog/lib/linux] dir 5 must precede it due to runtime library [libdv_zlog.so] dir 5 is [/home/deepvision/source/repos/dv_app_solution/vcpkg_installed/x64-linux-dynamic/share/zlog/../../lib] dir 0 must precede it due to runtime library [libdv_camera.so] dir 1 must precede it due to runtime library [libminizip.so] dir 4 must precede it due to runtime library [libdv_zlog.so] 1.3 å°è¯•è¿‡çš„å…¶ä»–è§£å†³æ–¹æ³• æˆ‘åˆ°github releaseä¸‹è½½äº†å¤šä¸ªqt creatorçš„ç‰ˆæœ¬ï¼Œå‘ç°å³ä½¿æ˜¯qt creator 4.15ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯ä¾èµ–äº†libc 2.29ï¼ˆå¥‡æ€ªçš„æ˜¯æœ€æ–°ç‰ˆçš„qt creaotråªä¾èµ–äº†libc 2.28ï¼‰ï¼Œ è¿œè¶…å‡ºubuntu16 çš„2.23\nå¯ä»¥ç”¨è¿™æ¡æŒ‡ä»¤æŸ¥çœ‹libcçš„ç‰ˆæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 deepvision@ubuntu:/$ strings /lib/x86_64-linux-gnu/libc.so.6 |grep GLIBC GLIBC_2.2.5 GLIBC_2.2.6 GLIBC_2.3 GLIBC_2.3.2 GLIBC_2.3.3 GLIBC_2.3.4 GLIBC_2.4 GLIBC_2.5 GLIBC_2.6 GLIBC_2.7 GLIBC_2.8 GLIBC_2.9 GLIBC_2.10 GLIBC_2.11 GLIBC_2.12 GLIBC_2.13 GLIBC_2.14 GLIBC_2.15 GLIBC_2.16 GLIBC_2.17 GLIBC_2.18 GLIBC_2.22 GLIBC_2.23 GLIBC_PRIVATE GNU C Library (Ubuntu GLIBC 2.23-0ubuntu11.3) stable release version 2.23, by Roland McGrath et al. æˆ‘ä¹Ÿè¯•è¿‡å•ç‹¬ä¸ºqt creatorç¼–è¯‘é«˜ç‰ˆæœ¬çš„libcï¼Œæ”¾åœ¨å•ç‹¬çš„ç›®å½•ï¼Œç»“æœå‘ç°ï¼Œubunt16.04ä¸‹ï¼Œæœ€å¤šåªèƒ½è°ƒç”¨libc 2.27çš„ç‰ˆæœ¬ä¿è¯ä¸ä¼šå´©æºƒï¼Œ ä¸€æ—¦è°ƒç”¨äº†2.28æˆ–2.29å°±ä¼šå´©æºƒ\nlibc å¯ä»¥é€šç”¨è¿™ä¸ªè„šæœ¬ç¼–è¯‘,è®°å½•ä¸€ä¸‹ï¼Œå¦‚æœå°†æ¥æœ‰éœ€è¦ç”¨åˆ°çš„è¯\n1 2 3 4 5 6 7 8 9 10 #!bash cd /home/deepvision/lib/ wget http://ftp.gnu.org/gnu/glibc/glibc-2.29.tar.gz tar zxvf glibc-2.29.tar.gz cd glibc-2.29 mkdir build cd build ../configure --prefix=/opt/glibc-2.29 make sudo make install ç”±äºä»¥ä¸Šå‡ ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥å†³å®šè‡ªå·±ç¼–è¯‘qt creator\n2 ç¼–è¯‘ ç”±äºæˆ‘è™šæ‹Ÿæœºç©ºé—´ä¸è¶³ï¼Œæˆ‘åæ¥å¸è½½æ‰äº†qt 6ï¼Œæ‰€ä»¥æŸ¥çœ‹qt creatoræºç åï¼Œæˆ‘ä½¿ç”¨qt 5ç¼–è¯‘çš„æœ€åä¸€ä¸ªç‰ˆæœ¬qt creator 8.\nå‚ç…§readme è¿›è¡Œç¼–è¯‘ï¼Œ è®°å½•ä¸€ä¸‹ç¼–è¯‘ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ­¥éª¤\nqt creator æœ€æ–°ç‰ˆæœ¬ç›®å‰æ˜¯qt creator 12,ä½†å…¶å®8å·²ç»ç®—æ˜¯å¾ˆæ–°çš„ç‰ˆæœ¬äº†\næˆ‘æŸ¥çœ‹2022å¹´3æœˆä»½æ—¶æˆ‘æ‹‰å–çš„qt creatorä»£ç ï¼Œé‚£æ—¶æœ€æ–°çš„å¼€å‘åˆ†æ”¯æ‰7 beta\næ‰€ä»¥8ä¹Ÿç®—æ˜¯æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬\n2.1 ç¼–è¯‘LLVM 2.1.1 æ­£å¸¸æµç¨‹ å…‹éš†ä»£ç \n1 git clone -b release_130-based --recursive https://code.qt.io/clang/llvm-project.git åˆ›å»ºç›®å½•\ncmakeç”Ÿæˆ\n1 2 3 4 5 6 cmake \\ -D CMAKE_BUILD_TYPE=Release \\ -D LLVM_ENABLE_RTTI=ON \\ -D LLVM_ENABLE_PROJECTS=\u0026#34;clang;clang-tools-extra\u0026#34; \\ -D CMAKE_INSTALL_PREFIX= è‡ªå·±æŒ‡å®šå®‰è£…ç›®å½• \\ ../llvm-project/llvm æ„å»º\n1 cmake --build . --target install 2.2.2 cmakeå¤±è´¥é—®é¢˜è§£å†³ 2.2.2.1 libxml2 æ‰¾ä¸åˆ° sudo apt install dev-libxml2 å®‰è£…\ncmakeç”Ÿæˆä¸­åŠ å…¥å‚æ•° -D CMAKE_PREFIX_PATH=\u0026quot;/usr/\u0026quot;\n1 2 3 4 5 6 7 cmake \\ -D CMAKE_BUILD_TYPE=Release \\ -D LLVM_ENABLE_RTTI=ON \\ -D LLVM_ENABLE_PROJECTS=\u0026#34;clang;clang-tools-extra\u0026#34; \\ -D CMAKE_INSTALL_PREFIX= \u0026#34;è‡ªå·±æŒ‡å®šå®‰è£…ç›®å½•ï¼Œåé¢qt creatoræ‰§è¡Œcmakeæ—¶ä¼šç”¨åˆ°\u0026#34; \\ -D CMAKE_PREFIX_PATH=\u0026#34;/usr/\u0026#34; ../llvm-project/llvm 2.2.2.1 config.guess: 71: Syntax error: word unexpected (expecting \u0026ldquo;in\u0026rdquo;) å‚ç…§ llvm github issue\nconfig.guess Syntax error: Â· Issue #52740 Â· llvm/llvm-project (github.com)\nåº”è¯¥config.guessæ–‡ä»¶æ ¼å¼é—®é¢˜ï¼Œå‡†ç¡®è¯´æ˜¯æ¢è¡Œç¬¦é—®é¢˜\nå› ä¸ºæˆ‘åœ¨windowsä¸Šæ‹‰äº†ä»£ç åï¼Œä¸Šä¼ åˆ°å…¬å¸ftpæœåŠ¡å™¨ä¸Šï¼Œå†åœ¨linuxä¸‹è½½ä»£ç å¯¼è‡´çš„é—®é¢˜\nå¦‚æœç›´æ¥åœ¨linuxæ‹‰ä»£ç åº”è¯¥ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜\nè§£å†³æ–¹æ³• ä¹Ÿç®€å•ï¼Œissueä¸­æåˆ°ä½¿ç”¨dos2unix å¯¹è¿™ä¸ªé…ç½®æ–‡ä»¶æ ¼å¼åŒ–æˆunixçš„æ¢è¡Œç¬¦\n1 2 sudo apt install dos2unix doc2unux path/to/config.guess 2.2.2.2 å…¶ä»–æ³¨æ„äº‹é¡¹ llvmç¼–è¯‘ä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´å’Œå†…å­˜ï¼Œæå‰å‡†å¤‡å¥½é˜²æ­¢ç¼–è¯‘å¤±è´¥è¦é‡æ–°ç¼–è¯‘\n2.2 ç¼–è¯‘qt creator å…‹éš†æºç ååˆ‡æ¢åˆ°ä½ æƒ³è¦ç¼–è¯‘çš„åˆ†æ”¯\nä¾‹å¦‚æˆ‘æƒ³ç”¨qt 5 ç¼–è¯‘v8.0.2 (æœ€åä¸€ä¸ªqt5ç¼–è¯‘çš„qt creaotrç‰ˆæœ¬)\nåˆ›å»º buildæ–‡ä»¶å¤¹ï¼Œè¿›å…¥æ–‡ä»¶å¤¹ç”Ÿæˆcmake\n1 cmake -DCMAKE_BUILD_TYPE=Debug -G Ninja \u0026#34;-DCMAKE_PREFIX_PATH=/home/deepvision/Qt/5.15.2/gcc_64;../../llvm/install\u0026#34; ../qt-creator æ‰§è¡Œç¼–è¯‘\n1 cmake --build . æ‰§è¡Œå®‰è£…\n1 cmake --install . --prefix ../ubuntu16.04-qtcerator8.0.2 ç„¶åä¿®æ”¹qt creatorçš„å¯åŠ¨è„šæœ¬ï¼Œåœ¨è„šæœ¬åé¢å¯¼è‡´ ld_library_pathå˜é‡ä¹‹å‰ï¼ŒæŠŠqt 5çš„è·¯å¾„åŠ è¿›å»\n1 2 LD_LIBRARY_PATH=/home/deepvision/Qt/5.15.2/gcc_64/lib:$LD_LIBRARY_PATH} export LD_LIBRARY_PATH å°±å¯ä»¥ç”¨qtcreator.shå¯åŠ¨ç¨‹åºäº†\nå¦‚æœç”¨åœ¨çº¿å®‰è£…å™¨å®‰è£…äº†qt 5.15ä¼šæœ‰ ~/.local/share/applications/org.qt-project.qtcreator.desktopé…ç½®ï¼Œä¿®æ”¹ä¸ºåˆšæ‰ä¿®æ”¹å¥½çš„å¯åŠ¨è„šæœ¬å°±å¯ä»¥ä»èœå•æˆ–ä»»åŠ¡æ æ‰“å¼€ç¼–è¯‘å¥½çš„qt creatoräº†\n1 2 3 4 5 6 7 8 9 10 11 deepvision@ubuntu:~$ cat ~/.local/share/applications/org.qt-project.qtcreator.desktop [Desktop Entry] Type=Applicatio Exec=\u0026#34;/home/deepvision/source/repos/qtcreator/ubuntu16.04-qtcerator8.0.2/bin/qtcreator.sh\u0026#34; Name=Qt Creator GenericName=The IDE of choice for Qt development. Icon=QtProject-qtcreator StartupWMClass=qtcreator Terminal=false Categories=Development;IDE;Qt; MimeType=text/x-c++src;text/x-c++hdr;text/x-xsrc;application/x-designer;application/vnd.qt.qmakeprofile;application/vnd.qt.xml.resource;text/x-qml;text/x-qt.qml;text/x-qt.qbs; 3 è§£å†³çš„é—®é¢˜éªŒè¯ å·¦è¾¹æ˜¯qt creator8 å³è¾¹æ˜¯qt creator 4.10\nqml å’Œcmakeéƒ½ä¸è¯¯æŠ¥äº†\nqt creator8å·²ä¸Šä¼ åˆ°dv-rd\n", 
        "url": "\/post\/ubuntu16.04%E7%BC%96%E8%AF%91qt5.15%E7%9A%84qt-creator\/"
    },
    
    "\/tags\/asset\/": {
        "title": "Asset",
        "tags": [],
        "content": "", 
        "url": "\/tags\/asset\/"
    },
    
    "\/tags\/binaries\/": {
        "title": "Binaries",
        "tags": [],
        "content": "", 
        "url": "\/tags\/binaries\/"
    },
    
    "\/post\/vcpkg%E8%B5%84%E4%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%93%E5%AD%98\/": {
        "title": "vcpkgèµ„äº§ç¼“å­˜ä¸äºŒè¿›åˆ¶ç¼“å­˜",
        "tags": ["VCPKG","Asset","Binaries",],
        "content": "0x01 èƒŒæ™¯ ç¿»å¢™ç”¨äº†ä¸€æ®µæ—¶é—´çš„vcpkgäº†ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨vcpkgå®‰è£…ç®¡ç†äº†ä¸€ä¼—å¼€æºæ¡†æ¶\nrange-v3 catch2 boost fmt opencv4 ä½“éªŒæ„Ÿå¾ˆå¥½ï¼Œé™¤äº†ä¸¤ä¸ªé—®é¢˜ç‚¹\néœ€è¦ç¿»å¢™æ‰èƒ½å®‰è£…ä¾èµ– å°±ç®—å…¶ä»–åŒäº‹ä¹Ÿç¿»å¢™ä½¿ç”¨vcpkgï¼Œé‚£ä¸Šé¢çš„åº“ä»–éœ€è¦ä»å…‹éš†ä»£ç ï¼Œä¸‹è½½äºŒè¿›åˆ¶ï¼Œç¼–è¯‘ï¼Œé‡æ–°æ¥ä¸€æ¬¡ï¼Œå¾ˆè€—æ—¶ äºæ˜¯å›´ç»•è¿™ä¸¤ä¸ªé—®é¢˜æŒ–æ˜msdnæ–‡æ¡£ï¼Œç”¨è¿™ä¸ªmarkdownè®°å½•æ¢ç´¢è¿‡ç¨‹\n0x02 å‘ ä¸ºäº†è§£å†³ç¬¬1ä¸ªé—®é¢˜ï¼Œæˆ‘æŠŠè¿™å‡ ä¸ªåº“ï¼Œä»¥åŠvcpkgæœ¬èº«ï¼Œä»githubä¸Šè¿ç§»åˆ°å…¬å¸å†…ç½‘çš„forgejoæœåŠ¡å™¨ä¸Šï¼Œç„¶åå°è¯•ä¿®æ”¹vcpkgä¸­ï¼ŒåŒ…çš„é…ç½®ï¼Œè¯•å›¾è®©vcpkgæ”¹ä¸ºä»å…¬å¸å†…ç½‘ä¸‹è½½ä»£ç ã€‚åƒcatch2, fmt, range-v3è¿™å‡ ä¸ªåº“ï¼Œç»“æ„æ¯”è¾ƒç®€å•ï¼Œç”¨è¿™ç§æ–¹å¼ç¡®å®æˆåŠŸäº†ï¼Œå·¥ä½œé‡ä¹Ÿä¸å¤§ï¼Œç»´æŠ¤ä¹Ÿç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹vcpkgæºç ä¸­è¿™å‡ ä¸ªåº“çš„urlï¼Œä»githubæ”¹ä¸ºå…¬å¸çš„forgejoè·¯å¾„å°±è¡Œäº†ã€‚ä½†æ˜¯å½“æˆ‘åœ¨å¤„ç†opencv4å’Œboostçš„æ—¶å€™ï¼Œæˆ‘å‘ç°å…‰æ˜¯boostå°±æœ‰ä¸€ç™¾å…«åå‡ ä¸ªgit submodule ï¼Œ ä¸è¿‡è¿™è¿˜ä¸è¶³ä»¥è®©æˆ‘æ¨ç¿»è¿™ä¸ªæ–¹æ³•ï¼Œ å› ä¸ºæˆ‘è§‰å¾—å¯ä»¥é€šè¿‡è„šæœ¬+ forgejo çš„apiæœåŠ¡+ access tokenå°±èƒ½ç”¨è„šæœ¬æ‰¹é‡çš„åˆ›å»ºåº“å­˜ï¼Œä¸Šä¼ ä»£ç ã€‚ ç›´åˆ°æˆ‘å°è¯•ä¿®æ”¹opencvçš„vcpkgä¸­çš„é…ç½®ï¼Œæˆ‘å‘ç°è¿™äº›è¶…å¤§è§„æ¨¡çš„å¤§å‹å¼€æºåº“ï¼Œå¹¶ä¸åªæ˜¯ç”¨git cloneæ‹‰å–ç¼–è¯‘æ‰€éœ€è¦çš„ä¾èµ–ï¼Œæœ‰çš„æ˜¯é€šè¿‡httpä¸‹è½½taråŒ…ï¼ŒzipåŒ…ã€‚å¹¶ä¸”æœ‰æ—¶å€™å¹¶ä¸æ˜¯opencv4è¿™ç§é¡¶å±‚é¡¹ç›®ä¸‹è½½çš„ï¼Œè€Œæ˜¯å®ƒçš„å­æ¨¡å—ï¼Œæˆ–å­æ¨¡å—çš„æ¨¡å—ä¸‹è½½çš„ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿æŠŠæºç éƒ½è¿ç§»åˆ°å†…ç½‘çš„forgejoä¸Šäº†ï¼Œä»ç„¶ä¼šæœ‰ä¸€äº›äºŒè¿›åˆ¶çš„åŒ…ï¼Œæ²¡æœ‰åœ¨å†…ç½‘ä¹‹ä¸­ã€‚ æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆè¡Œä¸é€š\n0x03 æœ€ç»ˆè§£ åœ¨msdnä¸ŠæŠŠvcpkgç›¸å…³çš„æ–‡æ¡£ç²¾è¯»äº†ä¸€ä¸‹ï¼Œæˆ‘å‘ç°vcpkgä¸ç®¡æ˜¯ä¸‹è½½çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯ç¼–è¯‘çš„æ–‡ä»¶ï¼Œéƒ½å¯ä»¥ç¼“å­˜ ï¼Œè€Œä¸”å¯ä»¥åœ¨ç½‘ç»œä½ç½®ä¸Šå…±äº«ã€‚æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼ŒæŠŠä¸¤å°ç”µè„‘è®¾ç½®äº†åŒæ ·çš„ç½‘ç»œä½ç½®çš„ç¼“å­˜ç›®å½•ï¼Œåœ¨ä¸€å°ç”µè„‘ä¸Šç¿»å¢™ï¼Œç¼–è¯‘boost1.83.0å’Œopencv4.5.5ï¼Œåœ¨å¦ä¸€å°ç”µè„‘ä¸Šï¼Œç¡®å®ä¸ç¿»å¢™çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ç”¨vcpkgå®‰è£…boost 1.83.0ä»¥åŠopencv 4.5.5ï¼Œä¸éœ€è¦é‡æ–°ä»githubä¸‹è½½ï¼Œã€‚å½“ç„¶è¿˜æ˜¯éœ€è¦ä»ç½‘ç»œä½ç½®ä¸‹è½½çš„ï¼Œç¼“å­˜å‡ ç™¾å…†çš„äºŒè¿›åˆ¶æ–‡ä»¶å¦‚æœä¸æ˜¯åœ¨æ­å·ï¼Œä¸‹è½½ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ï¼Œä½†ç›¸å¯¹æ¥è¯´å¿«äº†ä¸å°‘ã€‚\nä¸‹é¢è¯´è¯´æ€ä¹ˆé…ç½®\n1.ç ”å‘çš„nasç›®å½• dv-rdä¸­åˆ›å»ºç¼“å­˜ç›®å½• vcpkg_asset_cacheç”¨äºç¼“å­˜å®‰è£…è¿‡ç¨‹ä¸­ä¸‹è½½äºŒè¿›åˆ¶\nvcpkg_binary_cache ç”¨äºç¼“å­˜ç¼–è¯‘æ—¶ç”Ÿæˆçš„äºŒè¿›åˆ¶åŒ…\n2.é…ç½®ç¯å¢ƒå˜é‡ï¼Œå‘Šè¯‰vcpkgä»è¿™ä¸¤ç›®å½•è¯»å†™ç¼“å­˜ windows:\nVCPKG_BINARY_SOURCES clear;files,Z:/sw/vcpkg_binary_cache/,readwrite\nX_VCPKG_ASSET_SOURCES clear;x-azurl,file://Z:/sw/vcpkg_asset_cache/,,readwrite\nlinux:ç”±äºåŒåŠæ³•æƒ³windowsä¸€æ ·æŠŠç½‘ç»œä½ç½®æ˜ å°„æˆä¸ºç£ç›˜ï¼Œæ‰€ä»¥ç”¨nfsæŒ‚è½½çš„æ–¹å¼\n1 mount -t nfs 10.2.1.11:/data/syncthing_data /xxxx/xxx 1 2 export X_VCPKG_ASSET_SOURCES=\u0026#34;clear;x-azurl,file:/nfs/vcpkg_cache/vcpkg_cache_linux/asset/,,readwrite\u0026#34; export VCPKG_BINARY_SOURCES=\u0026#34;clear;files,/nfs/vcpkg_cache/vcpkg_cache_linux/binary/,readwrite\u0026#34; è¿™é‡Œä¹Ÿå¯ä»¥é…ç½®ç½‘ç»œä½ç½®åªè¯»ï¼ŒåŠ ä¸€ä¸ªæœ¬åœ°è·¯å¾„è¯»å†™ï¼Œæˆ‘ç”µè„‘ç©ºé—´æ¯”è¾ƒç´§å¼ ï¼Œå°±åªé…ç½®äº†è¿œç¨‹çš„äº†ã€‚\nç„¶åä½¿ç”¨vcpkgå®‰è£…çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨ä»è¿™é‡Œé¢æ‰¾ç¼“å­˜äº†ã€‚å¦‚æœæ²¡æœ‰çš„ç¼“å­˜ï¼Œåªéœ€è¦åœ¨ç¿»å¢™çš„ç”µè„‘ä¸Šç”¨vcpkgå®‰è£…ä¸€ä¸‹ï¼Œå°±ä¼šè‡ªåŠ¨ä¸Šä¼ äº†ã€‚\n", 
        "url": "\/post\/vcpkg%E8%B5%84%E4%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%93%E5%AD%98\/"
    },
    
    "\/post\/%E5%88%9B%E5%BB%BAvcpkg%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93\/": {
        "title": "åˆ›å»ºvcpkgç§æœ‰ä»“åº“",
        "tags": ["CMake","VCPKG",],
        "content": "0.å‰è¨€ â€‹ æœ€è¿‘åœ¨åšå…¬å¸ä¸€ä¸ªæ–°çš„å·¥ç¨‹ï¼Œå¯¹æ ‡æµ·åº·çš„MVS, åŸºäºGENICAMé€šç”¨åè®®ï¼Œç›®æ ‡æ˜¯é€‚é…å¸‚åœºä¸Šä¼—å¤šçš„å‚ç‰Œçš„åŸºäºGENICAMåè®®çš„ç›¸æœºã€‚ ç”±äºé¢„è®¡åˆ°ä¼šå¼•ç”¨å¾ˆå¤šå¼€æºé¡¹ç›®ï¼Œä¸”ä¼šå›´ç»•ç›¸æœºæ‰©å±•å¾ˆå¤šå…¬å¸çš„ä¸šåŠ¡åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘é‡æ–°è®¾è®¡äº†æ–°è½¯ä»¶æ€»ä½“çš„æ¶æ„ï¼Œç”±åŸæ¥çš„qmakeæ”¹ä¸ºcmakeï¼Œå¹¶ä½¿ç”¨æ’ä»¶å¼å¼€å‘ã€‚è¿™å³æ–¹ä¾¿äºå¼•ç”¨å…¶ä»–å¼€æºæ¡†æ¶ï¼Œä¹Ÿå¯ä»¥ä½¿å…¬å¸çš„ä»£ç æ¨¡å—åŒ–ï¼Œæ›´å®¹æ˜“ç»´æŠ¤ä»¥åŠå¤ç”¨ã€‚ä½†åœ¨ä¼—å¤šå¼€æºæ¨¡å—ä¸å…¬å¸çš„æ¨¡å—ï¼Œä»¥åŠå…¬å¸çš„ä¸åŒçš„é¡¹ç›®ä¹‹é—´è¦å¦‚ä½•å¤„ç†ä¾èµ–å…³ç³»ï¼Ÿå¦‚ä½•ç§‘å­¦çš„å‡å°‘é‡å¤çš„å·¥ä½œï¼Ÿæ»¡åœ°éƒ½æ˜¯cmake + git submoduleï¼Œæˆ‘æŠ¬å¤´å´çœ‹åˆ°äº†vcpkgç§æœ‰ä»“åº“ã€‚\n1.éšä¾¿èŠèŠ 1.1 åŒ…ç®¡ç†å™¨ â€‹ pythonæœ‰pipï¼Œ c#æœ‰nuget ï¼Œ javaæœ‰mavenï¼Œ åŸºæœ¬ä¸Šæ¯ä¸€ä¸ªè¯­è¨€éƒ½æœ‰ä¸€ä¸ªäº²å¦ˆèƒŒä¹¦çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥é€’å½’è§£å†³é¡¹ç›®ä¾èµ–ï¼Œä½†æ˜¯c++æ²¡æœ‰ã€‚\nè¯­è¨€ç‰¹æ€§å¤ªå¤æ‚ï¼Œ ç¼–è¯‘é€‰é¡¹ä¸ä¸€æ ·ï¼ŒåŒæ ·çš„ä»£ç ç”Ÿæˆçš„ç¨‹åºå°±å¯èƒ½ä¸èƒ½ä¸€èµ·å·¥ä½œ æ¨¡å—å…ƒç¼–ç¨‹åªèƒ½ä»¥æºç æ–¹å¼å‘å¸ƒï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶ ABIå…¼å®¹æ€§é—®é¢˜å¯¼è‡´éœ€è¦æ ¹æ®cpuæ¶æ„å‘å¸ƒä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶ç‰ˆæœ¬ â€‹ åŸºäºä¸Šé¢çš„é—®é¢˜ä»¥åŠç­‰ç­‰ï¼Œå¯¼è‡´c++çš„åŒ…ç®¡ç†ä¸å¥½å®ç°ï¼Œé•¿ä¹…ä»¥æ¥ï¼Œc++å¼€å‘è€…å¦‚æœéœ€è¦é‡‡ç”¨å…¶ä»–å¼€æºé¡¹ç›®ï¼Œé€šå¸¸éœ€è¦æ‰‹åŠ¨æŠŠ å…¶ä»–c++é¡¹ç›®çš„æºç ï¼Œé™æ€é“¾æ¥åº“ï¼ŒåŠ¨æ€é“¾æ¥åº“é›†æˆåˆ°è‡ªå·±çš„é¡¹ç›®é‡Œï¼Œåœ¨é›†æˆçš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¸æ˜¯é¡ºåˆ©çš„ï¼Œå¯èƒ½éœ€è¦å¤„ç†ä¾èµ–å…³ç³»ï¼Œç¯å¢ƒé—®é¢˜ï¼Œç¼–è¯‘é€‰é¡¹é—®é¢˜ã€‚\n1.2 Cmake cmakeçš„å‡ºç°ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œ å®ƒæ˜¯ä¸€æ¬¾è·¨å¹³å°c++é¡¹ç›®çš„ç®¡å·¥å…·ï¼Œ å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠcmakeå·¥ç¨‹é›†æˆåˆ°å¦ä¸€ä¸ªcmakeå·¥ç¨‹ä¸­ï¼Œç„¶åæŒ‡å®šç”Ÿæˆå™¨ï¼Œç”Ÿæˆå„ç§ç±»å‹çš„æ„å»ºå·¥å…·çš„é¡¹ç›®ï¼Œå¦‚ninja,visual studio ç­‰ï¼Œï¼Œå¹¶ä¸”å®ƒå¯ä»¥æšä¸¾é¡¹ç›®çš„ä¾èµ–é¡¹ç›®ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶çš„èƒ½åŠ›ï¼Œæ‰€ä»¥é€šå¸¸ä¸gitè”åˆä½¿ç”¨ ã€‚ ç›®å‰åŸºæœ¬ä¸»æµçš„IDEéƒ½é›†æˆäº†cmakeå’Œgitï¼Œå¹¶ä¸”c++å¼€æºé¡¹ç›®å¤§å¤šæ•°ä¹Ÿæ˜¯ä»¥cmakeçš„æ–¹å¼ç»„ç»‡å·¥ç¨‹ï¼Œå› æ­¤ä½¿ç”¨cmake+gitå¯ä»¥æ–¹ä¾¿çš„é›†æˆå¼€æºé¡¹ç›®ã€‚è¿™ä¹Ÿæ˜¯æˆ‘æƒ³ç”¨cmakeçš„åŸå› ä¹‹ä¸€ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåªè¦é¡¹ç›®æ²¡æœ‰ç›¸äº’ä¾èµ–ï¼Œä¸ç®¡æ‰€å¤„ä½•ç›®å½•ç»“ç‚¹ï¼Œcmakeéƒ½æ”¯æŒå¹¶è¡Œæ„å»ºï¼ˆqmkaeå­ç›®å½•æ„å»ºå®Œæ‰ä¼šæ„å»ºçˆ¶ç›®å½•ï¼‰ï¼Œå¯ä»¥æ›´å¥½çš„åˆ©ç”¨å¤šæ ¸è®¡ç®—æœºçš„æ€§èƒ½ã€‚æ‰€ä»¥cmakeå·²ç»è¶³å¤Ÿå¥½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦vcpkg?\nâ€‹ æƒ³åƒä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªå·¨å¤§çš„é¡¹ç›®ï¼Œä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœè¯´é¡¶å±‚é¡¹ç›®æ˜¯ç¬¬0å±‚ï¼ŒæŸä¸ªç¬¬1å±‚çš„é¡¹ç›®Aä¾èµ–äº†å¼€æºåº“Dï¼Œå¦ä¸€ä¸ªç¬¬1å±‚çš„é¡¹ç›®Bçš„ç¬¬2å±‚é¡¹ç›®BAä¹Ÿä¾èµ–äº†é¡¹ç›®Dï¼Œ ä½ å¦‚æœä¸ä¿®æ”¹ä¼˜åŒ–å·¥ç¨‹ç»“æ„ï¼Œä½ çš„é¡¹ç›®ç›®å½•é‡Œå°†å­˜åœ¨ä¸¤ä»½Dçš„æºç ï¼Œå¹¶ä¸”å¦‚æœä¿®æ”¹äº†å…¶ä¸­ä¸€ä»½Dçš„ä»£ç ï¼Œéœ€è¦æŠŠå®ƒæäº¤ç»™ä»–çš„çˆ¶é¡¹ç›®ä»¬ï¼Œç›´åˆ°ç¬¬0å±‚ï¼Œç„¶åå†åˆ°å¦ä¸€ä»½Dä»£ç å¤„ï¼Œæ‹‰ä»£ç åï¼Œå†ä¸€å±‚ä¸€å±‚çš„æäº¤åˆ°ç¬¬0å±‚ã€‚è¿™æ ·åˆ«äººæ‹‰å–ä½ çš„ç¬¬0å±‚ä»£ç æ—¶ï¼Œæ‰èƒ½ç®€å•çš„git submodule update --init --recursiveï¼Œå…‹éš†ä¸‹æ¥ã€‚è€Œé¡¹ç›®ä¸­å¯èƒ½ä¼šå‡ºç°å¤šä¸ªDé¡¹ç›®è¿™æ ·çš„å­˜åœ¨ï¼Œè¿™æ„å‘³ç€å³ä½¿ä½¿ç”¨git submoduleï¼Œä¹Ÿéœ€è¦åšå¾ˆå¤šé‡å¤å·¥ä½œ ã€‚ è€Œvcpkgå¯ä»¥è§£å†³è¿™ç§é—®é¢˜,ç”šè‡³å…è®¸æ§åˆ¶æ¯ä»½Dçš„ä»£ç ç‰ˆæœ¬ä¸ä¸€æ ·ã€‚\n1.3 vcpkg â€‹ vcpkgæ˜¯å¾®è½¯æ¨å‡ºçš„c++ æºç çº§åˆ«çš„è·¨å¹³å°åŒ…ç®¡ç†å™¨ã€‚è™½ç„¶vcå¼€å¤´ï¼Œä½†ä¸ä»…é™äºvisual c++ï¼Œ å®ƒåŸºæœ¬ä¸Š=git + cmake,ä½†æ‰©å±•äº†åŒ…ç®¡ç†å™¨åº”è¯¥æœ‰çš„åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿çš„è§£å†³é¡¹ç›®ä¾èµ–é—®é¢˜ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åˆ‡æ¢ä¾èµ–é¡¹ç›®çš„ABIï¼ŒCpuæ¶æ„ï¼Œç›®æ ‡å¹³å°ã€‚ vcpkgæœ‰ç»å…¸æ¨¡å¼å’Œæ¸…å•æ¨¡å¼ä¸¤ç§æ¨¡å¼ã€‚\nç»å…¸æ¨¡å¼\nå…è®¸å®‰è£…Dåˆ°ç³»çš„æŸä¸ªç›®å½•ï¼Œç„¶åæ‰€æœ‰å±‚çº§çš„é¡¹ç›®éƒ½å¼•ç”¨è¿™ä¸ª Dç›®å½•é‡Œçš„cmake module.\næ¸…å•æ¨¡å¼\nå…è®¸åœ¨æ¯ä¸ªå±‚çº§cmakelist.txtæ—è¾¹åˆ›å»ºä¸€ä¸ªvcpkg.jsoné…ç½®æ–‡ä»¶ï¼ŒæŠŠéœ€è¦çš„åŒ…é…ç½®åœ¨é‡Œé¢ï¼Œç„¶åæ‰§è¡Œ vcpkg install --recursive é€’å½’å®‰è£…ä¾èµ–åŒ…ã€‚\nå¯ä»¥çœ‹å‡º æ¸…å•æ¨¡å¼å¯ä»¥è§£å†³æˆ‘åœ¨1.2ç¬¬äºŒæ®µè½ä¸­æè¿°çš„é—®é¢˜ã€‚ä½†æ‹¿æ¥å°±ç”¨è¿˜æ˜¯æœ‰ä¸€äº›å±€é™æ€§ã€‚ä»¥ä¸‹ä¸¤ç§æƒ…å†µ\néœ€è¦é’ˆå¯¹æ€§ä¿®æ”¹æŸä¸ªé¡¹ç›®ä¸­æŸä¸ªvcpkgå®‰è£…çš„å¼€æºåº“ä¾èµ–ï¼Œç¼–è¯‘é€‰é¡¹æˆ–bugfixï¼Œä½†å…¶ä¸å¸Œæœ›ä»–é¡¹ç›®è¢«å½±å“ å¸Œæœ›æŠŠå…¬å¸çš„é¡¹ç›®éœ€è¦é›†æˆåˆ°vcpkgï¼Œäº«å—åŒ…ç®¡ç†å™¨å¸¦æ¥çš„ä¾¿åˆ©ï¼Œåˆä¸æƒ³å¼€æº ä½•ä»¥è§£å¿§ï¼Œå”¯æœ‰æ­å»ºè‡ªå·±çš„vcpkg ä»“åº“ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡æ¡£æƒ³è®²çš„å†…å®¹(ç»ˆäºé…é…¿å¥½æ°›å›´)\nâ€‹ é™¤æ­¤è¿™å¤–ï¼Œvcpkgç›¸å¯¹äºå…¬å¸ç°åœ¨çš„é¡¹ç›®ç®¡ç†ï¼Œè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯å‡å°‘äºŒè¿›åˆ¶æ–‡ä»¶çš„æäº¤ï¼Œç†è®ºä¸Šåªæäº¤æºç å°±è¡Œï¼Œinstallçš„æ—¶å€™ï¼Œvcpkgä¼šæ ¹æ®é…ç½® ä½¿ç”¨gitç­¾å‡ºæ­£ç¡®åˆ†æ”¯çš„æºç ï¼Œæ„å»ºä¸ºæœ¬åœ°çš„äºŒè¿›åˆ¶æ–‡ä»¶\n2. æ­å»ºå…¬å¸å†…ç§æœ‰vcpkgä»“åº“ â€‹ ç›®æ ‡æ˜¯æŠŠå¼€æºçš„é¡¹ç›®ï¼Œå¦‚open cvä¹‹ç±»çš„ ä»¥åŠå…¬å¸çš„è½¯ä»¶æ¨¡å—å‘å¸ƒåˆ°ç§æœ‰ä»“åº“ä¸Šã€‚ç†è®ºä¸Šï¼Œå¼€æºçš„åº“å¦‚æœæ²¡æœ‰é¢å¤–çš„ä¿®æ”¹ï¼Œç›´æ¥ç”¨vcpkgç°æœ‰çš„åº“å°±è¡Œäº†ï¼Œä½†å› ä¸ºæˆ‘ä»¬åœ¨å¢™å†…ï¼Œå¦‚æœæƒ³æå‡vcpkgå®‰è£…çš„é€Ÿåº¦ï¼Œ æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯æŠŠæˆ‘ä»¬é¡¹ç›®ä¸­ç”¨åˆ°çš„å¼€æºåº“è¿ç§»åˆ°å…¬å¸å†…éƒ¨gitå¹³å°ä¸Šï¼Œè®¾ç½®ä¸ºé•œåƒä»“åº“ï¼Œå®šæ—¶ä»githubåŒæ­¥ã€‚ å› æ­¤æœ¬å°èŠ‚ï¼Œä¸»è¦æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤\næ­å»ºvcpkg ç§æœ‰registry æŠŠé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¼€æºé¡¹ç›®åŒæ­¥åˆ°å…¬å¸git å¹³å°ä¸Š æŠŠå…¬å¸çš„git å¹³å°ä¸Šçš„reposç™»è®°åˆ°ç§æœ‰çš„vcpkg registry 2.1 æ­å»ºvcpkg ç§æœ‰ä»“åº“ å‚è€ƒ\nåˆ›å»ºä¸€ä¸ªç©ºçš„git repository\nmkdir -p ~/source/repos/prism_registry \u0026amp;\u0026amp; cd ~/source/repos/prism_registry git init . åˆ›å»ºä¸€ä¸ª*** baseline.json*** æ–‡ä»¶ï¼Œæ”¾åœ¨æ ¹ç›®å½• versionsç›®å½•\n1 2 mkdir versions \u0026amp;\u0026amp; cd versions vim baseline.json å†™å…¥ ä¸‹é¢çš„jsonå†…å®¹\n1 2 3 { \u0026#34;default\u0026#34;: {} } 2.2 æ·»åŠ åº“åˆ°vcpkgç§æœ‰ä»“åº“ è¿™é‡Œä¸»è¦æ¼”ç¤ºæ·»åŠ githubåº“ å’Œégithubåº“ä¸¤ç§æ–¹å¼\nè™½ç„¶æˆ‘ä»¬åº”è¯¥ä¸»è¦ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼\n2.2.1 æ·»åŠ githubä»“åº“ç¤ºä¾‹ ä¸ç®¡æƒ³æ·»åŠ åˆ°vcpkgä»“åº“çš„é¡¹ç›®æ˜¯ä¸æ˜¯æ¥è‡ªgithubï¼Œéƒ½éœ€è¦æ‰§è¡Œè¿™ä¸¤æ­¥\næ·»åŠ port æ·»åŠ version 2.2.1.1 æ·»åŠ port åˆ›å»ºportsç›®å½•ï¼Œåœ¨è¿™é‡Œé¢ç¼–è¾‘ä½ æƒ³æ”¾åˆ°ä½ vcpkgç§æœ‰ä»“åº“çš„ä¿¡æ¯\nä¾‹å¦‚æˆ‘æƒ³æŠŠæˆ‘çš„prism åº“æ”¾åˆ°ç§æœ‰åº“ï¼Œå°±åœ¨portsç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªprismçš„æ–‡ä»¶å¤¹\nprismæ˜¯ä¸€ä¸ªåªæœ‰å¤´æ–‡ä»¶ï¼Œä¸”åªä¾èµ–c++æ ‡å‡†åº“çš„ c++åº“\n1 mkdir -p ~/source/repos/prism_registry/ports/prism \u0026amp;\u0026amp; cd ~/source/repos/prism_registry/ports/prism ç„¶ååœ¨prismç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ vcpkg.json ï¼ŒæŠŠprismåˆå§‹ç‰ˆæœ¬çš„ä¿¡æ¯å†™è¿›å»ï¼Œå› ä¸ºæˆ‘è¿™ä¸ªåº“æ²¡æœ‰ä¾èµ–ï¼Œæ‰€ä»¥æ²¡æœ‰å†™ä¾èµ–é¡¹ï¼Œå¦‚æœæœ‰ï¼Œåœ¨jsoné‡ŒåŠ \u0026quot;dependencies \u0026ldquo;:[]å°±è¡Œ\n1 2 3 4 5 6 { \u0026#34;name\u0026#34;: \u0026#34;prism\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;a static reflect library of c++\u0026#34;, \u0026#34;homepage\u0026#34;: \u0026#34;https://github.com/nocanstillbb/prism\u0026#34; } åŒæ—¶æŠŠvcpkg.jsonä¹Ÿæäº¤åˆ°prismå­˜å‚¨åº“æ ¹ç›®å½•\nç„¶åå†åœ¨ ~/source/repos/prism_registry/ports/prism ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„protfile.cmake\nåšåˆ°è¿™ä¸€æ­¥ï¼Œä½ çš„æ–‡ä»¶ç›®å½•åº”è¯¥æ˜¯è¿™æ ·çš„\n../ prism_registry/ | .git/ | ports/ | | prism/ | | | protfile.cmake | | | vcpkg.json | versions/ | | baseline.json\næµ‹è¯•vcpkgèƒ½ä¸èƒ½æ­£å¸¸è¯†åˆ«è¿™ä¸ªjsonæ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ cd ~/source/repos/prism_registry/prism_registry $ vcpkg install prism --overlay-ports=ports/prism Computing installation plan... The following packages will be built and installed: prism:x64-windows -\u0026gt; 1.0.0 -- D:\\source\\repos\\prism_registry/ports/prism Detecting compiler hash for triplet x64-windows... Restored 0 package(s) from C:\\Users\\kokbi\\AppData\\Local\\vcpkg\\archives in 155 us. Use --debug to see more details. Installing 1/1 prism:x64-windows... Building prism:x64-windows... -- Installing port from location: D:\\source\\repos\\prism_registry/ports/prism CMake Error at scripts/ports.cmake:113 (message): Port is missing portfile: D:/source/repos/prism_registry/ports/prism/portfile.cmake error: building prism:x64-windows failed with: BUILD_FAILED Elapsed time to handle prism:x64-windows: 27 ms Please ensure you\u0026#39;re using the latest port files with `git pull` and `vcpkg update`. Then check for known issues at: https://github.com/microsoft/vcpkg/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+prism You can submit a new issue at: https://github.com/microsoft/vcpkg/issues/new?title=[prism]+Build+error\u0026amp;body=Copy+issue+body+from+D%3A%2Fsource%2Frepos%2Fvcpkg%2Finstalled%2Fvcpkg%2Fissue_body.md æ ¹æ®æ‰“å°å‡ºæ¥çš„ä¿¡æ¯ï¼Œå¯ä»¥çŸ¥é“vcpkgå®‰è£…æ—¶æ­£ç¡®å®šä½åˆ°port/prism/vcpkg.jsonäº†ï¼Œåªæ˜¯protfile.cmakeä¸­æ˜¯ç©ºçš„æ‰å¯¼è‡´å®‰è£…å¤±è´¥äº†\næ¥ä¸‹æ¥æ·»åŠ protfile.cmakeå†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 vcpkg_from_github( OUT_SOURCE_PATH SOURCE_PATH REPO nocanstillbb/prism REF e4cb55e02bfad354ba86d70f5555fe12d8f70d10 SHA512 a9eebc68ed045ccac650950b5ba8b1f172fde8244856c4b5e0ac38977711f5e3bbfc305ec831c47787e4994d7faff4ef01bf525e589b140dff8a66b10febb6e6 HEAD_REF master ) #https://learn.microsoft.com/en-us/vcpkg/examples/packaging-github-repos vcpkg_cmake_configure( SOURCE_PATH \u0026#34;${SOURCE_PATH}\u0026#34;) vcpkg_cmake_install() #vcpkg_cmake_config_fixup(CONFIG_PATH lib/cmake/${PORT}) #vcpkg_cmake_config_fixup() vcpkg_fixup_pkgconfig() vcpkg_copy_pdbs() file(REMOVE_RECURSE \u0026#34;${CURRENT_PACKAGES_DIR}/debug\u0026#34;) file( INSTALL \u0026#34;${SOURCE_PATH}/LICENSE\u0026#34; DESTINATION \u0026#34;${CURRENT_PACKAGES_DIR}/share/${PORT}\u0026#34; RENAME copyright) file( INSTALL \u0026#34;${SOURCE_PATH}/usage\u0026#34; DESTINATION \u0026#34;${CURRENT_PACKAGES_DIR}/share/${PORT}\u0026#34;) å…¶ä¸­çš„shar512æ˜¯ä¸‹è½½çš„æºç å½’æ¡£åŒ…çš„sha512æ ¡éªŒå’Œçš„å€¼ï¼Œå¯ä»¥è‡ªå·±ä¸‹è½½ä¸‹æ¥æ ¡éªŒï¼Œå¡«å†™è¿›å»ï¼Œä¹Ÿå¯ä»¥å…ˆå†™ä¸€ä¸ª0ï¼Œå®‰è£…æ—¶ä¼šå®‰è£…å¤±è´¥ï¼Œä½†ä¼šæŠŠçœŸæ­£çš„å€¼æ‰“å°å‡ºæ¥ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 $ vcpkg install prism --overlay-ports=ports/prism Computing installation plan... The following packages will be built and installed: prism:x64-windows -\u0026gt; 1.0.0 -- D:\\source\\repos\\prism_registry/ports/prism Detecting compiler hash for triplet x64-windows... -- Using HTTP(S)_PROXY in environment variables. Restored 0 package(s) from C:\\Users\\kokbi\\AppData\\Local\\vcpkg\\archives in 171 us. Use --debug to see more details. Installing 1/1 prism:x64-windows... Building prism:x64-windows... -- Installing port from location: D:\\source\\repos\\prism_registry/ports/prism -- Downloading https://github.com/nocanstillbb/prism/archive/59fc49ca76338364c6351475a4ad5d80578f625.tar.gz -\u0026gt; nocanstillbb-prism-59fc49ca76338364c6351475a4ad5d80578f625.tar.gz... [DEBUG] To include the environment variables in debug output, pass --debug-env [DEBUG] Trying to load bundleconfig from D:\\source\\repos\\vcpkg\\vcpkg-bundle.json [DEBUG] Failed to open: D:\\source\\repos\\vcpkg\\vcpkg-bundle.json [DEBUG] Bundle config: readonly=false, usegitregistry=false, embeddedsha=nullopt, deployment=Git, vsversion=nullopt [DEBUG] Metrics enabled. [DEBUG] Feature flag \u0026#39;binarycaching\u0026#39; unset [DEBUG] Feature flag \u0026#39;compilertracking\u0026#39; unset [DEBUG] Feature flag \u0026#39;registries\u0026#39; unset [DEBUG] Feature flag \u0026#39;versions\u0026#39; unset Downloading https://github.com/nocanstillbb/prism/archive/59fc49ca76338364c6351475a4ad5d80578f625.tar.gz [DEBUG] Trying to hash D:\\source\\repos\\vcpkg\\downloads\\nocanstillbb-prism-59fc49ca76338364c6351475a4ad5d80578f625.tar.gz.18080.part [DEBUG] D:\\source\\repos\\vcpkg\\downloads\\nocanstillbb-prism-59fc49ca76338364c6351475a4ad5d80578f625.tar.gz.18080.part has hash f03d4c918e5bda46cc1aa129edd192a74274b9c07f6634dedec47b986aad6e0e8689b019620c57507e07fea36adaf9dfbff9b41fcc166da5f0748a3a9d491529 error: Failed to download from mirror set error: File does not have the expected hash: url: https://github.com/nocanstillbb/prism/archive/59fc49ca76338364c6351475a4ad5d80578f625.tar.gz File: D:\\source\\repos\\vcpkg\\downloads\\nocanstillbb-prism-59fc49ca76338364c6351475a4ad5d80578f625.tar.gz.18080.part Expected hash: 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 Actual hash: f03d4c918e5bda46cc1aa129edd192a74274b9c07f6634dedec47b986aad6e0e8689b019620c57507e07fea36adaf9dfbff9b41fcc166da5f0748a3a9d491529 æŠŠActual hashå¤åˆ¶ä¸‹æ¥å†™åˆ°portfile.cmake é‡æ–°æµ‹è¯•å®‰è£…\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 $ vcpkg install prism --overlay-ports=ports/prism Computing installation plan... The following packages will be built and installed: prism:x64-windows -\u0026gt; 1.0.0 -- D:\\source\\repos\\prism_registry\\ports/prism Detecting compiler hash for triplet x64-windows... -- Using HTTP(S)_PROXY in environment variables. Restored 1 package(s) from C:\\Users\\kokbi\\AppData\\Local\\vcpkg\\archives in 44 ms. Use --debug to see more details. Installing 1/1 prism:x64-windows... Elapsed time to handle prism:x64-windows: 30.2 ms Total install time: 30.3 ms The package prism usage: find_package(prism::prism) target_include_directories(main INTERFACE ${PRISM_INCLUDE_DIRS}) more infomation: https://github.com/nocanstillbb/prism å¥½çš„é¡¹ç›®ï¼Œå®‰è£…åä¸ä¼šæç¤ºè­¦å‘Šå’Œé”™è¯¯ï¼Œå¦‚æœè¿™é‡Œæœ‰æç¤ºè­¦å‘Šçš„è¯ï¼Œå°±ä¼šæç¤ºä¸€ä¸ªé”™è¯¯ï¼Œæç¤ºä½ å¦‚æœè¦è®©åº“è¢«æ”¶å½•åˆ°vcpkgçš„ä¼˜é€‰ç›®å½•ï¼Œè¦æ›´æ­£portfile.cmakeæ¶ˆé™¤è¿™äº›é”™è¯¯å’Œè­¦å‘Šã€‚\næ­£å¸¸è¿™é‡Œè¿˜åº”è¯¥åœ¨å®‰è£…ä¹‹å‰æ‰§è¡Œä¸€ä¸‹é¡¹ç›®çš„å•å…ƒæµ‹è¯•ï¼Œè¿™ä¸ªå…ˆä¸ç®¡ï¼Œä¸æ˜¯å¿…é¡»çš„ã€‚æ¥ä¸‹æ¥æµ‹è¯•ä¸€ä¸‹åˆšæ‰å®‰è£…çš„åº“èƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå…ˆç”¨vcpkg listæŸ¥çœ‹ä¿¡æ¯\n1 2 PS D:\\Downloads\u0026gt; vcpkg list |findstr prism prism:x64-windows 1.0.0 a static reflect library of c++ ç„¶åæˆ‘æŠŠæˆ‘é¡¹ç›®ä¸­prismæºç ç›®å½•ç§»é™¤åï¼Œç”¨ideæŸ¥çœ‹å¼•ç”¨æ—¶ï¼Œå·²ç»æ­£ç¡®å®šä½åˆ°vcpkgçš„å®‰è£…ç›®å½•äº†\nç¼–è¯‘ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œè¯´æ˜æˆåŠŸäº†ã€‚\n2.2.1.2 æ·»åŠ versions æ¥ä¸‹æ¥æ·»åŠ versionç›¸å…³çš„ä¿¡æ¯\nåœ¨prism_registry/versions ä¸­åˆ›å»ºä»¥ä½ çš„å­˜å‚¨åº“åç§°å¤´ä¸€ä¸ªå­—æ¯+ â€œ-â€å¼€å…³çš„ç›®å½•ï¼Œ æ·»åŠ çš„åº“æ˜¯prismï¼Œæ‰€ä»¥åˆ›å»ºçš„ç›®å½•ä¸ºp-\n1 2 3 mkdir -p ~/source/repos/prism_registry/versions/p- cd ~/source/repos/prism_registry/versions/p- vim prism.json åˆ›å»ºprism.jsonæ–‡ä»¶å†™å…¥\n1 2 3 4 5 6 7 8 { \u0026#34;versions\u0026#34;: [ { \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;git-tree\u0026#34;: \u0026#34;\u0026#34; } ] } git-tree çš„å€¼å¦‚æ­¤è·å–\n1 2 git add ports/prism git commit -m \u0026#34;[prism] new port\u0026#34; å•ç‹¬æäº¤prismçš„portsç›®å½•ï¼Œ æäº¤å†…å®¹ä»¥[portName]å¼€å¤´ï¼Œå¦‚æœä½ æƒ³è¦åˆå¹¶åˆ°vcpkg masterçš„è¯ï¼Œè¿™ä¸ªæ˜¯è§„åˆ™ä¹‹ä¸€\nç„¶å å…ˆä¸ç€æ€¥æäº¤\n1 git rev-parse HEAD:prots/prism è·å–gitåˆ†æ”¯HEADä¸Šçš„git ç›®å½•çš„åˆ†æ”¯å·ï¼Œå†™å…¥/versions/p-/prism.jsonä¸­ï¼Œåˆšæ‰æ”¾ç©ºçš„git-tree\nç„¶åç¼–è¾‘ versions/baseline.json\n1 2 3 4 5 6 7 8 { \u0026#34;default\u0026#34;: { \u0026#34;prism\u0026#34;: { \u0026#34;baseline\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;port-version\u0026#34;: 0 } } } ç„¶åæŠŠprism_registry æäº¤æ¨é€åˆ°å…¬å¸forgejoä¸Š\n2.2.2 æ·»åŠ égithubçš„åº“ç¤ºä¾‹ ä¸Šé¢çš„ç¤ºä¾‹æ˜¯vcpkgå›¢é˜Ÿåšå®¢ä¸Šçš„ç¤ºä¾‹ï¼Œæ‰€ä»¥ç”¨ vcpkg_from_githubå¯¼å…¥çš„ï¼Œè€Œæˆ‘ä»¬ç§æœ‰çš„ä»£ç åº“æ˜¯æ”¾åœ¨å…¬å¸forgejoæœåŠ¡å™¨ä¸Šçš„ï¼Œæ‰€ä»¥åº”è¯¥æ¢ç´¢ä¸€ç§é€šç”¨çš„æ–¹æ³•ï¼Œæˆ‘æŸ¥çœ‹vcpkgæºç é‡Œçš„Portsï¼Œçœ‹åˆ°æœ‰çš„åº“ä½¿ç”¨çš„æ˜¯vcpkg_from_git\n1 2 3 4 5 6 7 vcpkg_from_git( OUT_SOURCE_PATH LSS_SOURCE_PATH URL https://chromium.googlesource.com/linux-syscall-support REF 7bde79cc274d06451bf65ae82c012a5d3e476b5a ) file(RENAME \u0026#34;${LSS_SOURCE_PATH}\u0026#34; \u0026#34;${SOURCE_PATH}/src/third_party/lss\u0026#34;) å’Œå¸¦gitè¡¥ä¸çš„å†™æ³•\n1 2 3 4 5 6 7 vcpkg_from_git( OUT_SOURCE_PATH SOURCE_PATH URL https://sourceware.org/git/elfutils REF ca4a785fc3061c7d136b198e9ffe0b14cf90c2be #elfutils-0.186 PATCHES configure.ac.patch ) é™¤æ­¤ä¹‹å¤–æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«, åè€Œå°‘äº†sha512 æ£€éªŒçš„æ­¥éª¤ï¼Œæ›´ç®€å•äº†\n2.2.3 ç”¨vcpkgçš„ç®€åŒ–æ·»åŠ versionæ­¥éª¤ æ·»åŠ å®Œport å¹¶æäº¤åˆ°gitåï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹å¼ç®€å•çš„æ›´æ–°versionå’Œbaseline.json\nå¦‚æœæ˜¯åœ¨å¾®è½¯vcpkg å‰å‡ºæ¥çš„åˆ†æ”¯ä¸Šï¼Œæ·»åŠ äº†ä½¿ç”¨gitæ·»åŠ äº†ports/prismåï¼Œå°±å¯ä»¥ä½¿ç”¨x-add-version --allæ¥ç”Ÿæˆ version/p-/prism.json ä»¥åŠ version/baseline.jsonä¸­çš„prismçš„æ¡ç›®\nå¦‚æœä¸æ˜¯vcpkgå‰å‡ºæ¥çš„åˆ†æ”¯ï¼Œè€Œæ˜¯å…¬å¸çš„ç§æœ‰åº“çš„è¯ï¼Œå‚ç…§æ•™ç¨‹ï¼šä½¿ç”¨ Git å°†åŒ…å‘å¸ƒåˆ°ç§æœ‰ vcpkg æ³¨å†Œè¡¨ |Microsoftå­¦ä¹  åŠ ç‚¹å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·\n1 vcpkg --x-builtin-ports-root=./ports --x-builtin-registry-versions-dir=./versions x-add-version --all --verbose äº†è§£è¿™ä¸ªå·¥å…·ï¼Œå¦‚æœéœ€è¦cié›†æˆçš„è¯ï¼Œå°±ä¼šæ–¹ä¾¿å¾ˆå¤š\n2.3 åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç§æœ‰çš„vcpkgä»“åº“ é¦–å…ˆæˆ‘åœ¨å…¬å¸çš„forgejoä¸Šå¼€äº†ä¸€ä¸ªç©ºçš„å­˜å‚¨åº“ï¼ŒæŠŠ vcpkgç§æœ‰ä»“åº“ä¸Šä¼ ä¸Šå»\nç„¶ååœ¨æµ‹è¯•é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»ºvcpkg-configuration.json\nåŸºäºgithubçš„vcpkg ï¼Œæ‰©å±•æˆ‘ä»¬ç§æœ‰çš„åº“ï¼Œ è¿™ç§æ˜¯æ¯”è¾ƒåˆç†çš„ï¼Œå¦‚æœéœ€è¦å¯¹githubä¸Šçš„åº“åšå®šåˆ¶åŒ–ä¿®æ”¹ï¼Œåªéœ€è¦æŠŠåº“è¿ç§»åˆ°å†…ç½‘å°±è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 { \u0026#34;default-registry\u0026#34;: { \u0026#34;kind\u0026#34;: \u0026#34;git\u0026#34;, \u0026#34;repository\u0026#34;: \u0026#34;https://github.com/microsoft/vcpkg\u0026#34;, \u0026#34;baseline\u0026#34;: \u0026#34;0da9fe986d07603da71f35ef8dd55512154a64bd\u0026#34; }, \u0026#34;registries\u0026#34;: [ { \u0026#34;kind\u0026#34;: \u0026#34;git\u0026#34;, \u0026#34;repository\u0026#34;: \u0026#34;http://10.1.8.8/AL/dv-vcpkg\u0026#34;, \u0026#34;baseline\u0026#34;: \u0026#34;36f0728c26661f67fca9b583bd99084e9491be93\u0026#34;, \u0026#34;packages\u0026#34;: [ \u0026#34;prism\u0026#34; ] } ] } baselineæ˜¯vcpkgä»“åº“çš„æäº¤ï¼Œä¸€èˆ¬å»ºç«‹ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œåˆå§‹åŒ–çš„æ—¶å€™æ›´æ–°ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œåç»§ä¿®æ”¹ä¸ªåˆ«çš„åº“ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šåº“ç‰ˆæœ¬ï¼Œæˆ–é‡å†™åº“ç‰ˆæœ¬çš„æ–¹å¼ï¼Œä½¿é¡¹ç›®å¤§éƒ¨åˆ†çš„å¼•ç”¨çš„åº“éƒ½æ˜¯ç¨³å®šçš„ã€‚\nå…³äºvcpkgç‰ˆæœ¬æ§åˆ¶ å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£Versioning reference | Microsoft Learn\nç„¶ååˆ›å»ºä¸€ä¸ªvcpkg.json\n1 2 3 4 5 6 7 { \u0026#34;name\u0026#34;: \u0026#34;prismqt-core\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;dependencies\u0026#34;: [ \u0026#34;prism\u0026#34; ] } è¿™é‡Œçš„prismæ²¡æœ‰æŒ‡å®šä»»ä½•ç‰ˆæœ¬ï¼Œæ‰€ä»¥ ä¼šä»æˆ‘ä»¬ç§æœ‰åº“çš„åŸºæœ¬ç‰ˆæœ¬ä¸­è·å–é»˜è®¤çš„ç‰ˆæœ¬\nåœ¨æµ‹è¯•é¡¹ç›®æ ¹ç›®å½•å»ºç«‹å¥½è¿™ä¸¤ä¸ªjsonåï¼Œ æ‰§è¡Œvcpkg install\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 $ vcpkg.exe install Detecting compiler hash for triplet x64-windows... -- Using %HTTP(S)_PROXY% in environment variables. The following packages will be rebuilt: * catch2:x64-windows -\u0026gt; 3.4.0 -- C:\\Users\\user\\AppData\\Local\\vcpkg\\registries\\git-trees\\5796c1c0513a7b49f135e8acdd1976f53e9944ea * vcpkg-cmake:x64-windows -\u0026gt; 2023-05-04 -- C:\\Users\\user\\AppData\\Local\\vcpkg\\registries\\git-trees\\88a7058fc7fa73a9c4c99cfcae9d79e2abf87a5a * vcpkg-cmake-config:x64-windows -\u0026gt; 2022-02-06#1 -- C:\\Users\\user\\AppData\\Local\\vcpkg\\registries\\git-trees\\8d54cc4f487d51b655abec5f9c9c3f86ca83311f The following packages will be built and installed: prism:x64-windows -\u0026gt; 1.0.0 -- C:\\Users\\user\\AppData\\Local\\vcpkg\\registries\\git-trees\\668c45ba147cbef160d9c228712f5775cff242b2 Additional packages (*) will be modified to complete this operation. Restored 3 package(s) from C:\\Users\\user\\AppData\\Local\\vcpkg\\archives in 1.3 s. Use --debug to see more details. Removing 1/7 catch2:x64-windows Elapsed time to handle catch2:x64-windows: 217 ms Removing 2/7 vcpkg-cmake-config:x64-windows Elapsed time to handle vcpkg-cmake-config:x64-windows: 98 ms Removing 3/7 vcpkg-cmake:x64-windows Elapsed time to handle vcpkg-cmake:x64-windows: 113 ms Installing 4/7 vcpkg-cmake:x64-windows... Elapsed time to handle vcpkg-cmake:x64-windows: 16 ms Installing 5/7 vcpkg-cmake-config:x64-windows... Elapsed time to handle vcpkg-cmake-config:x64-windows: 16.5 ms Installing 6/7 catch2:x64-windows... Elapsed time to handle catch2:x64-windows: 58.2 ms Installing 7/7 prism:x64-windows... Building prism:x64-windows... -- Installing port from location: C:\\Users\\user\\AppData\\Local\\vcpkg\\registries\\git-trees\\668c45ba147cbef160d9c228712f5775cff242b2 -- Using cached D:/Users/user/Documents/source/repos/vcpkg/downloads/prism-62156a21f843168993c8e641f22efb380b8e7e62.tar.gz -- Cleaning sources at D:/Users/user/Documents/source/repos/vcpkg/buildtrees/prism/src/380b8e7e62-68fffb19a4.clean. Use --editable to skip cleaning for the packages you specify. -- Extracting source D:/Users/user/Documents/source/repos/vcpkg/downloads/prism-62156a21f843168993c8e641f22efb380b8e7e62.tar.gz -- Using source at D:/Users/user/Documents/source/repos/vcpkg/buildtrees/prism/src/380b8e7e62-68fffb19a4.clean -- Found external ninja(\u0026#39;1.10.2\u0026#39;). -- Configuring x64-windows -- Building x64-windows-dbg -- Building x64-windows-rel -- Using cached mingw-w64-i686-pkgconf-1~1.8.0-2-any.pkg.tar.zst. -- Using cached msys2-msys2-runtime-3.4.6-1-x86_64.pkg.tar.zst. -- Using msys root at D:/Users/user/Documents/source/repos/vcpkg/downloads/tools/msys2/6f3fa1a12ef85a6f -- Installing: D:/Users/user/Documents/source/repos/vcpkg/packages/prism_x64-windows/share/prism/copyright -- Installing: D:/Users/user/Documents/source/repos/vcpkg/packages/prism_x64-windows/share/prism/usage -- Performing post-build validation Stored binaries in 1 destinations in 58.6 ms. Elapsed time to handle prism:x64-windows: 21 s Total install time: 21 s The package prism usage: find_package(prism::prism) target_include_directories(main INTERFACE ${PRISM_INCLUDE_DIRS}) more infomation: https://github.com/nocanstillbb/prism ä¾èµ–å…¨éƒ¨å®‰è£…å®Œæ¯•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ‰€æœ‰ä¾èµ–åˆ—åˆ°é¡¶å±‚é¡¹ç›®ä¸Šï¼Œå°±å¯ä»¥ç”¨vcpkgå®‰è£…æ‰€æœ‰ä¾èµ–ï¼Œæ›´æ–°æ‰€æœ‰ä¾èµ–ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨vcpkgçš„ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½æ¥ç®¡ç†ä¾èµ–ï¼Œ è¿™æ ·gitåˆ†æ”¯åªéœ€è¦ä¿ç•™ä¸€ä¸ªmasteråˆ†æ”¯å°±å¯ä»¥äº†ï¼Œæ‰€æœ‰ä¾èµ–çš„ç‰ˆæœ¬å¯ä»¥ç”¨æ ¹ç›®å½•çš„vcpkg.jsonæ¥æ§åˆ¶å’ŒæŸ¥çœ‹\n", 
        "url": "\/post\/%E5%88%9B%E5%BB%BAvcpkg%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93\/"
    },
    
    "\/tags\/qt\/": {
        "title": "Qt",
        "tags": [],
        "content": "", 
        "url": "\/tags\/qt\/"
    },
    
    "\/post\/%E4%B8%BAdrone%E5%88%B6%E4%BD%9Cqt%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E7%9A%84ubuntu%E7%8E%AF%E5%A2%83%E7%9A%84docker%E9%95%9C%E5%83%8F\/": {
        "title": "ä¸ºdroneåˆ¶ä½œqtç¼–è¯‘æ‰“åŒ…çš„ubuntuç¯å¢ƒçš„dockeré•œåƒ",
        "tags": ["C\u002b\u002b","CI\/CD","Ubuntu","Qt","Docker",],
        "content": "0.å‰è¨€ ä¹‹å‰æˆ‘å·²ç»å†™äº† Drone+Forgejo+SonarQube æŒç»­é›†æˆcode reviewçš„æ–‡æ¡£ï¼Œ\nä½†åœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è‡ªå·±åŠ¨æ‰‹åˆ›å»ºdockerï¼Œéƒ½æ˜¯ç”¨åˆ«äººåšå¥½çš„é•œåƒã€‚\nç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠå¼€å‘ç¯å¢ƒæ‰“åˆ°dockeré•œåƒä¸­ï¼Œå¹¶ä¸”æŠŠæˆ‘ä»¬çš„ä»£ç åº“æ‹‰åˆ°é•œåƒä¸­ï¼Œåšä¸€ä¸ªåŸºçº¿ ï¼Œ\næ¯æ¬¡Forgejoä¸Šè§¦å‘ä¸€ä¸ªwebhookæ—¶ï¼Œæˆ‘ä»¬ä¸ŠDroneåŸºäºè¿™ä¸ªåŸºçº¿ï¼Œæ‰§è¡ŒæŒ‡ä»¤é€’å½’æ‹‰å–æ‰€æœ‰git submoduleï¼Œæ‰§è¡Œæ‰“åŒ…è„šæœ¬ã€‚\n1 ä¸‰ç§æ€è·¯ æ‘†åœ¨æˆ‘ä»¬é¢å‰æœ‰ä¸‰ç§é€‰æ‹©\nç¼–å†™dockerfile ï¼Œä»dockerfileç”Ÿæˆé•œåƒ\nç›´æ¥è¿è¡Œå®¹å™¨ï¼Œåœ¨å®¹å™¨ä¸­å®‰è£…å¥½æ‰€æœ‰ä¾èµ–åï¼ŒæŠŠå®¹å™¨å®ä¾‹è½¬æ¢ä¸ºé•œåƒ\nç”¨ç°æœ‰çš„ç³»ç»Ÿç›´æ¥æ‰“æˆdockeré•œåƒ\nå‰è€…çš„å¥½å¤„æ˜¯ï¼Œæ–‡ä»¶ç³»ç»Ÿåˆ†å±‚æƒ…å†µè‰¯å¥½ï¼Œå½“ä½ æœ‰å¾ˆå¤šé•œåƒæ—¶ï¼Œä»–ä»¬å¯èƒ½å¯ä»¥å¤ç”¨æŸä¸€äº›æ–‡ä»¶å±‚ï¼ŒèŠ‚çº¦ç©ºé—´å’Œç½‘ç»œæµé‡\nä¸å¥½çš„åœ°æ–¹å°±æ˜¯æ­¥éª¤æ¯”è¾ƒç¹çã€‚åè€…çš„å¥½å¤„å°±æ˜¯æ“ä½œç®€å•ï¼Œä½†åŸºç¡€é•œåƒçš„åˆ†å±‚ä¿¡æ¯ä¼šä¸¢å¤±ã€‚\nå› ä¸ºæˆ‘ä»¬é™¤äº†Droneæ„å»ºæ‰“åŒ…ç”¨dockerï¼ŒåŸºæœ¬ä¸Šæ²¡å…¶ä»–äº‹äº†ï¼Œubuntu16è£¸æœºçš„è¿™ä¸ªåˆ†å±‚ï¼Œå¤ç”¨ç‡ä¸é«˜ï¼Œå¦å¤–æˆ‘ä»¬åªåœ¨ci cdçš„è¿™å°ç”µè„‘ä¸ŠåŠ è½½è¿™ä¸ªé•œåƒï¼Œæ²¡æœ‰ä»€ä¹ˆdockeré›†ç¾¤ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨æ‹…å¿ƒç½‘ç»œæµé‡çš„é—®é¢˜ã€‚æ‰€ä»¥ç»¼åˆè€ƒè™‘ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼æˆ–ç¬¬ä¸‰ç§æ–¹å¼ï¼Œ ç”±äºæˆ‘ç¡¬ç›˜å‰©ä½™ç©ºé—´æ¯”è¾ƒå°ï¼Œæ•…é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼\n1 å®‰è£…docker ç”±äºé—«å·¥ç»™æˆ‘çš„æœºå™¨æ˜¯ubuntuï¼Œæ‰€ä»¥æˆ‘ç”¨aptå®‰è£… dockerï¼Œç•¥\n2.åˆ¶ä½œå¼€å‘ç¯å¢ƒdocker 2.1 dockeré•œåƒ æ‹‰å–ï¼Œå¯åŠ¨ æ‹‰ä¸€ä¸ªä¸‹è½½é‡æœ€å¤šçš„\n1 root@drone-ci-8-20:~# docker pull homebrew/ubuntu16.04 è¿™æ—¶æŸ¥çœ‹ç”µè„‘ä¸Šçš„é•œåƒå¯ä»¥çœ‹åˆ°å·²ç»æ‹‰å–çš„\n1 2 3 root@drone-ci-8-20:~# docker images REPOSITORY TAG IMAGE ID CREATED SIZE homebrew/ubuntu16.04 latest 6347afdf9148 6 months ago 1.27GB å®ä¾‹åŒ–å®¹å™¨\n1 2 root@drone-ci-8-20:~# docker run -d homebrew/ubuntu16.04 tail -f /dev/null ed1c0b7568119b788b940e21fb1b2d50d63c3e9fe74a48a1dabd0d02987b3a5c tail -f /dev/null ä¼šä½¿è¿™ä¸ªå®¹å™¨ä¸€å¯åŠ¨å°± ä¸€ç›´ä¿æŒè¿è¡Œï¼Œè¿™æ ·æˆ‘ä»¬æ‰æœ‰æœºä¼šè¿›å»å®‰è£…ç¯å¢ƒ\n1 2 3 root@drone-ci-8-20:~# docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ed1c0b756811 homebrew/ubuntu16.04 \u0026#34;tail -f /dev/null\u0026#34; 25 seconds ago Up 24 seconds sharp_shtern æŸ¥çœ‹ä¸€ä¸‹å®¹å™¨ï¼Œå·²ç»æœ‰ä¸€ä¸ªçŠ¶æ€ ä¸ºupçš„å®¹å™¨ï¼Œè¯´æ˜è¿è¡ŒæˆåŠŸäº†ã€‚\næ¥ä¸‹æ¥ä½¿ç”¨ exec -it ä»¥äº¤äº’çš„å½¢å¼æ‰§è¡Œå®¹å™¨çš„bash ,\n1 2 root@drone-ci-8-20:~# docker exec -it ed1c /bin/bash linuxbrew@149b1d533469:~$ çœ‹ä¸€ä¸‹ç³»ç»Ÿå†…æ ¸\n1 2 3 linuxbrew@ed1c0b756811:~$ uname -a Linux ed1c0b756811 5.15.0-84-generic #93-Ubuntu SMP Tue Sep 5 17:16:10 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux linuxbrew@ed1c0b756811:~$ å†…æ ¸æ˜¾ç¤ºä¸º5.15ï¼Œè€Œå®é™…ä¸Šubuntuå†…æ ¸æœ€æ–°çš„æ˜¯4.15.142ï¼Œ ä¸¤è€…æ˜¾ç¤ºä¸ä¸€æ ·æ˜¯å› ä¸ºdocker containerä½¿ç”¨çš„æ˜¯hostçš„å†…æ ¸\nä¸è¿‡æˆ‘ä»¬åªæ˜¯ç¼–è¯‘è½¯ä»¶ï¼Œåº”è¯¥æ²¡æœ‰å¤ªå¤šé—®é¢˜ï¼Œå…ˆä¸ç®¡å†…æ ¸ç‰ˆæœ¬\næ¥ä¸‹æ¥çš„æ“ä½œï¼Œå°±å’Œubuntuè£¸æœºå®‰è£…ç¯å¢ƒæ²¡å¤ªå¤šåŒºåˆ«äº†ï¼Œç”šè‡³æ›´ç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯è¦ç¼–è¯‘è½¯ä»¶ï¼Œä¸éœ€è¦å®‰è£…è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚é©±åŠ¨\n2.2 å®‰è£…åŸºç¡€ä¾èµ– æ¥ä¸‹æ¥æ›´æ–°ä¸€ä¸‹æˆ‘ä»¬å…¬å¸çš„aptæº ï¼Œä¸‹è½½ä¸€ä¸‹é—«å·¥ä¹‹å‰å†™çš„è„šæœ¬\n1 2 3 4 5 6 sudo -i apt update apt install wget cd ~ wget http://file.deepvision-tech.net/scripts/apt.sh chmod +x apt.sh å› ä¸ºdockerä¸­çš„ç½‘ç»œç¯å¢ƒå’Œä¸»æœºä¸­ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹è„šæœ¬ ï¼Œæ‰‹åŠ¨æ³¨é‡Šæ‰ æ­å·æˆ–åŒ—äº¬çš„è„šæœ¬ é€»è¾‘\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #!/bin/bash # v1.1 # 2023.3.21 # yanqianling@deepvision-tech.com OldSource=`grep ^deb /etc/apt/sources.list|awk \u0026#39;{print $2}\u0026#39;|sort |uniq |sed \u0026#39;/security.ubuntu.com/d\u0026#39;` NewSource=\u0026#34;-apt.deepvision-tech.net/repository/apt-\u0026#34; OsVer=`cat /etc/issue|awk -F\u0026#39;[ .]+\u0026#39; \u0026#39;{print $2}\u0026#39;` IP=`ip a | awk \u0026#39;-F[ .]+\u0026#39; \u0026#39;/255/{print $3\u0026#34;.\u0026#34;$4\u0026#34;.\u0026#34;$5}\u0026#39;|egrep \u0026#39;10.[1,2,8]{1}.\u0026#39;` YELOW=\u0026#39;\\E[1;33m\u0026#39; RED=\u0026#39;\\E[1;31m\u0026#39; RES=\u0026#39;\\E[0m\u0026#39; #case $IP in # \u0026#34;10.2.1\u0026#34;) # cp -f /etc/apt/sources.list /etc/apt/sources.list.bak # echo \u0026#34;\u0026#34; # echo -e \u0026#34;${YELOW} Old apt sources backup to [/etc/apt/sources.list.bak] ${RES}\u0026#34; # sed -i \u0026#34;s#${OldSource}#http://bj${NewSource}${OsVer}/#g\u0026#34; /etc/apt/sources.list # echo -e \u0026#34;${YELOW} new apt source replaced by [http://bj${NewSource}${OsVer}] ${RES}\u0026#34; # echo -e \u0026#34;${YELOW} Please run command [sudo apt update],Let config become effective ${RES}\u0026#34; #;; # \u0026#34;10.1.1\u0026#34;|\u0026#34;10.1.8\u0026#34;) cp -f /etc/apt/sources.list /etc/apt/sources.list.bak echo \u0026#34;\u0026#34; echo -e \u0026#34;${YELOW} Old apt sources backup to [/etc/apt/sources.list.bak] ${RES}\u0026#34; sed -i \u0026#34;s#${OldSource}#http://hz${NewSource}${OsVer}/#g\u0026#34; /etc/apt/sources.list echo -e \u0026#34;${YELOW} new apt source replaced by [http://hz${NewSource}${OsVer}] ${RES}\u0026#34; echo -e \u0026#34;${YELOW} Please run command [sudo apt update],Let config become effective ${RES}\u0026#34; # ;; # *) # echo -e \u0026#34;${YELOW} ${IP} ${RES}\u0026#34; # echo -e \u0026#34;${YELOW}YOU IP Error ${RES}\u0026#34; #esac ~ ~ ~ ä¾‹å¦‚æˆ‘æ“ä½œçš„è¿™ä¸ªæœºå™¨æ˜¯åœ¨æ­å·çš„ï¼Œæˆ‘å°±æŠŠè„šæœ¬ä¸­çš„case è¯­å¥æ³¨é‡Šæ‰ï¼Œåªç•™ä¸‹æ­å·è¿™ä¸€æ®µé€»è¾‘\nç„¶åæ‰§è¡Œå®ƒ\n1 ./apt.sh æ›¿æ¢å®Œæºå ï¼Œæ›´æ–°ä¸€ä¸‹\n1 apt update ç„¶åå¼€å§‹å®‰è£…ç¼–è¯‘ç¯å¢ƒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 sudo apt install -y liblapack-dev sudo apt install -y libjpeg-dev libpng12-dev libtiff-dev libjasper-dev libdc1394-22-dev sudo apt install -y libva1 libva-dev libva-drm1 libva-egl1 libva-glx1 sudo apt install -y libswscale-dev libavcodec-dev libavformat-dev sudo apt install -y libssh2-1 zlib1g-dev sudo apt install -y libgl1-mesa-dev libglu1-mesa-dev freeglut3-dev libsndio-dev sudo apt install -y python3-pip pip3 install openpyxl==2.6.4 pip3 install xlrd==1.2.0 sudo apt install -y libcap-dev libx11-dev libxext-dev libgtk-3-dev libglade2-0 libglade2-dev libpcap0.8 libcap2 ethtool sudo apt install -y libsndio-dev sudo apt install -y libxcb-keysyms1-dev libxcb-image0-dev libxcb-shm0-dev libxcb-icccm4-dev libxcb-sync0-dev libxcb-xfixes0-dev libxcb-shape0-dev libxcb-randr0-dev libxcb-render-util0-dev libfontconfig1-dev libfreetype6-dev libx11-dev libxext-dev libxfixes-dev libxi-dev libxrender-dev libxcb1-dev libx11-xcb-dev libxcb-glx0-dev x11vnc xauth build-essential mesa-common-dev libglu1-mesa-dev libxkbcommon-dev libxcb-xkb-dev libxslt1-dev libgstreamer-plugins-base0.10-dev libxkbcommon-x11-0 sudo apt-get install build-essential libgli-mesa-dev libglul-mesa-dev freeglut3-dev sudo apt install -y libxcb-keysyms1-dev libxcb-image0-dev libxcb-shm0-dev libxcb-icccm4-dev libxcb-sync0-dev libxcb-xfixes0-dev libxcb-shape0-dev libxcb-randr0-dev libxcb-render-util0-dev libfontconfig1-dev libfreetype6-dev libx11-dev libxext-dev libxfixes-dev libxi-dev libxrender-dev libxcb1-dev libx11-xcb-dev libxcb-glx0-dev x11vnc xauth build-essential mesa-common-dev libglu1-mesa-dev libxkbcommon-dev libxcb-xkb-dev libxslt1-dev libgstreamer-plugins-base0.10-dev libxkbcommon-x11-0 2.3 å®‰è£…Qt 2.3.1 æ–¹å¼ä¸€ï¼Œç¼–è¯‘æºç å®‰è£… å®‰è£…qt 5.12.6\nä¼ ç»Ÿçš„æ–¹å¼æ˜¯ åœ¨æœ‰guiçš„ç¯å¢ƒä¸‹è¿è¡Œ.runçš„å®‰è£…åŒ…ï¼Œ ä½†docker é‡Œçš„ubuntué»˜è®¤æ˜¯æ²¡æœ‰å›¾å½¢ç•Œé¢çš„ã€‚\næ‰€ä»¥ç›´æ¥ä¸‹è½½å®˜ç½‘çš„æºç ç¼–è¯‘ï¼Œå®‰è£…\n1 2 3 4 5 6 7 8 9 10 11 12 13 wget https://download.qt.io/archive/qt/5.12/5.12.6/single/qt-everywhere-src-5.12.6.tar.xz tar -zxvf qt-everywhere-src-5.12.6.tar.xz cd qt-everywhere-src-5.12.6 ./configure make -j8 make install # å¦‚æœå‡ºç°é—®é¢˜make confclean æ¸…é™¤é…ç½®ä¿¡æ¯ é‡æ–°ç¼–è¯‘ å®‰è£…å®Œåä¼šæœ‰ /local/Qt-5.12.6/è¿™ä¸ªè·¯å¾„ï¼Œ æŠŠqmakeå¤åˆ¶åˆ°/usr/bin ,ç„¶åé”®å…¥ qmake -v æŸ¥çœ‹æ˜¯å¦ç¼–è¯‘å®‰è£…æ­£å¸¸\n1 2 3 linuxbrew@ed1c0b756811:/usr$ qmake -v QMake version 3.1 Using Qt version 5.12.6 in /usr/local/Qt-5.12.6/lib å› ä¸ºæˆ‘ä»¬åªæ˜¯ç”¨dockeræ¥æ„å»ºï¼Œä¸éœ€è¦å¯åŠ¨å›¾å½¢ç•Œé¢ï¼Œæ‰€ä»¥è¿™ç§å¯ä»¥å‡å°‘ä¸å¿…è¦çš„ä¾èµ–å®‰è£…ï¼Œä½†ç¼–è¯‘æ—¶é•¿è¾ƒé•¿ï¼Œå¦‚æœä¸æƒ³ç¼–è¯‘æºç çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹æ¡ˆï¼Œdockerå®¿ä¸»æœºä¸Šå®‰è£…æ¡Œé¢ç¯å¢ƒ\n2.3.2 æ–¹å¼äºŒï¼ŒdockeræŒ‚è½½å®¿ä¸»æœºå›¾å½¢ç›¸å…³å·å¯åŠ¨ 1 2 sudo apt install ubuntu-desktop xhost local:root ä½¿ç”¨vncè¿œç¨‹åˆ°å®¿ä¸»æœºåï¼Œç„¶åå‚ç…§è¿™ä¸ªè®¾ç½®ï¼ŒæŠŠdockeræŒ‚è½½ä¸Šæ˜¾ç¤ºç›¸å…³çš„å·ï¼Œ\n1 docker run -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=$DISPLAY -v /dev/shm:/dev/shm --device /dev/dri å°±å¯ä»¥åœ¨dockerå®¹å™¨ä¸­æ‰“å¼€ runå®‰è£…åŒ…å®‰è£…äº†, å¦‚æœè¿˜æ‰“ä¸å¼€runå®‰è£…åŒ…ï¼Œå¯ä»¥å°è¯•æŒ‡å®š ä¸ä¾èµ–ç¡¬ä»¶çš„å¹³å°\n1 qt-opensource-linux-x64-5.12.6.run -platform minimal æˆ–\n1 qt-opensource-linux-x64-5.12.6.run -platform offscreen p latform çš„å¯é€‰é¡¹\ndirectfbeglï¼Œdirectfbï¼Œeglfsï¼Œlinuxfbï¼Œminimalï¼Œminimaleglï¼Œoffscreenï¼Œwayland-eglï¼Œwaylandï¼Œxcbã€‚\nä»¥åŠè¿™ä¸ªï¼Œ ä½¿ç”¨è„šæœ¬ï¼Œé™é»˜å®‰è£… installation - Silent install Qt run installer on ubuntu server - Stack Overflow\n2.4 å…‹éš†æºç æ„å»º å…¨å®‰è£…åï¼Œ å…‹éš†ä¸€ä¸‹æºç \n1 2 3 4 mkdir -p ~/source/repos cd ~/source/repos/ git clone http://10.1.8.8/AL/dv-detector.git git submodule update --init --recursive ç„¶åå°±å¯ä»¥è¿è¡Œæ‰“åŒ…è„šæœ¬æ„å»ºäº†\n1 ./pkg.sh 1.1.1.1 tst_build 2.5 æŠŠç°æœ‰docker container è½¬æ¢ä¸ºdocker image åˆ é™¤æ‰ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œå°½å¯èƒ½å‡å°‘å®¹å™¨å ç”¨çš„ç©ºé—´ï¼Œç„¶åå†æ‰“é•œåƒ\n1 2 3 4 5 root@drone-ci-8-20:~# docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ed1c0b756811 homebrew/ubuntu16.04 \u0026#34;tail -f /dev/null\u0026#34; 25 seconds ago Up 24 seconds sharp_shtern docker commit ed1c0b756811 dv_detector:master1.1.1.1 å› ä¸ºæˆ‘ä»¬ç›®å‰æ²¡æœ‰æ­å»ºdocker ç§æœ‰ä»“åº“ï¼Œæ‰€ä»¥ä¸€èˆ¬é€šè¿‡å¯¼å…¥å¯¼å‡º docker é•œåƒåˆ°æ–‡ä»¶ç³»ç»Ÿä¼ è¾“\nå¯¼å‡ºdocker é•œåƒåˆ°æ–‡æœ¬ç³»ç»Ÿ\n1 docker save -o myimage_exported.tar dv_detector:master1.1.1.1 ä»æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥\n1 docker load -i myimage_exported.tar 3 é…ç½®droneï¼Œæ‰§è¡Œdocker runner Overview | Drone\nå®˜ç½‘ä¹‹è¿°å¤‡çŸ£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 kind: pipeline type: docker name: build clone: disable: true steps: - name: pkg image: dv_detector:master1.1.1.1 environment: DRONE_BRANCH: $DRONE_BRANCH PKG_VERSION: \u0026#34;1.1.1.2\u0026#34; PKG_NAME: \u0026#34;æµ‹è¯•æ‰“åŒ…\u0026#34; settings: detach: false entrypoint: [\u0026#34;\u0026#34;] commands: - cd ~/source/repos/dv-detector - git reset --hard - git clean -xdf - git pull origin master - git submodule update --recursive - bash -c \u0026#34;./pkg.sh $PKG_VERSION $PKG_NAME\u0026#39;\u0026#39;_$(git rev-parse --short=6 HEAD)\u0026#34; æœ€ç»ˆæ‰“å‡ºçš„åŒ…æ”¾åœ¨å®¹å™¨ä¸­æ²¡åç»­åŠ¨ä½œï¼Œå› ä¸ºæœ¬æ–‡åªåšæŠ€æœ¯éªŒè¯\nå¦‚æœéœ€è¦ï¼Œåªéœ€è¦åœ¨comandsé‡ŒåŠ é¢å¤–çš„å¤„ç†å°±å¯ä»¥äº†\nend\n100. é™„å½•:Docker å¸¸ç”¨å‘½ä»¤ 100.1 å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼šdocker run \u0026lt;image_name\u0026gt; å¯åŠ¨å®¹å™¨ï¼šdocker start \u0026lt;container_name\u0026gt; åœæ­¢å®¹å™¨ï¼šdocker stop \u0026lt;container_name\u0026gt; é‡å¯å®¹å™¨ï¼šdocker restart \u0026lt;container_name\u0026gt; åˆ é™¤å®¹å™¨ï¼šdocker rm \u0026lt;container_name\u0026gt; æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼šdocker ps æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰ï¼šdocker ps -a è¿›å…¥å®¹å™¨å†…éƒ¨å‘½ä»¤è¡Œï¼šdocker exec -it \u0026lt;container_name\u0026gt; /bin/bash 100.2 é•œåƒæ“ä½œï¼š æœç´¢é•œåƒï¼šdocker search \u0026lt;image_name\u0026gt; ä¸‹è½½é•œåƒï¼šdocker pull \u0026lt;image_name\u0026gt; åˆ—å‡ºæœ¬åœ°é•œåƒï¼šdocker images åˆ é™¤æœ¬åœ°é•œåƒï¼šdocker rmi \u0026lt;image_name\u0026gt; 100.3å®¹å™¨æ—¥å¿—å’Œä¿¡æ¯ï¼š æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼šdocker logs \u0026lt;container_name\u0026gt; æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼šdocker inspect \u0026lt;container_name\u0026gt; 100.4å®¹å™¨æ–‡ä»¶ä¼ è¾“ï¼š ä»å®¹å™¨å¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°ï¼šdocker cp \u0026lt;container_name\u0026gt;:\u0026lt;src_path\u0026gt; \u0026lt;dest_path\u0026gt; ä»æœ¬åœ°å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨ï¼šdocker cp \u0026lt;src_path\u0026gt; \u0026lt;container_name\u0026gt;:\u0026lt;dest_path\u0026gt; 100.5æ„å»ºé•œåƒï¼š åŸºäº Dockerfile æ„å»ºé•œåƒï¼šdocker build -t \u0026lt;image_name\u0026gt;:\u0026lt;tag\u0026gt; \u0026lt;path_to_Dockerfile\u0026gt; 100.6Docker Composeï¼š ä½¿ç”¨ Docker Compose å¯åŠ¨å¤šä¸ªå®¹å™¨ï¼šdocker-compose up åœæ­¢ Docker Compose å¯åŠ¨çš„å®¹å™¨ï¼šdocker-compose down 100.7ç½‘ç»œæ“ä½œï¼š åˆ—å‡º Docker ç½‘ç»œï¼šdocker network ls åˆ›å»º Docker ç½‘ç»œï¼šdocker network create \u0026lt;network_name\u0026gt; 100.8æ¸…ç†ï¼š æ¸…ç†æ— ç”¨å®¹å™¨ï¼šdocker container prune æ¸…ç†æ— ç”¨é•œåƒï¼šdocker image prune æ¸…ç†æ— ç”¨å·ï¼ˆæ•°æ®å·ï¼‰ï¼šdocker volume prune ", 
        "url": "\/post\/%E4%B8%BAdrone%E5%88%B6%E4%BD%9Cqt%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E7%9A%84ubuntu%E7%8E%AF%E5%A2%83%E7%9A%84docker%E9%95%9C%E5%83%8F\/"
    },
    
    "\/post\/cpp%E8%B7%A8%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%9C%A8windows%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98\/": {
        "title": "cppè·¨å¹³å°é¡¹ç›®åœ¨windowsä¸Šçš„æ–‡æœ¬ç¼–ç é—®é¢˜",
        "tags": ["C\u002b\u002b","Windows",],
        "content": "1.èƒŒæ™¯ linuxç³»ç»Ÿå’Œmac osé»˜è®¤ä½¿ç”¨utf8ç¼–ç ï¼Œwindowsç³»ç»Ÿä¸Šé€šå¸¸æ˜¯è·Ÿéšç³»ç»Ÿè®¾ç½®ï¼Œå¦‚æœç³»ç»Ÿé€‰æ‹©ä¸ºä¸­æ–‡åœ°åŒºçš„è¯ï¼Œé»˜è®¤ä¸ºGBKç¼–ç ã€‚\nwindows 10 1703å¼€å§‹ï¼Œæ”¯æŒæŠŠwindowsç¼–ç è®¾ç½®ä¸ºutf8 ã€‚\nIDEä¸Šä¸€èˆ¬ä¹Ÿæ˜¯é»˜è®¤æ˜¯è¿™ä¸ªé…ç½®ï¼Œä½†æ˜¯IDEå¯ä»¥é€‰æ‹©ç¼–ç æºç ä¿å­˜ä¸ºä»€ä¹ˆæ ¼å¼ã€‚\n2.è·¨å¹³å°é¡¹ç›®é‡åˆ°çš„é—®é¢˜ ç”±äºlinuxå’Œwindowså…±ç”¨ä¸€ä¸ªä»£ç åº“ï¼Œæ‰€ä»¥æºç éƒ½ä½¿ç”¨åŒä¸€ç¼–ç æ ¼å¼ï¼Œåœ¨æˆ‘çš„æƒ…å†µï¼Œæˆ‘æŠŠæºç ä¿å­˜ä¸ºutf8ï¼Œå¹¶åœ¨windowsä¸ŠæŠŠideé…ç½®ä¸º utf8 ä¸å¸¦BOMï¼Œ FL æ ¼å¼\nBOMï¼Œwindowså­—ç¬¦å‰åŠ ä¸Šé¢å¤–å­—èŠ‚çš„ä¿¡æ¯ï¼Œç”¨æ¥è®©windowsè®¤è¯†å­—ç¬¦ä¸²å±äºå“ªç§ç¼–ç \nFL , æ¢è¡Œç¬¦windowsä¸Šæ˜¯CRFL, Mac osæ˜¯CR ï¼ŒLinuxæ˜¯FL\nåŒæ—¶windowsä¸ŠæŠŠç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºutf8 æ ¼å¼ï¼Œ\nqmakeä½¿ç”¨ CONFIG += utf8_source é…ç½®ï¼Œå®ƒä¼šæ ¹æ®ç¼–ç å™¨è‡ªåŠ¨åŠ ä¸Šutf8çš„ç¼–ç é€‰é¡¹\nè‡³æ­¤ä¸ºæ­¢ï¼Œä¸–ç•Œå¦‚æ­¤ç¾å¥½ï¼Œ ä¸€åˆ‡æ˜¾ç¤ºæ­£å¸¸ï¼Œç”šè‡³è¿˜èƒ½ç”¨emoji è¡¨æƒ…å­—ç¬¦\nç›´åˆ°æ‰“å¼€æ–‡ä»¶å‘ç°æ‰“ä¸å¼€ï¼Œ è°ƒç”¨ç³»ç»Ÿå‘½ä»¤è¡Œæ— æ•…æ‰§è¡Œé”™è¯¯ ,æ§åˆ¶å°æ˜¾ç¤ºä¹±ç \n3.è§£å†³æ–¹æ³• 3.1 ä½¿ç”¨windows apiè½¬æ¢utf8ä¸ºgbk 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #include \u0026lt;sstream\u0026gt; #include \u0026lt;locale\u0026gt; #include \u0026lt;codecvt\u0026gt; inline std::string utf8_to_gbk(const std::string\u0026amp; str) { std::wstring_convert\u0026lt;std::codecvt_utf8\u0026lt;wchar_t\u0026gt;\u0026gt; conv; std::wstring tmp_wstr = conv.from_bytes(str); //GBK locale name in windows const char* GBK_LOCALE_NAME = \u0026#34;.936\u0026#34;; std::wstring_convert\u0026lt;std::codecvt_byname\u0026lt;wchar_t, char, mbstate_t\u0026gt;\u0026gt; convert(new std::codecvt_byname\u0026lt;wchar_t, char, mbstate_t\u0026gt;(GBK_LOCALE_NAME)); return convert.to_bytes(tmp_wstr); } inline std::string gbk_to_utf8(const std::string\u0026amp; str) { //GBK locale name in windows const char* GBK_LOCALE_NAME = \u0026#34;.936\u0026#34;; std::wstring_convert\u0026lt;std::codecvt_byname\u0026lt;wchar_t, char, mbstate_t\u0026gt;\u0026gt; convert(new std::codecvt_byname\u0026lt;wchar_t, char, mbstate_t\u0026gt;(GBK_LOCALE_NAME)); std::wstring tmp_wstr = convert.from_bytes(str); std::wstring_convert\u0026lt;std::codecvt_utf8\u0026lt;wchar_t\u0026gt;\u0026gt; cv2; return cv2.to_bytes(tmp_wstr); } æ¯å½“éœ€è¦å’Œç³»ç»Ÿäº¤äº’æ—¶ï¼Œå…ˆæŠŠutf8è½¬æ¢ä¸ºgbk ï¼Œä¾‹å¦‚ æ‰“å¼€æ–‡ä»¶ï¼Œè°ƒç”¨ç³»ç»Ÿå‘½ä»¤è¡Œ\nå¦‚æœè°ƒç”¨ç³»ç»Ÿç®¡é“ï¼Œè¿”å›äº†å­—ç¬¦ä¸²ï¼Œåˆ†åˆ«è°ƒç”¨å­è¿›ç¨‹ï¼Œé‡å®šå‘äº†å­—ç¬¦å›æ˜¾ï¼Œä¹Ÿéœ€è¦è¿”å›äº†å­—ç¬¦ä¸²æ˜¯gbkï¼Œè¦åœ¨ç¨‹åºé‡Œè½¬æ¢ä¸ºutf8\nè¿™ç§æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œä½†ä¹Ÿæ¯”è¾ƒé€šç”¨ï¼Œåªè¦æ˜¯å­—ç¬¦ä¸²å°±èƒ½è½¬\n3.2 ä½¿ç”¨ c++17 filesystem è§£å†³æ–‡ä»¶è·¯å¾„ filesystemåœ¨gcc 5.4ä»ç„¶å±äºå®éªŒé˜¶æ®µçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨gcc 5.4ä¸­ï¼Œå®ƒçš„åç§°ç©ºé—´å’Œå¤´æ–‡ä»¶ä½ç½®å¤šäº†ä¸€çº§experimental\n1 2 3 4 5 6 7 //gcc 5.4 #include \u0026lt;experimental/filesystem\u0026gt; int main() { std::experimental::filesystem::path ..... } å¦‚æœæ˜¯gcc 7 åˆ™éœ€è¦å»æ‰experimentalè¿™çº§ åç§°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include \u0026lt;filesystem\u0026gt; void testFilePath(std::string filename) { std::ifstream file(filename); if(file.good()) std::cout \u0026lt;\u0026lt; filename \u0026lt;\u0026lt; \u0026#34; å­˜åœ¨\u0026#34;\u0026lt;\u0026lt; std::endl; else std::cout \u0026lt;\u0026lt; filename \u0026lt;\u0026lt; \u0026#34; ä¸å­˜åœ¨\u0026#34;\u0026lt;\u0026lt; std::endl; } int main() { //å…¨æ˜¯ascii testFilePath(\u0026#34;d:/privatekey.pem\u0026#34;); testFilePath(\u0026#34;d:/æ•°æ®åˆ¤å®š.csv\u0026#34;); std::filesystem::path path = std::filesystem::u8path(\u0026#34;d:/æ•°æ®åˆ¤å®š.csv\u0026#34;); std::ifstream file(path); if(file.good()) std::cout \u0026lt;\u0026lt; path \u0026lt;\u0026lt; \u0026#34; å­˜åœ¨\u0026#34;\u0026lt;\u0026lt; std::endl; else std::cout \u0026lt;\u0026lt; path \u0026lt;\u0026lt; \u0026#34; ä¸å­˜åœ¨\u0026#34;\u0026lt;\u0026lt; std::endl; } ä¸Šé¢çš„ä»£ç å¦‚æœä½¿ç”¨utf8ç¼–è¯‘é€‰é¡¹ï¼Œä¸”æºç ä¿å­˜ä¸ºutf8,ä¸”åœ¨ä»£ç é¡µè®¾ç½®ä¸ºutf8çš„æ§åˆ¶å°ä¸Šè¿è¡Œï¼Œä½ å°†çœ‹åˆ°è¾“å‡º\n1 2 3 d:/privatekey.pem å­˜åœ¨ d:/æ•°æ®åˆ¤å®š.csv ä¸å­˜åœ¨ \u0026#34;d:/ï¿½ï¿½ï¿½ï¿½ï¿½Ğ¶ï¿½.csv\u0026#34; å­˜åœ¨ è¿™ç§æ–¹å¼å¯ä»¥ååˆ†æ–¹ä¾¿çš„å…¼å®¹å¤šä¸ªå¹³å°ï¼Œä½†std::filesystem::pathåªæœ‰c++17æ‰æœ‰ï¼Œå¹¶ä¸”ï¼Œä¸èƒ½ç›´æ¥å’Œstd::stringè½¬æ¢ï¼Œ\nä½†æ˜¯ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä½¿ç”¨std::cout è¾“å‡ºæ˜¯æ­£å¸¸çš„ï¼Œåªæ˜¯è¢«åŠ ä¸Šäº†å¼•å·ï¼Œ è¯´æ˜å¯ä»¥ä½¿ç”¨æµçš„æ–¹å¼å†™å…¥std::stringé‡Œï¼Œåªæ˜¯å¯èƒ½ä¼šè¢«åŠ ä¸Šå¼•å·ã€‚\n3.3 ä½¿ç”¨windows apiè§£å†³ gbkç³»ç»Ÿç¯å¢ƒæ§åˆ¶å°æ˜¾ç¤ºç¨‹åºè¾“å‡ºä¹±ç  è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨3.1ä¸­çš„é‚£ç§æ–‡ä»¶è½¬æ¢utf8ç¼–ç ï¼Œä½†æ˜¯å¦‚æœä¸å°å¿ƒæŠŠgbkè½¬ä¸ºgbkï¼Œ ç¨‹åºå°±ä¼šå´©æºƒï¼Œ æ‰“å°å­è¿›ç¨‹å›æ˜¾æ—¶è¸©äº†ä¸€æ¬¡å‘\nå¯ä»¥ä½¿ç”¨windowsè®¾ç½®ç¨‹åºè¾“å‡ºåˆ°æ§åˆ¶å°çš„ä»£ç é¡µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #ifdef _MSC_VER #define _AMD64_ #include \u0026lt;ConsoleApi2.h\u0026gt; #include \u0026lt;winnls.h\u0026gt; #endif int main(int argc, const char** argv) { #ifdef _MSC_VER SetConsoleOutputCP(CP_UTF8); SetConsoleCP(CP_UTF8); #endif } ", 
        "url": "\/post\/cpp%E8%B7%A8%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%9C%A8windows%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98\/"
    },
    
    "\/about\/": {
        "title": "About me",
        "tags": [],
        "content": " c++å¼€æºé¡¹ç›®ç»„ç»‡ cpp-prism çš„ä½œè€…\nç»„ç»‡ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªä»£ç ä»“åº“:\nprism æ˜¯ä¸€ä¸ªé™æ€åå°„æ¡†æ¶ï¼Œä»…ä¾èµ–äºstlï¼Œæ”¯æŒæ‰©å±•,å†…ç½®æ”¯æŒjosn,sqlå­—ç¬¦æ“ä½œå¤„ç†(ä¸ºäº†åªä¾èµ–stdæ²¡æœ‰å¤ªé‡çš„å°è£…),è®¡åˆ’æ”¯æŒymal,toml\nprism_container ä¾èµ–æ³¨å…¥æ¡†æ¶\nprism_qt_modular æ¨¡å—åŒ–ç›¸å…³ï¼ŒåŒ…æ‹¬ä¸€ä¸ªè·¨å¹³å°çš„åŠ¨æ€åŠ è½½åŠ¨æ€åº“åŠcé£æ ¼å‡½æ•°æŒ‡é’ˆçš„å°è£…,è·¨å¹³å°å…±äº«å†…å­˜å°è£…\nprism_qt_cofe qtåå°„æ‰©å±•æ ¸å¿ƒåº“,ä¸»è¦å¯¹qt list model,tree modelè¿›è¡Œæ³›å‹å°è£…ï¼Œæ”¯æŒqmlåŒå‘ç»‘å®šåˆ°æ™®é€šc++ç±»\nprism_qt_ui qmlåå°„æ‰©å±•ç›¸å…³ï¼Œå°è£…äº†ä¸€äº›é¢å¤–çš„æ¡Œé¢æ§åˆ¶ï¼Œå¦‚openGL è§†é¢‘æ¸²æŸ“å™¨(ç›®å‰åªæ”¯æŒmono8,rgb,yuv420p,nv12)\nprism_qt_all git é¡¶å±‚é¡¹ç›®,é€šè¿‡git submoduleç®¡ç†æ‰€æœ‰å­æ¨¡å—ï¼Œæ–¹ä¾¿ç­¾å‡ºå„æ¨¡å—å…¼å®¹çš„ç‰ˆæœ¬\nvcpkg è®¡åˆ’ä¸­çš„vcpkg private registryï¼Œprismæ‰€æœ‰æ¨¡å—éƒ½æ”¯æŒè‡ªåŠ¨ç”ŸæˆvcpkgåŒ…æ•°æ®ï¼Œç®€å•çš„å‘å¸ƒåˆ°ç§æœ‰vcpkgä»“åº“ï¼Œäº«å—vcpkgçš„èµ„äº§ç¼“å­˜å’ŒäºŒè¿›åˆ¶ç¼“å­˜ï¼Œç‰ˆæœ¬æ§åˆ¶ç­‰å¥½å¤„\nå·¥ä½œç»å† 14.09-18.03 æ³‰å· ç”µæ°”å·¥ç¨‹å¸ˆ 18.03-21.03 å¹¿å· windowsæ¡Œé¢å¼€å‘ 21.03-22.11 åŒ—äº¬ windowsæ¡Œé¢å¼€å‘ 22.11-25.11 åŒ—äº¬ windows/linuxæ¡Œé¢å¼€å‘ 25.11 \u0026mdash;\u0026ndash; æ·±åœ³ æš‚å®špython uiä»” æŠ€èƒ½ç‚¹ C# XAML WPF Wix C++ Python QML Qt Quick CMAKE VCPKG Linux Windows Docker ", 
        "url": "\/about\/"
    },
    
    "\/categories\/": {
        "title": "Categories",
        "tags": [],
        "content": "", 
        "url": "\/categories\/"
    },
    
    "\/tags\/ci\/cd\/": {
        "title": "CI\/CD",
        "tags": [],
        "content": "", 
        "url": "\/tags\/ci\/cd\/"
    },
    
    "\/search\/": {
        "title": "Search Results:",
        "tags": [],
        "content": "", 
        "url": "\/search\/"
    },
    
}
</script>
<script src="/js/lunr.min.js"></script>
<script src="/js/search.js"></script>


